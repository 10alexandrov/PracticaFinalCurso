import './polyfills.server.mjs';
import{$ as le,A as l,Aa as P,B as h,Ba as ce,C as et,Ca as te,D as tt,Da as on,E as z,Ea as an,F as m,Fa as sn,G as Ht,Ga as rt,H as d,Ha as ln,I as oe,J as o,K as a,Ka as cn,L as v,M as q,N as Y,O as y,Oa as dn,P as p,Q as u,Qa as he,R as Gt,Ra as un,S as St,Sa as mn,T as s,U as C,V as S,W as it,X as Bt,Y as L,Z as j,_ as W,a as zi,aa as M,b as D,ba as ee,c as qi,ca as Ue,d as $,da as Xi,e as Yi,ea as $t,f as Rt,fa as Qi,g as se,h as N,ha as Ki,i as Lt,j as qe,k as A,l as Zi,la as en,m as E,n as jt,na as tn,o as R,p as Wt,pa as Fi,q as Ye,qa as nt,r as g,ra as Pe,s as _,sa as nn,t as Ze,ta as Ai,u as Pi,v as Oe,va as zt,w as Ji,wa as H,x as V,xa as w,y as Se,ya as rn,z as we,za as qt}from"./chunk-4ASYDSIJ.mjs";import{a as pe,b as ye}from"./chunk-5XUXGTUW.mjs";var Yt=class n{title="almacen";static \u0275fac=function(i){return new(i||n)};static \u0275cmp=E({type:n,selectors:[["app-root"]],standalone:!0,features:[M],decls:2,vars:0,consts:[[1,"wrapper"]],template:function(i,t){i&1&&(o(0,"div",0),v(1,"router-outlet"),a())},dependencies:[dn],styles:[".info-container[_ngcontent-%COMP%]{padding-left:25%;margin:0 auto;width:70%}"]})};var Sn=(()=>{let e=class e{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=c=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}};e.\u0275fac=function(r){return new(r||e)(h(et),h(Se))},e.\u0275dir=R({type:e});let n=e;return n})(),ct=(()=>{let e=class e extends Sn{};e.\u0275fac=(()=>{let t;return function(c){return(t||(t=Oe(e)))(c||e)}})(),e.\u0275dir=R({type:e,features:[z]});let n=e;return n})(),je=new qe(""),Qn={provide:je,useExisting:se(()=>Ui),multi:!0},Ui=(()=>{let e=class e extends ct{writeValue(t){this.setProperty("checked",t)}};e.\u0275fac=(()=>{let t;return function(c){return(t||(t=Oe(e)))(c||e)}})(),e.\u0275dir=R({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,c){r&1&&p("change",function(b){return c.onChange(b.target.checked)})("blur",function(){return c.onTouched()})},features:[le([Qn]),z]});let n=e;return n})(),Kn={provide:je,useExisting:se(()=>k),multi:!0};function er(){let n=Ai()?Ai().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var tr=new qe(""),k=(()=>{let e=class e extends Sn{constructor(t,r,c){super(t,r),this._compositionMode=c,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!er())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}};e.\u0275fac=function(r){return new(r||e)(h(et),h(Se),h(tr,8))},e.\u0275dir=R({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,c){r&1&&p("input",function(b){return c._handleInput(b.target.value)})("blur",function(){return c.onTouched()})("compositionstart",function(){return c._compositionStart()})("compositionend",function(b){return c._compositionEnd(b.target.value)})},features:[le([Kn]),z]});let n=e;return n})();function Ne(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}function xn(n){return n!=null&&typeof n.length=="number"}var Je=new qe(""),dt=new qe(""),ir=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,I=class{static min(e){return nr(e)}static max(e){return rr(e)}static required(e){return En(e)}static requiredTrue(e){return or(e)}static email(e){return ar(e)}static minLength(e){return sr(e)}static maxLength(e){return lr(e)}static pattern(e){return cr(e)}static nullValidator(e){return Jt(e)}static compose(e){return An(e)}static composeAsync(e){return Vn(e)}};function nr(n){return e=>{if(Ne(e.value)||Ne(n))return null;let i=parseFloat(e.value);return!isNaN(i)&&i<n?{min:{min:n,actual:e.value}}:null}}function rr(n){return e=>{if(Ne(e.value)||Ne(n))return null;let i=parseFloat(e.value);return!isNaN(i)&&i>n?{max:{max:n,actual:e.value}}:null}}function En(n){return Ne(n.value)?{required:!0}:null}function or(n){return n.value===!0?null:{required:!0}}function ar(n){return Ne(n.value)||ir.test(n.value)?null:{email:!0}}function sr(n){return e=>Ne(e.value)||!xn(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function lr(n){return e=>xn(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}function cr(n){if(!n)return Jt;let e,i;return typeof n=="string"?(i="",n.charAt(0)!=="^"&&(i+="^"),i+=n,n.charAt(n.length-1)!=="$"&&(i+="$"),e=new RegExp(i)):(i=n.toString(),e=n),t=>{if(Ne(t.value))return null;let r=t.value;return e.test(r)?null:{pattern:{requiredPattern:i,actualValue:r}}}}function Jt(n){return null}function Mn(n){return n!=null}function In(n){return Ki(n)?qi(n):n}function wn(n){let e={};return n.forEach(i=>{e=i!=null?pe(pe({},e),i):e}),Object.keys(e).length===0?null:e}function Pn(n,e){return e.map(i=>i(n))}function dr(n){return!n.validate}function Fn(n){return n.map(e=>dr(e)?e:i=>e.validate(i))}function An(n){if(!n)return null;let e=n.filter(Mn);return e.length==0?null:function(i){return wn(Pn(i,e))}}function Ni(n){return n!=null?An(Fn(n)):null}function Vn(n){if(!n)return null;let e=n.filter(Mn);return e.length==0?null:function(i){let t=Pn(i,e).map(In);return Yi(t).pipe($(wn))}}function Ri(n){return n!=null?Vn(Fn(n)):null}function pn(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Dn(n){return n._rawValidators}function kn(n){return n._rawAsyncValidators}function Vi(n){return n?Array.isArray(n)?n:[n]:[]}function Xt(n,e){return Array.isArray(n)?n.includes(e):n===e}function fn(n,e){let i=Vi(e);return Vi(n).forEach(r=>{Xt(i,r)||i.push(r)}),i}function hn(n,e){return Vi(e).filter(i=>!Xt(n,i))}var Qt=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Ni(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ri(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,i){return this.control?this.control.hasError(e,i):!1}getError(e,i){return this.control?this.control.getError(e,i):null}},ae=class extends Qt{get formDirective(){return null}get path(){return null}},Re=class extends Qt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Kt=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},ur={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Ys=ye(pe({},ur),{"[class.ng-submitted]":"isSubmitted"}),O=(()=>{let e=class e extends Kt{constructor(t){super(t)}};e.\u0275fac=function(r){return new(r||e)(h(Re,2))},e.\u0275dir=R({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,c){r&2&&oe("ng-untouched",c.isUntouched)("ng-touched",c.isTouched)("ng-pristine",c.isPristine)("ng-dirty",c.isDirty)("ng-valid",c.isValid)("ng-invalid",c.isInvalid)("ng-pending",c.isPending)},features:[z]});let n=e;return n})(),J=(()=>{let e=class e extends Kt{constructor(t){super(t)}};e.\u0275fac=function(r){return new(r||e)(h(ae,10))},e.\u0275dir=R({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,c){r&2&&oe("ng-untouched",c.isUntouched)("ng-touched",c.isTouched)("ng-pristine",c.isPristine)("ng-dirty",c.isDirty)("ng-valid",c.isValid)("ng-invalid",c.isInvalid)("ng-pending",c.isPending)("ng-submitted",c.isSubmitted)},features:[z]});let n=e;return n})();var xt="VALID",Zt="INVALID",ot="PENDING",Et="DISABLED",Le=class{},ei=class extends Le{constructor(e,i){super(),this.value=e,this.source=i}},It=class extends Le{constructor(e,i){super(),this.pristine=e,this.source=i}},wt=class extends Le{constructor(e,i){super(),this.touched=e,this.source=i}},at=class extends Le{constructor(e,i){super(),this.status=e,this.source=i}},Di=class extends Le{constructor(e){super(),this.source=e}},ki=class extends Le{constructor(e){super(),this.source=e}};function Li(n){return(ri(n)?n.validators:n)||null}function mr(n){return Array.isArray(n)?Ni(n):n||null}function ji(n,e){return(ri(e)?e.asyncValidators:n)||null}function pr(n){return Array.isArray(n)?Ri(n):n||null}function ri(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Tn(n,e,i){let t=n.controls;if(!(e?Object.keys(t):t).length)throw new Rt(1e3,"");if(!t[i])throw new Rt(1001,"")}function On(n,e,i){n._forEachChild((t,r)=>{if(i[r]===void 0)throw new Rt(1002,"")})}var st=class{constructor(e,i){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=nt(()=>this.statusReactive()),this.statusReactive=tt(void 0),this._pristine=nt(()=>this.pristineReactive()),this.pristineReactive=tt(!0),this._touched=nt(()=>this.touchedReactive()),this.touchedReactive=tt(!1),this._events=new zi,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(i)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Pe(this.statusReactive)}set status(e){Pe(()=>this.statusReactive.set(e))}get valid(){return this.status===xt}get invalid(){return this.status===Zt}get pending(){return this.status==ot}get disabled(){return this.status===Et}get enabled(){return this.status!==Et}get pristine(){return Pe(this.pristineReactive)}set pristine(e){Pe(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Pe(this.touchedReactive)}set touched(e){Pe(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(fn(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(fn(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(hn(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(hn(e,this._rawAsyncValidators))}hasValidator(e){return Xt(this._rawValidators,e)}hasAsyncValidator(e){return Xt(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let i=this.touched===!1;this.touched=!0;let t=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ye(pe({},e),{sourceControl:t})),i&&e.emitEvent!==!1&&this._events.next(new wt(!0,t))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(i=>i.markAllAsTouched(e))}markAsUntouched(e={}){let i=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let t=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:t})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t),i&&e.emitEvent!==!1&&this._events.next(new wt(!1,t))}markAsDirty(e={}){let i=this.pristine===!0;this.pristine=!1;let t=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ye(pe({},e),{sourceControl:t})),i&&e.emitEvent!==!1&&this._events.next(new It(!1,t))}markAsPristine(e={}){let i=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let t=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&e.emitEvent!==!1&&this._events.next(new It(!0,t))}markAsPending(e={}){this.status=ot;let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new at(this.status,i)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ye(pe({},e),{sourceControl:i}))}disable(e={}){let i=this._parentMarkedDirty(e.onlySelf);this.status=Et,this.errors=null,this._forEachChild(r=>{r.disable(ye(pe({},e),{onlySelf:!0}))}),this._updateValue();let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ei(this.value,t)),this._events.next(new at(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ye(pe({},e),{skipPristineCheck:i}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let i=this._parentMarkedDirty(e.onlySelf);this.status=xt,this._forEachChild(t=>{t.enable(ye(pe({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ye(pe({},e),{skipPristineCheck:i}),this),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(e,i){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},i),this._parent._updateTouched({},i))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let t=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===xt||this.status===ot)&&this._runAsyncValidator(t,e.emitEvent)}let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ei(this.value,i)),this._events.next(new at(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ye(pe({},e),{sourceControl:i}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(i=>i._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Et:xt}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,i){if(this.asyncValidator){this.status=ot,this._hasOwnPendingAsyncValidator={emitEvent:i!==!1};let t=In(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:i,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,i={}){this.errors=e,this._updateControlsErrors(i.emitEvent!==!1,this,i.shouldHaveEmitted)}get(e){let i=e;return i==null||(Array.isArray(i)||(i=i.split(".")),i.length===0)?null:i.reduce((t,r)=>t&&t._find(r),this)}getError(e,i){let t=i?this.get(i):this;return t&&t.errors?t.errors[e]:null}hasError(e,i){return!!this.getError(e,i)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,i,t){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||t)&&this._events.next(new at(this.status,i)),this._parent&&this._parent._updateControlsErrors(e,i,t)}_initObservables(){this.valueChanges=new V,this.statusChanges=new V}_calculateStatus(){return this._allControlsDisabled()?Et:this.errors?Zt:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ot)?ot:this._anyControlsHaveStatus(Zt)?Zt:xt}_anyControlsHaveStatus(e){return this._anyControls(i=>i.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,i){let t=!this._anyControlsDirty(),r=this.pristine!==t;this.pristine=t,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),r&&this._events.next(new It(this.pristine,i))}_updateTouched(e={},i){this.touched=this._anyControlsTouched(),this._events.next(new wt(this.touched,i)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ri(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let i=this._parent&&this._parent.dirty;return!e&&!!i&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=mr(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=pr(this._rawAsyncValidators)}},lt=class extends st{constructor(e,i,t){super(Li(i),ji(t,i)),this.controls=e,this._initObservables(),this._setUpdateStrategy(i),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,i){return this.controls[e]?this.controls[e]:(this.controls[e]=i,i.setParent(this),i._registerOnCollectionChange(this._onCollectionChange),i)}addControl(e,i,t={}){this.registerControl(e,i),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}removeControl(e,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}setControl(e,i,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],i&&this.registerControl(e,i),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,i={}){On(this,!0,e),Object.keys(e).forEach(t=>{Tn(this,!0,t),this.controls[t].setValue(e[t],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i)}patchValue(e,i={}){e!=null&&(Object.keys(e).forEach(t=>{let r=this.controls[t];r&&r.patchValue(e[t],{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i))}reset(e={},i={}){this._forEachChild((t,r)=>{t.reset(e?e[r]:null,{onlySelf:!0,emitEvent:i.emitEvent})}),this._updatePristine(i,this),this._updateTouched(i,this),this.updateValueAndValidity(i)}getRawValue(){return this._reduceChildren({},(e,i,t)=>(e[t]=i.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(i,t)=>t._syncPendingControls()?!0:i);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(i=>{let t=this.controls[i];t&&e(t,i)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[i,t]of Object.entries(this.controls))if(this.contains(i)&&e(t))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(i,t,r)=>((t.enabled||this.disabled)&&(i[r]=t.value),i))}_reduceChildren(e,i){let t=e;return this._forEachChild((r,c)=>{t=i(t,r,c)}),t}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Ti=class extends lt{};var ut=new qe("CallSetDisabledState",{providedIn:"root",factory:()=>Ft}),Ft="always";function oi(n,e){return[...e.path,n]}function ti(n,e,i=Ft){Wi(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||i==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),hr(n,e),_r(n,e),gr(n,e),fr(n,e)}function gn(n,e,i=!0){let t=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(t),e.valueAccessor.registerOnTouched(t)),ni(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function ii(n,e){n.forEach(i=>{i.registerOnValidatorChange&&i.registerOnValidatorChange(e)})}function fr(n,e){if(e.valueAccessor.setDisabledState){let i=t=>{e.valueAccessor.setDisabledState(t)};n.registerOnDisabledChange(i),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(i)})}}function Wi(n,e){let i=Dn(n);e.validator!==null?n.setValidators(pn(i,e.validator)):typeof i=="function"&&n.setValidators([i]);let t=kn(n);e.asyncValidator!==null?n.setAsyncValidators(pn(t,e.asyncValidator)):typeof t=="function"&&n.setAsyncValidators([t]);let r=()=>n.updateValueAndValidity();ii(e._rawValidators,r),ii(e._rawAsyncValidators,r)}function ni(n,e){let i=!1;if(n!==null){if(e.validator!==null){let r=Dn(n);if(Array.isArray(r)&&r.length>0){let c=r.filter(f=>f!==e.validator);c.length!==r.length&&(i=!0,n.setValidators(c))}}if(e.asyncValidator!==null){let r=kn(n);if(Array.isArray(r)&&r.length>0){let c=r.filter(f=>f!==e.asyncValidator);c.length!==r.length&&(i=!0,n.setAsyncValidators(c))}}}let t=()=>{};return ii(e._rawValidators,t),ii(e._rawAsyncValidators,t),i}function hr(n,e){e.valueAccessor.registerOnChange(i=>{n._pendingValue=i,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Un(n,e)})}function gr(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Un(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Un(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function _r(n,e){let i=(t,r)=>{e.valueAccessor.writeValue(t),r&&e.viewToModelUpdate(t)};n.registerOnChange(i),e._registerOnDestroy(()=>{n._unregisterOnChange(i)})}function Nn(n,e){n==null,Wi(n,e)}function vr(n,e){return ni(n,e)}function Rn(n,e){if(!n.hasOwnProperty("model"))return!1;let i=n.model;return i.isFirstChange()?!0:!Object.is(e,i.currentValue)}function Cr(n){return Object.getPrototypeOf(n.constructor)===ct}function Ln(n,e){n._syncPendingControls(),e.forEach(i=>{let t=i.control;t.updateOn==="submit"&&t._pendingChange&&(i.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function jn(n,e){if(!e)return null;Array.isArray(e);let i,t,r;return e.forEach(c=>{c.constructor===k?i=c:Cr(c)?t=c:r=c}),r||t||i||null}function br(n,e){let i=n.indexOf(e);i>-1&&n.splice(i,1)}var yr={provide:ae,useExisting:se(()=>fe)},Mt=Promise.resolve(),fe=(()=>{let e=class e extends ae{get submitted(){return Pe(this.submittedReactive)}constructor(t,r,c){super(),this.callSetDisabledState=c,this._submitted=nt(()=>this.submittedReactive()),this.submittedReactive=tt(!1),this._directives=new Set,this.ngSubmit=new V,this.form=new lt({},Ni(t),Ri(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Mt.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),ti(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Mt.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Mt.then(()=>{let r=this._findContainer(t.path),c=new lt({});Nn(c,t),r.registerControl(t.name,c),c.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Mt.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Mt.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),Ln(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}};e.\u0275fac=function(r){return new(r||e)(h(Je,10),h(dt,10),h(ut,8))},e.\u0275dir=R({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,c){r&1&&p("submit",function(b){return c.onSubmit(b)})("reset",function(){return c.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[le([yr]),z]});let n=e;return n})();function _n(n,e){let i=n.indexOf(e);i>-1&&n.splice(i,1)}function vn(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Pt=class extends st{constructor(e=null,i,t){super(Li(i),ji(t,i)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(i),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ri(i)&&(i.nonNullable||i.initialValueIsDefault)&&(vn(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,i={}){this.value=this._pendingValue=e,this._onChange.length&&i.emitModelToViewChange!==!1&&this._onChange.forEach(t=>t(this.value,i.emitViewToModelChange!==!1)),this.updateValueAndValidity(i)}patchValue(e,i={}){this.setValue(e,i)}reset(e=this.defaultValue,i={}){this._applyFormState(e),this.markAsPristine(i),this.markAsUntouched(i),this.setValue(this.value,i),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){_n(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){_n(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){vn(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Sr=n=>n instanceof Pt,xr=(()=>{let e=class e extends ae{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return oi(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}};e.\u0275fac=(()=>{let t;return function(c){return(t||(t=Oe(e)))(c||e)}})(),e.\u0275dir=R({type:e,features:[z]});let n=e;return n})();var Er={provide:Re,useExisting:se(()=>G)},Cn=Promise.resolve(),G=(()=>{let e=class e extends Re{constructor(t,r,c,f,b,x){super(),this._changeDetectorRef=b,this.callSetDisabledState=x,this.control=new Pt,this._registered=!1,this.name="",this.update=new V,this._parent=t,this._setValidators(r),this._setAsyncValidators(c),this.valueAccessor=jn(this,f)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Rn(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){ti(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Cn.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,c=r!==0&&Fi(r);Cn.then(()=>{c&&!this.control.disabled?this.control.disable():!c&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?oi(t,this._parent):[t]}};e.\u0275fac=function(r){return new(r||e)(h(ae,9),h(Je,10),h(dt,10),h(je,10),h(tn,8),h(ut,8))},e.\u0275dir=R({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[le([Er]),z,Ye]});let n=e;return n})(),X=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=R({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})(),Mr={provide:je,useExisting:se(()=>Xe),multi:!0},Xe=(()=>{let e=class e extends ct{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let t;return function(c){return(t||(t=Oe(e)))(c||e)}})(),e.\u0275dir=R({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,c){r&1&&p("input",function(b){return c.onChange(b.target.value)})("blur",function(){return c.onTouched()})},features:[le([Mr]),z]});let n=e;return n})(),Ir={provide:je,useExisting:se(()=>Hi),multi:!0};var wr=(()=>{let e=class e{constructor(){this._accessors=[]}add(t,r){this._accessors.push([t,r])}remove(t){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===t){this._accessors.splice(r,1);return}}select(t){this._accessors.forEach(r=>{this._isSameGroup(r,t)&&r[1]!==t&&r[1].fireUncheck(t.value)})}_isSameGroup(t,r){return t[0].control?t[0]._parent===r._control._parent&&t[1].name===r.name:!1}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Hi=(()=>{let e=class e extends ct{constructor(t,r,c,f){super(t,r),this._registry=c,this._injector=f,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=Zi(ut,{optional:!0})??Ft}ngOnInit(){this._control=this._injector.get(Re),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this.setProperty("checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}setDisabledState(t){(this.setDisabledStateFired||t||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",t),this.setDisabledStateFired=!0}fireUncheck(t){this.writeValue(t)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}};e.\u0275fac=function(r){return new(r||e)(h(et),h(Se),h(wr),h(Ji))},e.\u0275dir=R({type:e,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,c){r&1&&p("change",function(){return c.onChange()})("blur",function(){return c.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[le([Ir]),z]});let n=e;return n})();var Wn=new qe("");var Pr={provide:ae,useExisting:se(()=>We)},We=(()=>{let e=class e extends ae{get submitted(){return Pe(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,c){super(),this.callSetDisabledState=c,this._submitted=nt(()=>this._submittedReactive()),this._submittedReactive=tt(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new V,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ni(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return ti(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){gn(t.control||null,t,!1),br(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),Ln(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new Di(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new ki(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,c=this.form.get(t.path);r!==c&&(gn(r||null,t),Sr(c)&&(ti(c,t,this.callSetDisabledState),t.control=c))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);Nn(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&vr(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Wi(this.form,this),this._oldForm&&ni(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)(h(Je,10),h(dt,10),h(ut,8))},e.\u0275dir=R({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,c){r&1&&p("submit",function(b){return c.onSubmit(b)})("reset",function(){return c.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[le([Pr]),z,Ye]});let n=e;return n})(),Fr={provide:ae,useExisting:se(()=>ai)},ai=(()=>{let e=class e extends xr{constructor(t,r,c){super(),this.name=null,this._parent=t,this._setValidators(r),this._setAsyncValidators(c)}_checkParentType(){Gn(this._parent)}};e.\u0275fac=function(r){return new(r||e)(h(ae,13),h(Je,10),h(dt,10))},e.\u0275dir=R({type:e,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},features:[le([Fr]),z]});let n=e;return n})(),Ar={provide:ae,useExisting:se(()=>Hn)},Hn=(()=>{let e=class e extends ae{constructor(t,r,c){super(),this.name=null,this._parent=t,this._setValidators(r),this._setAsyncValidators(c)}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return oi(this.name==null?this.name:this.name.toString(),this._parent)}_checkParentType(){Gn(this._parent)}};e.\u0275fac=function(r){return new(r||e)(h(ae,13),h(Je,10),h(dt,10))},e.\u0275dir=R({type:e,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},features:[le([Ar]),z]});let n=e;return n})();function Gn(n){return!(n instanceof ai)&&!(n instanceof We)&&!(n instanceof Hn)}var Vr={provide:Re,useExisting:se(()=>Qe)},Qe=(()=>{let e=class e extends Re{set isDisabled(t){}constructor(t,r,c,f,b){super(),this._ngModelWarningConfig=b,this._added=!1,this.name=null,this.update=new V,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(c),this.valueAccessor=jn(this,f)}ngOnChanges(t){this._added||this._setUpControl(),Rn(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return oi(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(h(ae,13),h(Je,10),h(dt,10),h(je,10),h(Wn,8))},e.\u0275dir=R({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[le([Vr]),z,Ye]});let n=e;return n})(),Dr={provide:je,useExisting:se(()=>de),multi:!0};function Bn(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function kr(n){return n.split(":")[0]}var de=(()=>{let e=class e extends ct{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),c=Bn(r,t);this.setProperty("value",c)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=kr(t);return this._optionMap.has(r)?this._optionMap.get(r):t}};e.\u0275fac=(()=>{let t;return function(c){return(t||(t=Oe(e)))(c||e)}})(),e.\u0275dir=R({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,c){r&1&&p("change",function(b){return c.onChange(b.target.value)})("blur",function(){return c.onTouched()})},inputs:{compareWith:"compareWith"},features:[le([Dr]),z]});let n=e;return n})(),ge=(()=>{let e=class e{constructor(t,r,c){this._element=t,this._renderer=r,this._select=c,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(Bn(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(h(Se),h(et),h(de,9))},e.\u0275dir=R({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})(),Tr={provide:je,useExisting:se(()=>$n),multi:!0};function bn(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Or(n){return n.split(":")[0]}var $n=(()=>{let e=class e extends ct{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let c=t.map(f=>this._getOptionId(f));r=(f,b)=>{f._setSelected(c.indexOf(b.toString())>-1)}}else r=(c,f)=>{c._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let c=[],f=r.selectedOptions;if(f!==void 0){let b=f;for(let x=0;x<b.length;x++){let ne=b[x],re=this._getOptionValue(ne.value);c.push(re)}}else{let b=r.options;for(let x=0;x<b.length;x++){let ne=b[x];if(ne.selected){let re=this._getOptionValue(ne.value);c.push(re)}}}this.value=c,t(c)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=Or(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}};e.\u0275fac=(()=>{let t;return function(c){return(t||(t=Oe(e)))(c||e)}})(),e.\u0275dir=R({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,c){r&1&&p("change",function(b){return c.onChange(b.target)})("blur",function(){return c.onTouched()})},inputs:{compareWith:"compareWith"},features:[le([Tr]),z]});let n=e;return n})(),_e=(()=>{let e=class e{constructor(t,r,c){this._element=t,this._renderer=r,this._select=c,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(bn(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(bn(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(h(Se),h(et),h($n,9))},e.\u0275dir=R({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})();var Ur=(()=>{let e=class e{constructor(){this._validator=Jt}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Jt,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=R({type:e,features:[Ye]});let n=e;return n})();var Nr={provide:Je,useExisting:se(()=>At),multi:!0};var At=(()=>{let e=class e extends Ur{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Fi,this.createValidator=t=>En}enabled(t){return t}};e.\u0275fac=(()=>{let t;return function(c){return(t||(t=Oe(e)))(c||e)}})(),e.\u0275dir=R({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,c){r&2&&Ht("required",c._enabled?"":null)},inputs:{required:"required"},features:[le([Nr]),z]});let n=e;return n})();var zn=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=jt({type:e}),e.\u0275inj=Lt({});let n=e;return n})(),Oi=class extends st{constructor(e,i,t){super(Li(i),ji(t,i)),this.controls=e,this._initObservables(),this._setUpdateStrategy(i),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,i={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}insert(e,i,t={}){this.controls.splice(e,0,i),this._registerControl(i),this.updateValueAndValidity({emitEvent:t.emitEvent})}removeAt(e,i={}){let t=this._adjustIndex(e);t<0&&(t=0),this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:i.emitEvent})}setControl(e,i,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),i&&(this.controls.splice(r,0,i),this._registerControl(i)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,i={}){On(this,!1,e),e.forEach((t,r)=>{Tn(this,!1,r),this.at(r).setValue(t,{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i)}patchValue(e,i={}){e!=null&&(e.forEach((t,r)=>{this.at(r)&&this.at(r).patchValue(t,{onlySelf:!0,emitEvent:i.emitEvent})}),this.updateValueAndValidity(i))}reset(e=[],i={}){this._forEachChild((t,r)=>{t.reset(e[r],{onlySelf:!0,emitEvent:i.emitEvent})}),this._updatePristine(i,this),this._updateTouched(i,this),this.updateValueAndValidity(i)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(i=>i._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((i,t)=>t._syncPendingControls()?!0:i,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((i,t)=>{e(i,t)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(i=>i.enabled&&e(i))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function yn(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var He=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new e;return t.useNonNullable=!0,t}group(t,r=null){let c=this._reduceControls(t),f={};return yn(r)?f=r:r!==null&&(f.validators=r.validator,f.asyncValidators=r.asyncValidator),new lt(c,f)}record(t,r=null){let c=this._reduceControls(t);return new Ti(c,r)}control(t,r,c){let f={};return this.useNonNullable?(yn(r)?f=r:(f.validators=r,f.asyncValidators=c),new Pt(t,ye(pe({},f),{nonNullable:!0}))):new Pt(t,r,c)}array(t,r,c){let f=t.map(b=>this._createControl(b));return new Oi(f,r,c)}_reduceControls(t){let r={};return Object.keys(t).forEach(c=>{r[c]=this._createControl(t[c])}),r}_createControl(t){if(t instanceof Pt)return t;if(t instanceof st)return t;if(Array.isArray(t)){let r=t[0],c=t.length>1?t[1]:null,f=t.length>2?t[2]:null;return this.control(r,c,f)}else return this.control(t)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=N({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var U=(()=>{let e=class e{static withConfig(t){return{ngModule:e,providers:[{provide:ut,useValue:t.callSetDisabledState??Ft}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=jt({type:e}),e.\u0275inj=Lt({imports:[zn]});let n=e;return n})(),Ge=(()=>{let e=class e{static withConfig(t){return{ngModule:e,providers:[{provide:Wn,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:ut,useValue:t.callSetDisabledState??Ft}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=jt({type:e}),e.\u0275inj=Lt({imports:[zn]});let n=e;return n})();var T=class n{constructor(e,i){this.http=e;this.router=i}apiUrl="http://localhost:8080/api/user";login(e,i){return this.http.post(`${this.apiUrl}/login`,{u_login:e,u_password:i})}logout(){let e=this.getToken();e?this.http.post(`${this.apiUrl}/logout`,{},{headers:{Authorization:`Bearer ${e}`}}).subscribe(()=>{this.removeToken(),this.router.navigate(["/login"])},i=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 logout:",i)}):this.router.navigate(["/login"])}setToken(e){localStorage.setItem("jwtToken",e)}setTokenExpiry(e){localStorage.setItem("tokenExpiry",e.toString())}getTokenExpiry(){let e=localStorage.getItem("tokenExpiry");return e?parseInt(e,10):null}getToken(){return localStorage.getItem("jwtToken")}removeToken(){localStorage.removeItem("jwtToken"),localStorage.removeItem("role"),localStorage.removeItem("tokenExpiry"),localStorage.removeItem("usuario")}isTokenExpired(){let e=this.getTokenExpiry();return e?Date.now()>e:!0}isAuthenticated(){return!!this.getToken()&&!this.isTokenExpired()}checkTokenExpiration(){let e=this.getTokenExpiry();return e&&Date.now()>e?(this.removeToken(),this.router.navigate(["/login"]),!1):!0}setRole(e){localStorage.setItem("role",e)}getRole(){return localStorage.getItem("role")}setUsuario(e){localStorage.setItem("usuario",e)}getUsuario(){return localStorage.getItem("usuario")}static \u0275fac=function(i){return new(i||n)(A(te),A(he))};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})};var xe=class n{constructor(e,i){this.http=e;this.authService=i}productUrl="http://localhost:8080/api/productos";getProductos(){let e=this.getHeaderAuth();return this.authService.checkTokenExpiration()?this.http.get(this.productUrl,{headers:e}).pipe($(i=>i)):D}getProductosActivos(){let e=this.getHeaderAuth(),i="http://localhost:8080/api/productos/activos";return this.authService.checkTokenExpiration()?this.http.get(i,{headers:e}).pipe($(t=>t)):D}deleteProducto(e){let i=this.getHeaderAuth(),t=`http://localhost:8080/api/productos/${e}`;return this.authService.checkTokenExpiration()?this.http.delete(t,{headers:i}):D}createProducto(e){let i=this.getHeaderAuth();return this.authService.checkTokenExpiration()?(console.log("grab"),this.http.post(this.productUrl,e,{headers:i})):(console.log("no grab"),D)}actualizarProducto(e,i){let t=this.getHeaderAuth(),r=`${this.productUrl}/${e}`;return this.authService.checkTokenExpiration()?(console.log("update"),this.http.put(r,i,{headers:t})):(console.log("no update"),D)}getHeaderAuth(){let e=this.authService.getToken();return new ce({Authorization:`Bearer ${e}`})}static \u0275fac=function(i){return new(i||n)(A(te),A(T))};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})};function Rr(n,e){if(n&1){let i=y();o(0,"div",23)(1,"button",24),p("click",function(){g(i);let r=u();return _(r.editarProducto())}),s(2,"Editar"),a()()}}function Lr(n,e){if(n&1){let i=y();o(0,"div",25)(1,"button",26),p("click",function(){g(i);let r=u();return _(r.popupInterruptor())}),s(2,"Desactivar"),a()()}}function jr(n,e){n&1&&(o(0,"td",27),s(1," Activo"),a())}function Wr(n,e){n&1&&(o(0,"td",28),s(1," Inactivo"),a())}function Hr(n,e){if(n&1&&v(0,"img",29),n&2){let i=u();d("src",i.productoMostrar.imagenUrl,we)}}function Gr(n,e){if(n&1&&v(0,"img",29),n&2){let i=u();d("src",i.productoMostrar.imagenUrl,we)}}function Br(n,e){if(n&1){let i=y();o(0,"div",30)(1,"p"),s(2),a(),o(3,"div",31)(4,"button",32),p("click",function(){g(i);let r=u();return _(r.productoMostrar.product_id?r.deleteProducto(r.productoMostrar.product_id):null)}),s(5,"Desactivar"),a(),o(6,"button",33),p("click",function(){g(i);let r=u();return _(r.popupInterruptor())}),s(7,"Cerrar "),a()()()}if(n&2){let i=u();l(2),S("Desea desactivar producto: ",i.productoMostrar.p_nombre,"")}}var li=class n{constructor(e){this.productoService=e}productoMostrar;encenderRegimenEditar=new V;volverMostrar=new V;productoParaEditar=null;regimenEditar=!1;role=localStorage.getItem("role");ngOnInit(){console.log(this.productoMostrar.p_foto)}volverMostrarProducto(){this.volverMostrar.emit(!1)}deleteProducto(e){console.log("delete"),e?this.productoService.deleteProducto(e).subscribe(()=>{console.log(`Producto with  id ${e} deleted successfully.`),this.volverMostrar.emit(!0)},i=>{console.error(`Error deleting evento with id ${e}: ${i}`)}):console.error(`Evento with title ${e} has not found.`)}editarProducto(){console.log("editar"),this.encenderRegimenEditar.emit(!0)}isPopupDisactiveVisible=!1;popupInterruptor(){this.isPopupDisactiveVisible=!this.isPopupDisactiveVisible}static \u0275fac=function(i){return new(i||n)(h(xe))};static \u0275cmp=E({type:n,selectors:[["app-show-product"]],inputs:{productoMostrar:"productoMostrar"},outputs:{encenderRegimenEditar:"encenderRegimenEditar",volverMostrar:"volverMostrar"},standalone:!0,features:[M],decls:127,vars:28,consts:[[1,"wrapper"],[1,"row","mt-3","mb-2","justify-content-between"],[1,"pb-3","col-12","col-sm-5","col-md-6"],[1,"col-12","col-sm-5","col-md-6","row","justify-content-between","pb-3"],[1,"col-8","d-flex"],["class","mt-2",4,"ngIf"],["class","mt-2 ms-1",4,"ngIf"],[1,"mt-2","col-4","text-end"],[1,"btn","btn-info","btn-AW",3,"click"],[1,"descripcion","mb-2"],[1,"row","d-flex"],[1,"col-12","col-sm-8","mt-4"],[1,"table","table-striped","table-bordered"],[1,"table-primary"],["style","color:green",4,"ngIf"],["style","color:red",4,"ngIf"],[1,"col-4","desktop-version"],[1,"wrapper-image"],[1,"img-AW",3,"src"],[3,"src",4,"ngIf"],[1,"desktop-version"],[1,"mobile-version"],["class","popup2",4,"ngIf"],[1,"mt-2"],[1,"btn","btn-warning","btn-AW",3,"click"],[1,"mt-2","ms-1"],[1,"btn","btn-danger","btn-AW",3,"click"],[2,"color","green"],[2,"color","red"],[3,"src"],[1,"popup2"],[1,"d-flex","buttons","justify-content-around"],[1,"btn","btn-AW","btn-danger","m-auto",3,"click"],[1,"btn","btn-AW","btn-dark","m-auto",3,"click"]],template:function(i,t){i&1&&(o(0,"div",0)(1,"div",1)(2,"h1",2),s(3),a(),o(4,"div",3)(5,"div",4),m(6,Rr,3,0,"div",5)(7,Lr,3,0,"div",6),a(),o(8,"div",7)(9,"button",8),p("click",function(){return t.volverMostrarProducto()}),s(10,"Volver"),a()()()(),o(11,"div",9),s(12),a(),o(13,"div",10)(14,"div",11)(15,"table",12)(16,"thead",13)(17,"tr")(18,"th"),s(19,"Precio de compra"),a(),o(20,"th"),s(21,"Precio de venta"),a(),o(22,"th"),s(23,"Activo"),a()()(),o(24,"tbody")(25,"tr")(26,"td"),s(27),a(),o(28,"td"),s(29),a(),m(30,jr,2,0,"td",14)(31,Wr,2,0,"td",15),a()()(),o(32,"h5"),s(33,"Cantidad"),a(),o(34,"table",12)(35,"thead",13)(36,"tr")(37,"th"),s(38,"En Almacen"),a(),o(39,"th"),s(40,"En Entrega"),a(),o(41,"th"),s(42,"Reservado"),a()()(),o(43,"tbody")(44,"tr")(45,"td"),s(46),a(),o(47,"td"),s(48),a(),o(49,"td"),s(50),a()()()()(),o(51,"div",16)(52,"div",17),v(53,"img",18),m(54,Hr,1,1,"img",19),a()()(),o(55,"h5"),s(56,"Demenciones"),a(),o(57,"div",20)(58,"table",12)(59,"thead",13)(60,"tr")(61,"th"),s(62,"Altura, mm"),a(),o(63,"th"),s(64,"Anchura, mm"),a(),o(65,"th"),s(66,"Longitud, mm"),a(),o(67,"th"),s(68,"Peso, gr"),a(),o(69,"th"),s(70,"Unidades en palet, ud"),a(),o(71,"th"),s(72,"Peso de palet, kg"),a()()(),o(73,"tbody")(74,"tr")(75,"td"),s(76),a(),o(77,"td"),s(78),a(),o(79,"td"),s(80),a(),o(81,"td"),s(82),a(),o(83,"td"),s(84),a(),o(85,"td"),s(86),a()()()()(),o(87,"div",21)(88,"table",12)(89,"thead",13)(90,"tr")(91,"th"),s(92,"Altura, mm"),a(),o(93,"th"),s(94,"Anchura, mm"),a(),o(95,"th"),s(96,"Longitud, mm"),a()()(),o(97,"tbody")(98,"tr")(99,"td"),s(100),a(),o(101,"td"),s(102),a(),o(103,"td"),s(104),a()()()(),o(105,"table",12)(106,"thead",13)(107,"tr")(108,"th"),s(109,"Peso, gr"),a(),o(110,"th"),s(111,"Unidades en palet, ud"),a(),o(112,"th"),s(113,"Peso palet, kg"),a()()(),o(114,"tbody")(115,"tr")(116,"td"),s(117),a(),o(118,"td"),s(119),a(),o(120,"td"),s(121),a()()()(),o(122,"div")(123,"div",17),v(124,"img",18),m(125,Gr,1,1,"img",19),a()()()(),m(126,Br,8,1,"div",22)),i&2&&(l(3),S(" ",t.productoMostrar.p_nombre,""),l(3),d("ngIf",t.role==="admin"||t.role==="manager"),l(),d("ngIf",t.role==="admin"||t.role==="manager"),l(5),C(t.productoMostrar.p_descripcion),l(15),S(" ",t.productoMostrar.p_precio_compra,""),l(2),S(" ",t.productoMostrar.p_precio_venta,""),l(),d("ngIf",t.productoMostrar.p_activo),l(),d("ngIf",!t.productoMostrar.p_activo),l(15),S(" ",t.productoMostrar.p_cantidad_almacen,""),l(2),S(" ",t.productoMostrar.p_cantidad_entrega,""),l(2),S(" ",t.productoMostrar.p_cantidad_reservado,""),l(3),d("src",t.productoMostrar.p_foto,we),l(),d("ngIf",t.productoMostrar.imagenUrl),l(22),S(" ",t.productoMostrar.p_altura,""),l(2),S(" ",t.productoMostrar.p_ancho,""),l(2),S(" ",t.productoMostrar.p_longitud,""),l(2),S(" ",t.productoMostrar.p_peso,""),l(2),S(" ",t.productoMostrar.p_cantidad_palet,""),l(2),S(" ",t.productoMostrar.p_peso_palet,""),l(14),S(" ",t.productoMostrar.p_altura,""),l(2),S(" ",t.productoMostrar.p_ancho,""),l(2),S(" ",t.productoMostrar.p_longitud,""),l(13),S(" ",t.productoMostrar.p_peso,""),l(2),S(" ",t.productoMostrar.p_cantidad_palet,""),l(2),S(" ",t.productoMostrar.p_peso_palet,""),l(3),d("src",t.productoMostrar.p_foto,we),l(),d("ngIf",t.productoMostrar.imagenUrl),l(),d("ngIf",t.isPopupDisactiveVisible))},dependencies:[P,w],styles:[".wrapper-image[_ngcontent-%COMP%]{width:200px;height:300px;overflow:hidden}.img-AW[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.mobile-version[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 576px){.mobile-version[_ngcontent-%COMP%]{display:block}.desktop-version[_ngcontent-%COMP%]{display:none}}"]})};function $r(n,e){if(n&1&&(o(0,"div",4)(1,"a",15)(2,"span",6),s(3,"Usuarios"),a(),o(4,"span"),Ze(),o(5,"svg",7)(6,"g",8),v(7,"path",9)(8,"path",10)(9,"path",11),a()()()()()),n&2){let i=u();l(),oe("active",i.isActive("/usuarios"))}}function zr(n,e){if(n&1&&(o(0,"div",4)(1,"a",16)(2,"span",6),s(3,"Almacen"),a(),o(4,"span"),Ze(),o(5,"svg",7)(6,"g",8),v(7,"path",9)(8,"path",10)(9,"path",11),a()()()()()),n&2){let i=u();l(),oe("active",i.isActive("/almacen"))}}function qr(n,e){if(n&1&&(o(0,"div",4)(1,"a",17)(2,"span",6),s(3,"An\xE1lisis"),a(),o(4,"span"),Ze(),o(5,"svg",7)(6,"g",8),v(7,"path",9)(8,"path",10)(9,"path",11),a()()()()()),n&2){let i=u();l(),oe("active",i.isActive("/estadistica"))}}var ue=class n{constructor(e,i){this.authService=e;this.router=i}role=localStorage.getItem("role");isActive(e){return this.router.url===e}logout(){this.authService.logout()}static \u0275fac=function(i){return new(i||n)(h(T),h(he))};static \u0275cmp=E({type:n,selectors:[["app-menu"]],standalone:!0,features:[M],decls:36,vars:7,consts:[[1,"desktop-menu"],[1,"d-flex","pt-2","pb-2"],["src","https://omnigena.info/img/logo/1a_logotype-mini.png",1,"AW-logo-mini","m-auto"],["class","wrapper",4,"ngIf"],[1,"wrapper"],["id","desktop-menu-admin","href","/productos",1,"cta"],[1,"desktop-menu-title"],["width","40px","height","40px","viewBox","0 10 66 43","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink"],["id","arrow","stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["d","M40.1543933,3.89485454 L43.9763149,0.139296592 C44.1708311,-0.0518420739 44.4826329,-0.0518571125 44.6771675,0.139262789 L65.6916134,20.7848311 C66.0855801,21.1718824 66.0911863,21.8050225 65.704135,22.1989893 C65.7000188,22.2031791 65.6958657,22.2073326 65.6916762,22.2114492 L44.677098,42.8607841 C44.4825957,43.0519059 44.1708242,43.0519358 43.9762853,42.8608513 L40.1545186,39.1069479 C39.9575152,38.9134427 39.9546793,38.5968729 40.1481845,38.3998695 C40.1502893,38.3977268 40.1524132,38.395603 40.1545562,38.3934985 L56.9937789,21.8567812 C57.1908028,21.6632968 57.193672,21.3467273 57.0001876,21.1497035 C56.9980647,21.1475418 56.9959223,21.1453995 56.9937605,21.1432767 L40.1545208,4.60825197 C39.9574869,4.41477773 39.9546013,4.09820839 40.1480756,3.90117456 C40.1501626,3.89904911 40.1522686,3.89694235 40.1543933,3.89485454 Z","fill","#FFFFFF",1,"one"],["d","M20.1543933,3.89485454 L23.9763149,0.139296592 C24.1708311,-0.0518420739 24.4826329,-0.0518571125 24.6771675,0.139262789 L45.6916134,20.7848311 C46.0855801,21.1718824 46.0911863,21.8050225 45.704135,22.1989893 C45.7000188,22.2031791 45.6958657,22.2073326 45.6916762,22.2114492 L24.677098,42.8607841 C24.4825957,43.0519059 24.1708242,43.0519358 23.9762853,42.8608513 L20.1545186,39.1069479 C19.9575152,38.9134427 19.9546793,38.5968729 20.1481845,38.3998695 C20.1502893,38.3977268 20.1524132,38.395603 20.1545562,38.3934985 L36.9937789,21.8567812 C37.1908028,21.6632968 37.193672,21.3467273 37.0001876,21.1497035 C36.9980647,21.1475418 36.9959223,21.1453995 36.9937605,21.1432767 L20.1545208,4.60825197 C19.9574869,4.41477773 19.9546013,4.09820839 20.1480756,3.90117456 C20.1501626,3.89904911 20.1522686,3.89694235 20.1543933,3.89485454 Z","fill","#FFFFFF",1,"two"],["d","M0.154393339,3.89485454 L3.97631488,0.139296592 C4.17083111,-0.0518420739 4.48263286,-0.0518571125 4.67716753,0.139262789 L25.6916134,20.7848311 C26.0855801,21.1718824 26.0911863,21.8050225 25.704135,22.1989893 C25.7000188,22.2031791 25.6958657,22.2073326 25.6916762,22.2114492 L4.67709797,42.8607841 C4.48259567,43.0519059 4.17082418,43.0519358 3.97628526,42.8608513 L0.154518591,39.1069479 C-0.0424848215,38.9134427 -0.0453206733,38.5968729 0.148184538,38.3998695 C0.150289256,38.3977268 0.152413239,38.395603 0.154556228,38.3934985 L16.9937789,21.8567812 C17.1908028,21.6632968 17.193672,21.3467273 17.0001876,21.1497035 C16.9980647,21.1475418 16.9959223,21.1453995 16.9937605,21.1432767 L0.15452076,4.60825197 C-0.0425130651,4.41477773 -0.0453986756,4.09820839 0.148075568,3.90117456 C0.150162624,3.89904911 0.152268631,3.89694235 0.154393339,3.89485454 Z","fill","#FFFFFF",1,"three"],["id","desktop-menu-admin","href","/facturas",1,"cta"],[1,"wrapper","mt-5"],["id","desktop-menu",1,"cta",3,"click"],["id","desktop-menu-admin","href","/usuarios",1,"cta"],["id","desktop-menu-admin","href","/almacen",1,"cta"],["id","desktop-menu-admin","href","/estadistica",1,"cta"]],template:function(i,t){i&1&&(o(0,"div",0)(1,"div",1),v(2,"img",2),a(),m(3,$r,10,2,"div",3),o(4,"div",4)(5,"a",5)(6,"span",6),s(7,"Productos"),a(),o(8,"span"),Ze(),o(9,"svg",7)(10,"g",8),v(11,"path",9)(12,"path",10)(13,"path",11),a()()()()(),Pi(),o(14,"div",4)(15,"a",12)(16,"span",6),s(17,"Facturas"),a(),o(18,"span"),Ze(),o(19,"svg",7)(20,"g",8),v(21,"path",9)(22,"path",10)(23,"path",11),a()()()()(),m(24,zr,10,2,"div",3)(25,qr,10,2,"div",3),Pi(),o(26,"div",13)(27,"button",14),p("click",function(){return t.logout()}),o(28,"span",6),s(29,"Logout"),a(),o(30,"span"),Ze(),o(31,"svg",7)(32,"g",8),v(33,"path",9)(34,"path",10)(35,"path",11),a()()()()()()),i&2&&(l(3),d("ngIf",t.role==="admin"),l(2),oe("active",t.isActive("/productos")),l(10),oe("active",t.isActive("/facturas")),l(9),d("ngIf",t.role!=="vendedor"&&t.role!=="cliente"),l(),d("ngIf",t.role!=="receptor"&&t.role!=="recogedor"))},dependencies:[P,w,mn],styles:['@charset "UTF-8";*[_ngcontent-%COMP%]{box-sizing:border-box}.desktop-menu[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:100vh;background:linear-gradient(to bottom,#0f0c29,#302b63,#24243e)}.AW-logo-mini[_ngcontent-%COMP%]{width:30%}.wrapper[_ngcontent-%COMP%]{display:flex;margin:0 0 8px}.cta[_ngcontent-%COMP%]{display:flex;width:250px;padding:0 20px;text-decoration:none;font-family:Jost,sans-serif;font-size:33px;color:#fff;background:linear-gradient(to bottom,#0f0c29,#302b63,#24243e);transition:1s;box-shadow:6px 6px #000;transform:skew(-15deg);justify-content:space-between}.active[_ngcontent-%COMP%]{color:#fff;background:linear-gradient(to bottom,#3f31a5,#635acc,#3f31a5);transition:1s;box-shadow:6px 6px #000;transform:skew(-15deg);justify-content:space-between}.cta[_ngcontent-%COMP%]:focus{outline:none}.cta[_ngcontent-%COMP%]:hover{transition:.5s;box-shadow:10px 10px #fbc638}.cta[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:nth-child(2){transition:.5s;margin-right:0}.cta[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]:nth-child(2){transition:.5s;margin-right:45px}span[_ngcontent-%COMP%]{transform:skew(15deg)}.desktop-menu-title[_ngcontent-%COMP%]{width:190px;text-align:left}span[_ngcontent-%COMP%]:nth-child(2){width:20px;margin-left:30px;position:relative;top:12%}path.one[_ngcontent-%COMP%]{transition:.4s;transform:translate(-60%)}path.two[_ngcontent-%COMP%]{transition:.5s;transform:translate(-30%)}.cta[_ngcontent-%COMP%]:hover   path.three[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_color_anim 1s infinite .2s}.cta[_ngcontent-%COMP%]:hover   path.one[_ngcontent-%COMP%]{transform:translate(0);animation:_ngcontent-%COMP%_color_anim 1s infinite .6s}.cta[_ngcontent-%COMP%]:hover   path.two[_ngcontent-%COMP%]{transform:translate(0);animation:_ngcontent-%COMP%_color_anim 1s infinite .4s}#desktop-menu-admin-submenu[_ngcontent-%COMP%], #desktop-menu-pedido-submenu[_ngcontent-%COMP%]{overflow:hidden;transition:height .5s ease-out}@keyframes _ngcontent-%COMP%_color_anim{0%{fill:#fff}50%{fill:#fbc638}to{fill:#fff}}']})};var Be=class n{constructor(e,i){this.http=e;this.authService=i}categoriaUrl="http://localhost:8080/api/categorias";getCategorias(){let e=this.authService.getToken(),i=new ce({Authorization:`Bearer ${e}`});return this.authService.checkTokenExpiration()?this.http.get(this.categoriaUrl,{headers:i}).pipe($(t=>t)):D}static \u0275fac=function(i){return new(i||n)(A(te),A(T))};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ee=(n,e)=>({"is-valid":n,"is-invalid":e});function Yr(n,e){n&1&&(o(0,"h1",51),s(1,"Crear nuevo Producto"),a())}function Zr(n,e){n&1&&(o(0,"h1",51),s(1,"Editar producto"),a())}function Jr(n,e){n&1&&(o(0,"div",52)(1,"button",53),s(2,"Crear"),a()())}function Xr(n,e){n&1&&(o(0,"div",52)(1,"button",53),s(2,"Guardar"),a()())}function Qr(n,e){n&1&&(o(0,"div",54),s(1," * Este campo es obligatorio! "),a())}function Kr(n,e){if(n&1&&(o(0,"option",55),s(1),a()),n&2){let i=e.$implicit,t=e.index;d("value",t),l(),S(" ",i.c_nombre," ")}}function eo(n,e){n&1&&(o(0,"div",54),s(1," * Este campo es obligatorio! "),a())}function to(n,e){n&1&&(o(0,"div",56),s(1," * Este campo es obligatorio! "),a())}function io(n,e){n&1&&(o(0,"div",57),s(1," * En este campo solo cifras! "),a())}function no(n,e){n&1&&(o(0,"div",56),s(1," * Este campo es obligatorio! "),a())}function ro(n,e){n&1&&(o(0,"div",57),s(1," * En este campo solo cifras! "),a())}function oo(n,e){n&1&&(o(0,"div",56),s(1," * Este campo es obligatorio! "),a())}function ao(n,e){n&1&&(o(0,"div",57),s(1," * En este campo solo cifras! "),a())}function so(n,e){n&1&&(o(0,"div",56),s(1," * Este campo es obligatorio! "),a())}function lo(n,e){n&1&&(o(0,"div",57),s(1," * En este campo solo cifras! "),a())}function co(n,e){n&1&&(o(0,"div",56),s(1," * Este campo es obligatorio! "),a())}function uo(n,e){n&1&&(o(0,"div",57),s(1," * En este campo solo cifras! "),a())}function mo(n,e){n&1&&(o(0,"div",56),s(1," * Este campo es obligatorio! "),a())}function po(n,e){n&1&&(o(0,"div",57),s(1," * En este campo solo cifras! "),a())}function fo(n,e){n&1&&(o(0,"div",56),s(1," * Este campo es obligatorio! "),a())}function ho(n,e){n&1&&(o(0,"div",57),s(1," * En este campo solo cifras! "),a())}function go(n,e){n&1&&(o(0,"div",56),s(1," * Este campo es obligatorio! "),a())}function _o(n,e){n&1&&(o(0,"div",57),s(1," * En este campo solo cifras! "),a())}function vo(n,e){n&1&&(o(0,"div",57),s(1," * Tiene que haber 13 d\xEDgitos. "),a())}function Co(n,e){n&1&&(o(0,"div",57),s(1," * Tiene que haber 13 d\xEDgitos. "),a())}function bo(n,e){if(n&1&&v(0,"img",58),n&2){let i=u();d("src",i.p_foto,we)}}var ci=class n{constructor(e,i,t){this.fb=e;this.productosService=i;this.categoriasService=t}volverMostrar=new V;formCreateProducto;role=localStorage.getItem("role");p_foto=void 0;categorias=[];productoParaEditar=null;regimenUpdate=!1;ngOnInit(){this.categoriasService.getCategorias().subscribe(e=>{this.categorias=e},e=>{console.log("Error data de categorias",e)}),this.formCreateProducto=this.fb.group({p_nombre:["",[I.required,I.maxLength(50)]],p_descripcion:["",[I.maxLength(200)]],p_ancho:["",[I.required,I.pattern("^[0-9]+$"),I.min(1)]],p_longitud:["",[I.required,I.pattern("^[0-9]+$"),I.min(1)]],p_altura:["",[I.required,I.pattern("^[0-9]+$"),I.min(1)]],p_peso:["",[I.required,I.pattern("^[0-9]+$"),I.min(1)]],p_categoria:["",I.required],p_foto:[""],p_precio_compra:["",[I.required,I.pattern("^[0-9]+(.[0-9]{1,2})?$"),I.min(.01)]],p_precio_venta:["",[I.required,I.pattern("^[0-9]+(.[0-9]{1,2})?$"),I.min(.01)]],p_codigo:["",[I.required,I.pattern("^[0-9]+$"),I.maxLength(13),I.minLength(13)]],p_cantidad_palet:["",[I.required,I.pattern("^[0-9]+$")]],p_activo:[""],receiveInfo:[!0]}),this.regimenUpdate&&(console.log("regimen editar:"+this.regimenUpdate),this.productoParaEditar&&this.formCreateProducto.patchValue({p_nombre:this.productoParaEditar.p_nombre,p_descripcion:this.productoParaEditar.p_descripcion,p_ancho:this.productoParaEditar.p_ancho,p_longitud:this.productoParaEditar.p_longitud,p_altura:this.productoParaEditar.p_altura,p_peso:this.productoParaEditar.p_peso,p_categoria:this.productoParaEditar.p_categoria-1,p_foto:this.productoParaEditar.p_foto,p_precio_compra:this.productoParaEditar.p_precio_compra,p_precio_venta:this.productoParaEditar.p_precio_venta,p_activo:this.productoParaEditar.p_activo,p_codigo:this.productoParaEditar.p_codigo,p_cantidad_palet:this.productoParaEditar.p_cantidad_palet}))}sendDatos(){if(this.formCreateProducto.valid)if(this.regimenUpdate&&this.productoParaEditar){let e={p_nombre:this.formCreateProducto.value.p_nombre,p_descripcion:this.formCreateProducto.value.p_descripcion,p_categoria:+this.formCreateProducto.value.p_categoria+1,p_altura:this.formCreateProducto.value.p_altura,p_ancho:this.formCreateProducto.value.p_ancho,p_longitud:this.formCreateProducto.value.p_longitud,p_peso:this.formCreateProducto.value.p_peso,p_precio_venta:this.formCreateProducto.value.p_precio_venta,p_precio_compra:this.formCreateProducto.value.p_precio_compra,p_codigo:this.formCreateProducto.value.p_codigo,p_cantidad_entrega:this.productoParaEditar.p_cantidad_entrega,p_cantidad_enviado:this.productoParaEditar.p_cantidad_enviado,p_cantidad_reservado:this.productoParaEditar.p_cantidad_reservado,p_cantidad_almacen:this.productoParaEditar.p_cantidad_almacen,p_activo:this.formCreateProducto.value.p_activo,p_cantidad_palet:this.formCreateProducto.value.p_cantidad_palet,p_peso_palet:this.formCreateProducto.value.p_cantidad_palet*this.formCreateProducto.value.p_peso/1e3,p_foto:this.p_foto};this.productoParaEditar&&this.productoParaEditar.product_id&&(this.productosService.actualizarProducto(this.productoParaEditar.product_id,e).subscribe(i=>this.volverMostrar.emit(!0)),console.log("editado: "+e))}else{let e={p_nombre:this.formCreateProducto.value.p_nombre,p_descripcion:this.formCreateProducto.value.p_descripcion,p_categoria:+this.formCreateProducto.value.p_categoria+1,p_altura:this.formCreateProducto.value.p_altura,p_ancho:this.formCreateProducto.value.p_ancho,p_longitud:this.formCreateProducto.value.p_longitud,p_peso:this.formCreateProducto.value.p_peso,p_precio_venta:this.formCreateProducto.value.p_precio_venta,p_precio_compra:this.formCreateProducto.value.p_precio_compra,p_codigo:this.formCreateProducto.value.p_codigo,p_cantidad_entrega:0,p_cantidad_enviado:0,p_cantidad_reservado:0,p_cantidad_almacen:0,p_activo:this.formCreateProducto.value.p_activo,p_cantidad_palet:this.formCreateProducto.value.p_cantidad_palet,p_peso_palet:this.formCreateProducto.value.p_cantidad_palet*this.formCreateProducto.value.p_peso/1e3,p_foto:this.p_foto};this.productosService.createProducto(e).subscribe(i=>this.volverMostrar.emit(!0)),console.log("grabado: "+e)}else console.log("form no es validate"),this.formCreateProducto.markAllAsTouched()}onFileSelected(e){let i=e.target.files[0];if(i){let t=new FileReader;t.readAsDataURL(i),t.onload=()=>{let r=t.result;this.p_foto=r}}}updateDatos(){}volverMostrarProductos(){this.volverMostrar.emit(!1)}static \u0275fac=function(i){return new(i||n)(h(He),h(xe),h(Be))};static \u0275cmp=E({type:n,selectors:[["app-crear-producto"]],inputs:{productoParaEditar:"productoParaEditar",regimenUpdate:"regimenUpdate"},outputs:{volverMostrar:"volverMostrar"},standalone:!0,features:[M],decls:97,vars:68,consts:[[1,"wrapper"],[3,"ngSubmit","formGroup"],[1,"row","mt-3","mb-5"],["class","col-12 col-sm-7 col-md-7 col-lg-8",4,"ngIf"],[1,"col-12","col-sm-5","col-md-5","col-lg-4","d-flex","justify-content-between"],["class","mt-2",4,"ngIf"],[1,"ms-5","mt-2"],[1,"btn","btn-info","btn-AW",3,"click"],[1,"row"],[1,"col-12","col-sm-6","col-md-4","desctop-color","pb-2"],["for","nombre",1,"form-label-AW"],["type","text","formControlName","p_nombre","placeholder","Nombre...",1,"form-control","col-md-6",3,"ngClass"],["class","invalid-feedback col-md-4 ps-3",4,"ngIf"],["for","p_categoria",1,"form-label-AW"],["formControlName","p_categoria",1,"form-control","col-md-6",3,"ngClass"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-12","col-sm-12","col-md-4","pt-4","mobile-color","pb-2"],[1,"form-check","form-check-inline"],["type","checkbox","formControlName","p_activo","id","activeTrue",1,"form-check-input",3,"value"],["for","activeTrue",1,"form-check-label","form-label-AW"],[1,"pb-3","mobile-color-2"],["for","description",1,"form-label-AW"],[1,"d-flex","col-md-12"],["type","text-area","formControlName","p_descripcion","placeholder","Descripcion...",1,"form-control","col-md-6"],[1,"col-6","col-md-3","mobile-color","pb-2"],["for","p_longitud",1,"form-label"],["type","text","formControlName","p_longitud","placeholder","Longitud...",1,"form-control","col-md-6",3,"ngClass"],["class","invalid-feedback col-md-4",4,"ngIf"],["class","invalid-feedback",4,"ngIf"],["for","p_altura",1,"form-label"],["type","text","formControlName","p_altura","placeholder","Altura...",1,"form-control","col-md-6",3,"ngClass"],[1,"col-6","col-md-3","desctop-color","pb-2"],["for","p_ancho",1,"form-label"],["type","text","formControlName","p_ancho","placeholder","Anchura...",1,"form-control","col-md-6",3,"ngClass"],["for","p_peso",1,"form-label"],["type","text","formControlName","p_peso","placeholder","Peso...",1,"form-control","col-md-6",3,"ngClass"],[1,"col-6","col-md-3","desctop-color-2","pb-2"],["for","p_precio_compra",1,"form-label"],["type","text","formControlName","p_precio_compra","placeholder","Precio de Compra...",1,"form-control","col-md-6",3,"ngClass"],["type","text","formControlName","p_precio_venta","placeholder","Precio de Venta...",1,"form-control","col-md-6",3,"ngClass"],[1,"col-6","col-md-3","mobile-color-2","pb-2"],["for","p_cantidad_palet",1,"form-label"],["type","text","formControlName","p_cantidad_palet","placeholder","Unidades...",1,"form-control","col-md-6",3,"ngClass"],["type","text","formControlName","p_codigo","placeholder","Codigo...",1,"form-control","col-md-6",3,"ngClass"],[1,"form-group"],[1,"row","mobile-color","p-2"],[1,"col-12","col-sm-6"],["for","name"],["type","file","name","image",1,"form-control",3,"change"],["alt","Preview","class","img-thumbnail col-12 col-sm-6 p-2",3,"src",4,"ngIf"],[1,"col-12","col-sm-7","col-md-7","col-lg-8"],[1,"mt-2"],["type","submit",1,"btn","btn-primary","btn-AW"],[1,"invalid-feedback","col-md-4","ps-3"],[3,"value"],[1,"invalid-feedback","col-md-4"],[1,"invalid-feedback"],["alt","Preview",1,"img-thumbnail","col-12","col-sm-6","p-2",3,"src"]],template:function(i,t){if(i&1&&(o(0,"div",0)(1,"form",1),p("ngSubmit",function(){return t.sendDatos()}),o(2,"div",2),m(3,Yr,2,0,"h1",3)(4,Zr,2,0,"h1",3),o(5,"div",4),m(6,Jr,3,0,"div",5)(7,Xr,3,0,"div",5),o(8,"div",6)(9,"button",7),p("click",function(){return t.volverMostrarProductos()}),s(10,"Volver"),a()()()(),o(11,"div",8)(12,"div",9)(13,"label",10),s(14,"Nombre producto"),a(),o(15,"div"),v(16,"input",11),m(17,Qr,2,0,"div",12),a()(),o(18,"div",9)(19,"label",13),s(20,"Categoria"),a(),o(21,"div")(22,"select",14)(23,"option",15),s(24,"-- Elije una categoria --"),a(),m(25,Kr,2,2,"option",16),a(),m(26,eo,2,0,"div",12),a()(),o(27,"div",17)(28,"div",18),v(29,"input",19),o(30,"label",20),s(31," Producto activo "),a()()()(),o(32,"div",8)(33,"div",21)(34,"label",22),s(35,"Descripcion"),a(),o(36,"div",23),v(37,"input",24),a()()(),o(38,"div",8)(39,"div",25)(40,"label",26),s(41,"Longitud, mm"),a(),v(42,"input",27),m(43,to,2,0,"div",28)(44,io,2,0,"div",29),a(),o(45,"div",25)(46,"label",30),s(47,"Altura, mm"),a(),v(48,"input",31),m(49,no,2,0,"div",28)(50,ro,2,0,"div",29),a(),o(51,"div",32)(52,"label",33),s(53,"Anchura, mm"),a(),v(54,"input",34),m(55,oo,2,0,"div",28)(56,ao,2,0,"div",29),a(),o(57,"div",32)(58,"label",35),s(59,"Peso, gr"),a(),v(60,"input",36),m(61,so,2,0,"div",28)(62,lo,2,0,"div",29),a()(),o(63,"div",8)(64,"div",37)(65,"label",38),s(66,"Precio de Compra, euro"),a(),v(67,"input",39),m(68,co,2,0,"div",28)(69,uo,2,0,"div",29),a(),o(70,"div",37)(71,"label",35),s(72,"Precio de Venta, euro"),a(),v(73,"input",40),m(74,mo,2,0,"div",28)(75,po,2,0,"div",29),a(),o(76,"div",41)(77,"label",42),s(78,"Unidades en palet, ud"),a(),v(79,"input",43),m(80,fo,2,0,"div",28)(81,ho,2,0,"div",29),a(),o(82,"div",41)(83,"label",35),s(84,"C\xF3digo de barras"),a(),v(85,"input",44),m(86,go,2,0,"div",28)(87,_o,2,0,"div",29)(88,vo,2,0,"div",29)(89,Co,2,0,"div",29),a()(),o(90,"div",45)(91,"div",46)(92,"div",47)(93,"label",48),s(94,"Image"),a(),o(95,"input",49),p("change",function(c){return t.onFileSelected(c)}),a()(),m(96,bo,1,1,"img",50),a()()()()),i&2){let r,c,f,b,x,ne,re,Q,B,be,K,Ie,ft,Ae,kt,ht,Ve,Tt,gt,De,Ot,_t,ke,Ut,vt,Te,Nt,Ct,bt,yt;l(),d("formGroup",t.formCreateProducto),l(2),d("ngIf",!t.regimenUpdate),l(),d("ngIf",t.regimenUpdate),l(2),d("ngIf",!t.regimenUpdate),l(),d("ngIf",t.regimenUpdate),l(9),d("ngClass",ee(38,Ee,((r=t.formCreateProducto.get("p_nombre"))==null?null:r.valid)&&((r=t.formCreateProducto.get("p_nombre"))==null?null:r.touched),((r=t.formCreateProducto.get("p_nombre"))==null?null:r.invalid)&&((r=t.formCreateProducto.get("p_nombre"))==null?null:r.touched))),l(),d("ngIf",((c=t.formCreateProducto.get("p_nombre"))==null?null:c.invalid)&&((c=t.formCreateProducto.get("p_nombre"))==null?null:c.touched)),l(5),d("ngClass",ee(41,Ee,((f=t.formCreateProducto.get("p_categoria"))==null?null:f.valid)&&((f=t.formCreateProducto.get("p_categoria"))==null?null:f.touched),((f=t.formCreateProducto.get("p_categoria"))==null?null:f.invalid)&&((f=t.formCreateProducto.get("p_categoria"))==null?null:f.touched))),l(3),d("ngForOf",t.categorias),l(),d("ngIf",((b=t.formCreateProducto.get("p_categoria"))==null?null:b.invalid)&&((b=t.formCreateProducto.get("p_categoria"))==null?null:b.touched)),l(3),d("value",!0),l(13),d("ngClass",ee(44,Ee,((x=t.formCreateProducto.get("p_longitud"))==null?null:x.valid)&&((x=t.formCreateProducto.get("p_longitud"))==null?null:x.touched),((x=t.formCreateProducto.get("p_longitud"))==null?null:x.invalid)&&((x=t.formCreateProducto.get("p_longitud"))==null?null:x.touched))),l(),d("ngIf",((ne=t.formCreateProducto.get("p_longitud"))==null?null:ne.invalid)&&((ne=t.formCreateProducto.get("p_longitud"))==null?null:ne.touched)),l(),d("ngIf",((re=t.formCreateProducto.get("p_longitud"))==null||re.errors==null?null:re.errors.pattern)&&((re=t.formCreateProducto.get("p_longitud"))==null?null:re.touched)),l(4),d("ngClass",ee(47,Ee,((Q=t.formCreateProducto.get("p_longitud"))==null?null:Q.valid)&&((Q=t.formCreateProducto.get("p_longitud"))==null?null:Q.touched),((Q=t.formCreateProducto.get("p_altura"))==null?null:Q.invalid)&&((Q=t.formCreateProducto.get("p_altura"))==null?null:Q.touched))),l(),d("ngIf",((B=t.formCreateProducto.get("p_altura"))==null?null:B.invalid)&&((B=t.formCreateProducto.get("p_altura"))==null?null:B.touched)),l(),d("ngIf",((be=t.formCreateProducto.get("p_altura"))==null||be.errors==null?null:be.errors.pattern)&&((be=t.formCreateProducto.get("p_altura"))==null?null:be.touched)),l(4),d("ngClass",ee(50,Ee,((K=t.formCreateProducto.get("p_ancho"))==null?null:K.valid)&&((K=t.formCreateProducto.get("p_longitud"))==null?null:K.touched),((K=t.formCreateProducto.get("p_ancho"))==null?null:K.invalid)&&((K=t.formCreateProducto.get("p_ancho"))==null?null:K.touched))),l(),d("ngIf",((Ie=t.formCreateProducto.get("p_ancho"))==null?null:Ie.invalid)&&((Ie=t.formCreateProducto.get("p_ancho"))==null?null:Ie.touched)),l(),d("ngIf",((ft=t.formCreateProducto.get("p_ancho"))==null||ft.errors==null?null:ft.errors.pattern)&&((ft=t.formCreateProducto.get("p_ancho"))==null?null:ft.touched)),l(4),d("ngClass",ee(53,Ee,((Ae=t.formCreateProducto.get("p_ancho"))==null?null:Ae.valid)&&((Ae=t.formCreateProducto.get("p_peso"))==null?null:Ae.touched),((Ae=t.formCreateProducto.get("p_peso"))==null?null:Ae.invalid)&&((Ae=t.formCreateProducto.get("p_peso"))==null?null:Ae.touched))),l(),d("ngIf",((kt=t.formCreateProducto.get("p_peso"))==null?null:kt.invalid)&&((kt=t.formCreateProducto.get("p_peso"))==null?null:kt.touched)),l(),d("ngIf",((ht=t.formCreateProducto.get("p_peso"))==null||ht.errors==null?null:ht.errors.pattern)&&((ht=t.formCreateProducto.get("p_peso"))==null?null:ht.touched)),l(5),d("ngClass",ee(56,Ee,((Ve=t.formCreateProducto.get("p_precio_compra"))==null?null:Ve.valid)&&((Ve=t.formCreateProducto.get("p_precio_compra"))==null?null:Ve.touched),((Ve=t.formCreateProducto.get("p_precio_compra"))==null?null:Ve.invalid)&&((Ve=t.formCreateProducto.get("p_precio_compra"))==null?null:Ve.touched))),l(),d("ngIf",((Tt=t.formCreateProducto.get("p_precio_compra"))==null?null:Tt.invalid)&&((Tt=t.formCreateProducto.get("p_precio_compra"))==null?null:Tt.touched)),l(),d("ngIf",((gt=t.formCreateProducto.get("p_precio_compra"))==null||gt.errors==null?null:gt.errors.pattern)&&((gt=t.formCreateProducto.get("p_precio_compra"))==null?null:gt.touched)),l(4),d("ngClass",ee(59,Ee,((De=t.formCreateProducto.get("p_precio_venta"))==null?null:De.valid)&&((De=t.formCreateProducto.get("p_precio_venta"))==null?null:De.touched),((De=t.formCreateProducto.get("p_precio_venta"))==null?null:De.invalid)&&((De=t.formCreateProducto.get("p_precio_venta"))==null?null:De.touched))),l(),d("ngIf",((Ot=t.formCreateProducto.get("p_precio_venta"))==null?null:Ot.invalid)&&((Ot=t.formCreateProducto.get("p_precio_venta"))==null?null:Ot.touched)),l(),d("ngIf",((_t=t.formCreateProducto.get("p_precio_venta"))==null||_t.errors==null?null:_t.errors.pattern)&&((_t=t.formCreateProducto.get("p_precio_venta"))==null?null:_t.touched)),l(4),d("ngClass",ee(62,Ee,((ke=t.formCreateProducto.get("p_cantidad_palet"))==null?null:ke.valid)&&((ke=t.formCreateProducto.get("p_cantidad_palet"))==null?null:ke.touched),((ke=t.formCreateProducto.get("p_cantidad_palet"))==null?null:ke.invalid)&&((ke=t.formCreateProducto.get("p_cantidad_palet"))==null?null:ke.touched))),l(),d("ngIf",((Ut=t.formCreateProducto.get("p_cantidad_palet"))==null?null:Ut.invalid)&&((Ut=t.formCreateProducto.get("p_cantidad_palet"))==null?null:Ut.touched)),l(),d("ngIf",((vt=t.formCreateProducto.get("p_cantidad_palet"))==null||vt.errors==null?null:vt.errors.pattern)&&((vt=t.formCreateProducto.get("p_cantidad_palet"))==null?null:vt.touched)),l(4),d("ngClass",ee(65,Ee,((Te=t.formCreateProducto.get("p_codigo"))==null?null:Te.valid)&&((Te=t.formCreateProducto.get("p_codigo"))==null?null:Te.touched),((Te=t.formCreateProducto.get("p_codigo"))==null?null:Te.invalid)&&((Te=t.formCreateProducto.get("p_codigo"))==null?null:Te.touched))),l(),d("ngIf",((Nt=t.formCreateProducto.get("p_codigo"))==null?null:Nt.invalid)&&((Nt=t.formCreateProducto.get("p_codigo"))==null?null:Nt.touched)),l(),d("ngIf",((Ct=t.formCreateProducto.get("p_codigo"))==null||Ct.errors==null?null:Ct.errors.pattern)&&((Ct=t.formCreateProducto.get("p_codigo"))==null?null:Ct.touched)),l(),d("ngIf",((bt=t.formCreateProducto.get("p_codigo"))==null||bt.errors==null?null:bt.errors.maxlength)&&((bt=t.formCreateProducto.get("p_codigo"))==null?null:bt.touched)),l(),d("ngIf",((yt=t.formCreateProducto.get("p_codigo"))==null||yt.errors==null?null:yt.errors.minlength)&&((yt=t.formCreateProducto.get("p_codigo"))==null?null:yt.touched)),l(7),d("ngIf",t.p_foto)}},dependencies:[U,X,ge,_e,k,Ui,de,O,J,Ge,We,Qe,P,zt,H,w],styles:[".btn-AW[_ngcontent-%COMP%]{font-size:12px;font-weight:600;text-transform:uppercase;transition:box-shadow .28s cubic-bezier(.4,0,.2,1);-webkit-border-radius:2px;-moz-border-radius:2px;-ms-border-radius:2px;-o-border-radius:2px;border-radius:2px;overflow:hidden;position:relative;-webkit-user-select:none;user-select:none;padding:8px 14px 7px}.btn-AW[_ngcontent-%COMP%]:hover{box-shadow:0 3px 6px #0003,0 3px 6px #00000042}.btn-AW[_ngcontent-%COMP%]{outline:0!important}.btn-AW[_ngcontent-%COMP%]:hover{transition:all .3s}label[_ngcontent-%COMP%]{font-weight:600}.desctop-color[_ngcontent-%COMP%], .mobile-color[_ngcontent-%COMP%]{background-color:#c5d7f2}.desctop-color-2[_ngcontent-%COMP%], .mobile-color-2[_ngcontent-%COMP%]{background-color:#cfe2ff}@media screen and (max-width: 766px){.mobile-color[_ngcontent-%COMP%]{background-color:#cfe2ff}.mobile-color-2[_ngcontent-%COMP%]{background-color:#c5d7f2}}"]})};function yo(n,e){if(n&1&&(o(0,"li",10)(1,"a",15),s(2,"Usuarios"),a()()),n&2){let i=u(2);oe("active",i.isActive("/usuarios"))}}function So(n,e){if(n&1&&(o(0,"li",10)(1,"a",16),s(2,"Almacen"),a()()),n&2){let i=u(2);oe("active",i.isActive("/almacen"))}}function xo(n,e){if(n&1){let i=y();o(0,"div",7)(1,"ul",8),m(2,yo,3,2,"li",9),o(3,"li",10)(4,"a",11),s(5,"Productos"),a()(),o(6,"li",10)(7,"a",12),s(8,"Facturas"),a()(),m(9,So,3,2,"li",9),o(10,"li",10)(11,"a",13),s(12,"An\xE1lisis"),a()(),o(13,"li",10)(14,"a",14),p("click",function(){g(i);let r=u();return _(r.logout())}),s(15,"Log Out"),a()()()()}if(n&2){let i=u();l(2),d("ngIf",i.role==="admin"),l(),oe("active",i.isActive("/productos")),l(3),oe("active",i.isActive("/facturas")),l(3),d("ngIf",i.role!=="vendedor"&&i.role!=="cliente"),l(),oe("active",i.isActive("/estadistica"))}}var me=class n{constructor(e,i){this.authService=e;this.router=i}role=localStorage.getItem("role");isMenuVisible=!1;menuVisible(){this.isMenuVisible=!this.isMenuVisible}isActive(e){return this.router.url===e}logout(){this.authService.logout()}ngOnInit(){}static \u0275fac=function(i){return new(i||n)(h(T),h(he))};static \u0275cmp=E({type:n,selectors:[["app-menu-mobile"]],standalone:!0,features:[M],decls:8,vars:1,consts:[[1,"desktop-menu-mobile"],[1,"navbar","navbar-expand-custom","navbar-mainbg"],["href","#",1,"navbar-brand","navbar-logo","ms-3"],["src","https://omnigena.info/img/logo/1a_logotype-mini.png",1,"AW-logo-micro","m-auto"],["id","mobile-menu-btn","type","button",1,"hamburger","me-5",3,"click"],[1,"btn__hamb"],["class","menuList",4,"ngIf"],[1,"menuList"],[1,"navbar-nav","ml-auto"],["class","nav-item",3,"active",4,"ngIf"],[1,"nav-item"],["id","desktop-menu-admin","href","/productos",1,"cta"],["id","desktop-menu-admin","href","/facturas",1,"cta"],["id","desktop-menu-admin","href","/estadistica",1,"cta"],["id","desktop-menu-admin",1,"cta",3,"click"],["id","desktop-menu-admin","href","/usuarios",1,"cta"],["id","desktop-menu-admin","href","/almacen",1,"cta"]],template:function(i,t){i&1&&(o(0,"div",0)(1,"nav",1)(2,"a",2),v(3,"img",3),a(),o(4,"button",4),p("click",function(){return t.menuVisible()}),o(5,"div",5),v(6,"div"),a()()(),m(7,xo,16,8,"div",6),a()),i&2&&(l(7),d("ngIf",t.isMenuVisible))},dependencies:[P,w],styles:['body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif}*[_ngcontent-%COMP%]{margin:0;padding:0}.AW-logo-micro[_ngcontent-%COMP%]{width:50px}.navbar-mainbg[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#0f0c29,#302b63,#24243e);padding:10px}.hamburger[_ngcontent-%COMP%]{position:relative;display:inline-block;vertical-align:middle;cursor:pointer;width:40px;height:40px;border:1px solid #ffffff;background:#fff0;padding:5px;border-radius:8px}.btn__hamb[_ngcontent-%COMP%]{position:relative;display:block;width:100%;height:4px;background:#fff;cursor:pointer}.btn__hamb[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{width:100%;height:100%}.btn__hamb[_ngcontent-%COMP%]:before, .btn__hamb[_ngcontent-%COMP%]:after{content:"";width:100%;height:100%;position:absolute;left:0;background:#fff}.btn__hamb[_ngcontent-%COMP%]:before{top:-8px}.btn__hamb[_ngcontent-%COMP%]:after{top:8px}.cta[_ngcontent-%COMP%]{display:flex;width:100%;padding:0 20px;text-decoration:none;font-family:Jost,sans-serif;font-size:33px;color:#fff;transition:1s;justify-content:space-between}.active[_ngcontent-%COMP%]{color:#fff;background:linear-gradient(to bottom,#3f31a5,#635acc,#3f31a5);transition:1s;justify-content:space-between}.menuList[_ngcontent-%COMP%]{position:absolute;background:linear-gradient(to bottom,#0f0c29,#302b63,#24243e);top:70px;width:100%;padding:20px;z-index:10}']})};function Eo(n,e){if(n&1&&(o(0,"option",20),s(1),a()),n&2){let i=e.$implicit;d("value",i.id_categoria),l(),C(i.c_nombre)}}function Mo(n,e){n&1&&(o(0,"td",28),s(1," Activo"),a())}function Io(n,e){n&1&&(o(0,"td",29),s(1," Inactivo"),a())}function wo(n,e){if(n&1){let i=y();o(0,"tr")(1,"td",25),p("click",function(){let r,c=g(i).$implicit,f=u(3);return _(f.mostrarProducto((r=c.product_id)!==null&&r!==void 0?r:1))}),s(2),a(),o(3,"td"),s(4),a(),o(5,"td"),s(6),a(),o(7,"td"),s(8),a(),m(9,Mo,2,0,"td",26)(10,Io,2,0,"td",27),a()}if(n&2){let i=e.$implicit;l(2),C(i.p_nombre),l(2),C(i.p_nombre_categoria),l(2),C(i.p_cantidad_almacen),l(2),C(i.p_precio_venta),l(),d("ngIf",i.p_activo),l(),d("ngIf",!i.p_activo)}}function Po(n,e){if(n&1&&(o(0,"div",21)(1,"table",22)(2,"thead")(3,"tr")(4,"th"),s(5),a(),o(6,"th"),s(7),a(),o(8,"th"),s(9),a(),o(10,"th"),s(11),a(),o(12,"th"),s(13),a()()(),o(14,"tbody",23),m(15,wo,11,6,"tr",24),a()()()),n&2){let i=u(2);l(5),C(i.headers.nombre),l(2),C(i.headers.categoria),l(2),C(i.headers.cantidad),l(2),C(i.headers.precio),l(2),C(i.headers.activo),l(2),d("ngForOf",i.productosPaginated)}}function Fo(n,e){if(n&1){let i=y();o(0,"button",30),p("click",function(){g(i);let r=u(2);return _(r.crearNuevoProducto())}),s(1,"Crear nuevo Producto"),a()}}function Ao(n,e){if(n&1){let i=y();o(0,"div")(1,"form",6)(2,"div",7)(3,"label",8),s(4," Filtro "),a(),o(5,"div",9)(6,"input",10),W("ngModelChange",function(r){g(i);let c=u();return j(c.filterSearch,r)||(c.filterSearch=r),_(r)}),p("input",function(){g(i);let r=u();return _(r.applyFilter())}),a()(),o(7,"label",8),s(8," Categoria "),a(),o(9,"div",11)(10,"select",12),W("ngModelChange",function(r){g(i);let c=u();return j(c.categoriaSearch,r)||(c.categoriaSearch=r),_(r)}),p("ngModelChange",function(){g(i);let r=u();return _(r.applyFilter())}),o(11,"option",13),s(12,"Seleccione una categoria"),a(),m(13,Eo,2,2,"option",14),a()()()(),m(14,Po,16,6,"div",15),o(15,"div",16)(16,"button",17),p("click",function(){g(i);let r=u();return _(r.prevPage())}),s(17,"Anterior"),a(),o(18,"span",18),s(19),a(),o(20,"button",17),p("click",function(){g(i);let r=u();return _(r.nextPage())}),s(21,"Siguiente"),a()(),o(22,"div"),m(23,Fo,2,0,"button",19),a()()}if(n&2){let i=u();l(6),L("ngModel",i.filterSearch),l(4),L("ngModel",i.categoriaSearch),l(3),d("ngForOf",i.categorias),l(),d("ngIf",i.productos&&i.productos.length),l(2),d("disabled",i.currentPage===1),l(3),it("Pagina ",i.currentPage," de ",i.totalPages,""),l(),d("disabled",i.currentPage===i.totalPages),l(3),d("ngIf",i.role==="admin"||i.role==="manager")}}function Vo(n,e){if(n&1){let i=y();o(0,"div")(1,"app-crear-producto",31),p("volverMostrar",function(r){g(i);let c=u();return _(c.volverMostrarProducto(r))}),a()()}if(n&2){let i=u();l(),d("regimenUpdate",i.regimenUpdate)("productoParaEditar",i.productoMostrar)}}function Do(n,e){if(n&1){let i=y();o(0,"div")(1,"app-show-product",32),p("volverMostrar",function(r){g(i);let c=u();return _(c.volverMostrarProducto(r))})("encenderRegimenEditar",function(r){g(i);let c=u();return _(c.encenderRegimenEditar(r))}),a()()}if(n&2){let i=u();l(),d("productoMostrar",i.productoMostrar)}}var di=class n{constructor(e,i,t){this.productosService=e;this.categoriasService=i;this.sanitizer=t}headers={nombre:"Nombre",categoria:"Categoria",cantidad:"Cantidad en almacen",precio:"Precio venta",activo:"Activo"};role=localStorage.getItem("role");productos=[];categorias=[];ngOnInit(){this.obtenerListaProductos()}mostrarProductoId=0;productoMostrar=this.productos[this.mostrarProductoId];regimenMostrar=!1;regimenCrear=!1;regimenUpdate=!1;mostrarProducto(e){let i=this.productos.find(t=>t.product_id==e);i?this.productoMostrar=i:console.log("Error: no hay producto con este id: ",e),this.regimenUpdate=!1,this.regimenMostrar=!0}volverMostrarProducto(e){this.regimenMostrar=!1,this.regimenCrear=!1,this.regimenUpdate=!1,console.log(this.regimenMostrar),e&&this.obtenerListaProductos()}obtenerListaProductos(){this.productosService.getProductos().subscribe(e=>{this.productos=e,this.applyFilter()},e=>{console.log("Error data de producto",e)}),this.categoriasService.getCategorias().subscribe(e=>{this.categorias=e},e=>{console.log("Error data de categorias",e)})}crearNuevoProducto(){this.regimenCrear=!0}encenderRegimenEditar(e){console.log("flag"),e&&(this.regimenUpdate=!0,this.regimenMostrar=!1,this.regimenCrear=!1)}itemsPerPage=8;currentPage=1;totalPages=1;productosFiltrated=[];productosPaginated=[];filterSearch="";categoriaSearch=0;applyFilter(){if(console.log("filtr",this.filterSearch,this.categoriaSearch),this.filterSearch||this.categoriaSearch>-1){console.log(this.filterSearch,this.categoriaSearch);let e=this.productos.filter(i=>i.p_nombre.toLocaleLowerCase().includes(this.filterSearch.toLocaleLowerCase()));+this.categoriaSearch>0&&(console.log("rrr"),e=e.filter(i=>i.p_categoria==this.categoriaSearch)),this.productosFiltrated=e,console.log(e)}else this.productosFiltrated=[...this.productos];this.totalPages=Math.ceil(this.productosFiltrated.length/this.itemsPerPage),this.currentPage=1,this.productosPaginated=this.getPaginatedData()}getPaginatedData(){let e=(this.currentPage-1)*this.itemsPerPage,i=e+this.itemsPerPage;return this.productosFiltrated.slice(e,i)}prevPage(){this.currentPage>1&&(this.currentPage--,this.productosPaginated=this.getPaginatedData())}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.productosPaginated=this.getPaginatedData())}arrayBufferToBase64(e){let i="",t=new Uint8Array(e),r=t.byteLength;for(let c=0;c<r;c++)i+=String.fromCharCode(t[c]);return window.btoa(i)}detectImageFormat(e){let i=new Uint8Array(e);return i[0]===255&&i[1]===216&&i[2]===255?"image/jpeg":i[0]===137&&i[1]===80&&i[2]===78&&i[3]===71?"image/png":"image/jpeg"}static \u0275fac=function(i){return new(i||n)(h(xe),h(Be),h(rt))};static \u0275cmp=E({type:n,selectors:[["app-conteiner"]],standalone:!0,features:[M],decls:10,vars:3,consts:[[1,"mobile-menu"],[1,"d-flex"],[1,"sidebar"],[1,"info-container"],[1,"card-block"],[4,"ngIf"],[1,"form","mt-3","mb-3"],[1,"form-group","row"],["for","filterDesc",1,"col-form-label","col-sm-2","text-sm-right"],[1,"col-sm-3"],["type","text","name","filterDesc","id","filterDesc","placeholder","filtramos por...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"col-sm-3","mt-2"],["name","categoriaSearch","id","categoriaSearch",3,"ngModelChange","ngModel"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["class","table-responsive",4,"ngIf"],[1,"pagination-controls","mb-2"],[3,"click","disabled"],[1,"ms-3","me-3"],["class","btn btn-success btn-AW",3,"click",4,"ngIf"],[3,"value"],[1,"table-responsive"],[1,"table","table-striped","table-primary","table-bordered"],[1,"table-group-divider"],[4,"ngFor","ngForOf"],[3,"click"],["style","color:green",4,"ngIf"],["style","color:red",4,"ngIf"],[2,"color","green"],[2,"color","red"],[1,"btn","btn-success","btn-AW",3,"click"],[3,"volverMostrar","regimenUpdate","productoParaEditar"],[3,"volverMostrar","encenderRegimenEditar","productoMostrar"]],template:function(i,t){i&1&&(q(0),v(1,"app-menu-mobile",0),Y(),o(2,"div",1)(3,"div",2),v(4,"app-menu"),a(),o(5,"div",3)(6,"div",4),m(7,Ao,24,9,"div",5)(8,Vo,2,2,"div",5)(9,Do,2,1,"div",5),a()()()),i&2&&(l(7),d("ngIf",!t.regimenMostrar&&!t.regimenCrear&&!t.regimenUpdate),l(),d("ngIf",t.regimenCrear||t.regimenUpdate),l(),d("ngIf",t.regimenMostrar))},dependencies:[P,H,w,U,X,ge,_e,k,de,O,J,G,fe,me,li,ue,ci]})};var mt=class n{constructor(e,i){this.http=e;this.authService=i}facturaUrl="http://localhost:8080/api/facturas";getFacturas(){let e=this.getHeaderAuth();return this.authService.checkTokenExpiration()?this.http.get(this.facturaUrl,{headers:e}).pipe($(i=>i)):D}deleteFactura(e){let i=this.getHeaderAuth(),t=`http://localhost:8080/api/facturas/${e}`;return this.http.delete(t,{headers:i})}getHeaderAuth(){let e=this.authService.getToken();return new ce({Authorization:`Bearer ${e}`})}static \u0275fac=function(i){return new(i||n)(A(te),A(T))};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})};var Me=class n{constructor(e,i){this.http=e;this.authService=i}mercanciaUrl="http://localhost:8080/api/mercancias";getMercancias(e){let i=this.getHeaderAuth();if(this.authService.checkTokenExpiration()){let t=`http://localhost:8080/api/mercancias/${e}`;return this.http.get(t,{headers:i}).pipe($(r=>r))}else return D}getMercanciasConLugares(e){let i=this.getHeaderAuth();if(this.authService.checkTokenExpiration()){let t=`http://localhost:8080/api/mercancias/showWidthPlace/${e}`;return this.http.get(t,{headers:i}).pipe($(r=>r))}else return D}deleteMercancia(e){let i=`http://localhost:8080/api/mercancias/${e}`;return this.http.delete(i)}getHeaderAuth(){let e=this.authService.getToken();return new ce({Authorization:`Bearer ${e}`})}createMercancia(e,i,t,r){let c=this.getHeaderAuth(),f={mercancias:e,f_suma:i,role:t,usuario:r};return this.authService.checkTokenExpiration()?this.http.post("http://localhost:8080/api/mercancias",f,{headers:c}).pipe($(x=>x)):D}actualizarFactura(e,i,t,r){let c=this.getHeaderAuth(),f={mercancias:i,f_suma:t,usuario:r},b=`${this.mercanciaUrl}/${e}`;return this.authService.checkTokenExpiration()?(console.log("update"),this.http.put(b,f,{headers:c})):(console.log("no update"),D)}aceptarFactura(e,i,t,r,c){let f=this.getHeaderAuth(),b={mercancias:i,f_suma:t,usuario:r,aceptarFactura:c},x=`${this.mercanciaUrl}/aceptar/${e}`;return this.authService.checkTokenExpiration()?(console.log("update"),this.http.post(x,b,{headers:f})):(console.log("no update"),D)}aceptarFacturaColocarMercancias(e,i,t,r,c){let f=this.getHeaderAuth(),b={mercancias:i,f_suma:t,usuario:r,aceptarFactura:c},x=`${this.mercanciaUrl}/aceptarycolocar/${e}`;return this.authService.checkTokenExpiration()?(console.log("update"),this.http.post(x,b,{headers:f})):(console.log("no update"),D)}static \u0275fac=function(i){return new(i||n)(A(te),A(T))};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})};function ko(n,e){if(n&1){let i=y();o(0,"div",9)(1,"button",10),p("click",function(){g(i);let r=u();return _(r.editarFactura())}),s(2,"Editar"),a()()}}function To(n,e){if(n&1){let i=y();o(0,"div",11)(1,"button",12),p("click",function(){g(i);let r=u();return _(r.popupInterruptor())}),s(2,"Borrar"),a()()}}function Oo(n,e){n&1&&(o(0,"td",21),s(1,"No"),a())}function Uo(n,e){n&1&&(o(0,"td",22),s(1,"Si"),a())}function No(n,e){if(n&1&&(o(0,"tr")(1,"td"),s(2),a(),o(3,"td"),s(4),a(),o(5,"td"),s(6),a(),o(7,"td"),s(8),a(),o(9,"td"),s(10),a(),m(11,Oo,2,0,"td",20)(12,Uo,2,0,"td",19),a()),n&2){let i=e.$implicit;l(2),S(" ",i.m_nombre_producto,""),l(2),C(i.m_cantidad_pedida),l(2),C(i.m_suma_pedida),l(2),C(i.m_cantidad_recogida),l(2),C(i.m_suma_recogida),l(),d("ngIf",!i.m_aceptado),l(),d("ngIf",i.m_aceptado)}}function Ro(n,e){if(n&1&&(o(0,"td"),s(1),a()),n&2){let i=u(2);l(),C(i.facturaMostrar.f_suma)}}function Lo(n,e){if(n&1&&(o(0,"td"),s(1),a()),n&2){let i=u(2);l(),C(i.facturaMostrar.f_suma_tramitacion)}}function jo(n,e){n&1&&(o(0,"td",22),s(1," Si"),a())}function Wo(n,e){n&1&&(o(0,"td",21),s(1," No"),a())}function Ho(n,e){if(n&1&&(o(0,"div",13)(1,"table",14)(2,"thead")(3,"tr")(4,"th"),s(5,"Producto"),a(),o(6,"th"),s(7,"Cantidad pedida"),a(),o(8,"th"),s(9,"Suma pedida"),a(),o(10,"th"),s(11,"Cantidad recogida"),a(),o(12,"th"),s(13,"Suma recogida"),a(),o(14,"th"),s(15,"Aceptado"),a()()(),o(16,"tbody",15),m(17,No,13,7,"tr",16),o(18,"tr",17)(19,"td"),s(20,"TOTAL"),a(),v(21,"td"),m(22,Ro,2,1,"td",18),v(23,"td"),m(24,Lo,2,1,"td",18)(25,jo,2,0,"td",19)(26,Wo,2,0,"td",20),a()()()()),n&2){let i=u();l(17),d("ngForOf",i.mercancias),l(5),d("ngIf",i.facturaMostrar),l(2),d("ngIf",i.facturaMostrar),l(),d("ngIf",i.facturaMostrar&&i.facturaMostrar.f_aceptado==!0),l(),d("ngIf",i.facturaMostrar&&i.facturaMostrar.f_aceptado==!1)}}function Go(n,e){if(n&1&&(o(0,"p"),s(1),a()),n&2){let i=u(2);l(),S("Desea eliminar la factura #",i.mostrarFacturaId,"?")}}function Bo(n,e){n&1&&(o(0,"p"),s(1,"Factura ya esta acceptada,"),a())}function $o(n,e){n&1&&(o(0,"p"),s(1,"no se puede eliminar"),a())}function zo(n,e){if(n&1){let i=y();o(0,"button",27),p("click",function(){g(i);let r=u(2);return _(r.mostrarFacturaId?r.borrarFactura(r.mostrarFacturaId):null)}),s(1,"Borrar"),a()}}function qo(n,e){if(n&1){let i=y();o(0,"div",23),m(1,Go,2,1,"p",18)(2,Bo,2,0,"p",18)(3,$o,2,0,"p",18),o(4,"div",24),m(5,zo,2,0,"button",25),o(6,"button",26),p("click",function(){g(i);let r=u();return _(r.popupInterruptor())}),s(7,"Cerrar "),a()()()}if(n&2){let i=u();l(),d("ngIf",i.facturaMostrar&&!i.facturaMostrar.f_aceptado),l(),d("ngIf",i.facturaMostrar&&i.facturaMostrar.f_aceptado),l(),d("ngIf",i.facturaMostrar&&i.facturaMostrar.f_aceptado),l(2),d("ngIf",i.facturaMostrar&&!i.facturaMostrar.f_aceptado)}}var mi=class n{constructor(e,i){this.facturasService=e;this.mercanciaService=i}mostrarFacturaId=-1;facturaMostrar=null;volverMostrar=new V;encenderRegimenEditar=new V;mercancias=[];isPopupAcceptVisible=!1;ngOnInit(){this.mostrarFacturaId>0?this.mercanciaService.getMercancias(this.mostrarFacturaId).subscribe(e=>{this.mercancias=e,console.log(e)},e=>{console.log("Error data de producto",e)}):console.log("Numero de factura es incorrecto")}role=localStorage.getItem("role");editarFactura(){console.log("editar"),this.encenderRegimenEditar.emit(!0)}volverMostrarFactura(){this.volverMostrar.emit(!1)}popupInterruptor(){this.isPopupAcceptVisible=!this.isPopupAcceptVisible}borrarFactura(e){e?this.facturasService.deleteFactura(e).subscribe(()=>{console.log(`Usuario with  id ${e} deleted successfully.`),this.volverMostrar.emit(!0)},i=>{console.error(`Error deleting evento with id ${e}: ${i}`)}):console.error(`Evento with title ${e} has not found.`)}static \u0275fac=function(i){return new(i||n)(h(mt),h(Me))};static \u0275cmp=E({type:n,selectors:[["app-show-factura"]],inputs:{mostrarFacturaId:"mostrarFacturaId",facturaMostrar:"facturaMostrar"},outputs:{volverMostrar:"volverMostrar",encenderRegimenEditar:"encenderRegimenEditar"},standalone:!0,features:[M],decls:11,vars:5,consts:[[1,"row","mt-2","mb-2","justify-content-between"],[1,"col-12","col-md-6"],[1,"col-12","col-md-6","d-flex","justify-content-between"],["class","mt-2",4,"ngIf"],["class","ms-1 mt-2",4,"ngIf"],[1,"ms-3","mt-2"],[1,"btn","btn-info","btn-AW",3,"click"],["class","table-responsive",4,"ngIf"],["class","popup2",4,"ngIf"],[1,"mt-2"],[1,"btn","btn-warning","btn-AW",3,"click"],[1,"ms-1","mt-2"],[1,"btn","btn-danger","btn-AW",3,"click"],[1,"table-responsive"],[1,"table","table-striped","table-primary","table-bordered"],[1,"table-group-divider"],[4,"ngFor","ngForOf"],[1,"fw-bold"],[4,"ngIf"],["style","color:green",4,"ngIf"],["style","color:red",4,"ngIf"],[2,"color","red"],[2,"color","green"],[1,"popup2"],[1,"d-flex","buttons","justify-content-around"],["class","btn btn-AW btn-danger m-auto",3,"click",4,"ngIf"],[1,"btn","btn-AW","btn-dark","m-auto",3,"click"],[1,"btn","btn-AW","btn-danger","m-auto",3,"click"]],template:function(i,t){i&1&&(o(0,"div",0)(1,"h1",1),s(2),a(),o(3,"div",2),m(4,ko,3,0,"div",3)(5,To,3,0,"div",4),o(6,"div",5)(7,"button",6),p("click",function(){return t.volverMostrarFactura()}),s(8,"Volver"),a()()()(),m(9,Ho,27,5,"div",7)(10,qo,8,4,"div",8)),i&2&&(l(2),S(" Detalles de Factura #",t.mostrarFacturaId,""),l(2),d("ngIf",t.role==="admin"||t.role==="manager"||t.role==="vendedor"||t.role==="cliente"),l(),d("ngIf",t.role==="admin"||t.role==="manager"||t.role==="vendedor"||t.role==="cliente"),l(4),d("ngIf",t.mercancias&&t.mercancias.length),l(),d("ngIf",t.isPopupAcceptVisible))},dependencies:[P,H,w],styles:["@media screen and (max-width: 767px){table[_ngcontent-%COMP%]{font-size:3vw}}"]})};var pi=class n{transform(e){let i=e.toString();return i=i.replace(/^0+/,""),parseFloat(i).toFixed(2)}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=Wt({name:"removeZeroAndForma",type:n,pure:!0,standalone:!0})};function Yo(n,e){n&1&&(o(0,"div",12)(1,"p"),s(2,"La cantidad no puede"),a(),o(3,"p"),s(4,"ser mayor que el resto."),a()())}function Zo(n,e){if(n&1&&(o(0,"td"),s(1),a()),n&2){let i=u().$implicit;l(),C(i.m_precio_venta)}}function Jo(n,e){if(n&1&&(o(0,"td"),s(1),a()),n&2){let i=u().$implicit;l(),C(i.m_precio_compra)}}function Xo(n,e){if(n&1){let i=y();o(0,"tr")(1,"td"),s(2),a(),o(3,"td")(4,"div",7)(5,"input",8),W("ngModelChange",function(r){let c=g(i).$implicit;return j(c.m_cantidad_pedida,r)||(c.m_cantidad_pedida=r),_(r)}),p("blur",function(){let r=g(i).$implicit,c=u();return _(c.updateQuantity(r.m_id_productos,r.m_cantidad_pedida))}),a(),m(6,Yo,5,0,"div",9),a()(),m(7,Zo,2,1,"td",10)(8,Jo,2,1,"td",10),o(9,"td"),s(10),a(),o(11,"td")(12,"button",11),s(13,"Borrar"),a()()()}if(n&2){let i=e.$implicit,t=u();l(2),S(" ",i.m_nombre_producto," "),l(3),L("ngModel",i.m_cantidad_pedida),l(),d("ngIf",t.role=="cliente"&&i.m_cantidad_maximum&&i.m_cantidad_pedida>i.m_cantidad_maximum),l(),d("ngIf",t.role=="cliente"),l(),d("ngIf",t.role=="vendedor"||t.role=="manager"||t.role=="admin"),l(2),S(" ",i.m_suma_pedida," "),l(2),Gt("id",i.m_id_productos)}}var fi=class n{constructor(e,i){this.elRef=e;this.mercanciaService=i}mercancias=[];mercanciasRenovar=new V;regimenUpdate=!1;volverMostrar=new V;updateFacturaId=0;mercanciasEnPedido=this.mercancias;buttonsInitialized=!1;sumaFactura=0;ngOnInit(){}ngOnChanges(e){e.mercancias&&(this.mercanciasEnPedido=[...this.mercancias],this.buttonsInitialized=!1,this.sumarFactura(),console.log(this.getSumaFactura()))}initButtons(){this.elRef.nativeElement.querySelectorAll(".borrar").forEach(i=>{i.addEventListener("click",t=>{let r=Number(t.target.id),c=this.mercancias.findIndex(f=>f.m_id_productos===r);console.log("borrar"),c!==-1&&(this.mercancias.splice(c,1),this.buttonsInitialized=!1)})})}ngAfterViewChecked(){!this.buttonsInitialized&&this.mercanciasEnPedido.length>0&&(this.initButtons(),this.buttonsInitialized=!0)}mercanciasCambiarDatos(){this.mercanciasRenovar.emit(this.mercancias)}updateQuantity(e,i){if(i>=0){let t=this.mercancias.findIndex(c=>c.m_id_productos===e);this.mercancias[t].m_cantidad_maximum&&this.role=="cliente"&&i>this.mercancias[t].m_cantidad_maximum&&(i=this.mercancias[t].m_cantidad_maximum),this.mercancias[t].m_cantidad_pedida=i,console.log("cantidad:",i);let r=0;if(this.role=="cliente"?r=this.mercancias[t].m_precio_venta??0:r=this.mercancias[t].m_precio_compra??0,r){let c=i*r;this.mercancias[t].m_suma_pedida=c,this.sumarFactura()}}}sumarFactura(){this.sumaFactura=this.mercancias.reduce((i,t)=>i+parseFloat(String(t.m_suma_pedida)),0),console.log("sumar",this.sumaFactura)}getSumaFactura(){return console.log("get",this.sumaFactura),this.sumaFactura}setSumaFactura(e){this.sumaFactura=e}role=localStorage.getItem("role");usuario=localStorage.getItem("usuario");sendDatos(){if(console.log("send"),!this.regimenUpdate&&this.role&&this.usuario){let e=+this.usuario;this.mercanciaService.createMercancia(this.mercancias,this.sumaFactura,this.role,e).subscribe(i=>this.volverMostrar.emit(!0)),console.log("grabado: ")}else if(this.mercancias&&this.updateFacturaId&&this.usuario){let e=+this.usuario;this.mercanciaService.actualizarFactura(this.updateFacturaId,this.mercancias,this.sumaFactura,e).subscribe(i=>this.volverMostrar.emit(!0)),console.log("editado: ")}}volverMostrarFacturas(){this.volverMostrar.emit(!0),console.log("back!")}static \u0275fac=function(i){return new(i||n)(h(Se),h(Me))};static \u0275cmp=E({type:n,selectors:[["app-crear-factura-new"]],inputs:{mercancias:"mercancias",regimenUpdate:"regimenUpdate",updateFacturaId:"updateFacturaId"},outputs:{mercanciasRenovar:"mercanciasRenovar",volverMostrar:"volverMostrar"},standalone:!0,features:[Ye,M],decls:24,vars:4,consts:[[1,"d-flex","justify-content-between","mt-3","mb-2"],[1,"btn","btn-success","btn-AW",3,"click"],[1,"table","table-striped","table-primary","table-bordered"],[1,"table-group-divider"],[4,"ngFor","ngForOf"],[1,"lineaTotal"],[1,"sumaTotal"],[1,"d-flex"],["type","number",1,"input-width",3,"ngModelChange","blur","ngModel"],["class","AW-aviso",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-primary","btn-AW","borrar",3,"id"],[1,"AW-aviso"]],template:function(i,t){i&1&&(o(0,"div",0)(1,"h2"),s(2," Factura nueva"),a(),o(3,"button",1),p("click",function(){return t.sendDatos()}),s(4,"Guardar datos"),a()(),o(5,"table",2)(6,"thead")(7,"tr")(8,"th"),s(9,"Producto"),a(),o(10,"th"),s(11,"Cantidad"),a(),o(12,"th"),s(13,"Precio"),a(),o(14,"th"),s(15,"Suma"),a(),o(16,"th"),s(17,"Borrar"),a()()(),o(18,"tbody",3),m(19,Xo,14,7,"tr",4),a()(),v(20,"div",5),o(21,"div",6),s(22),Ue(23,"removeZeroAndForma"),a()),i&2&&(l(19),d("ngForOf",t.mercancias),l(3),S("Total: ",Xi(23,2,t.getSumaFactura())," euros"))},dependencies:[P,H,w,U,k,Xe,O,G,pi],styles:[".lineaTotal[_ngcontent-%COMP%]{width:50%;height:3px;background-color:#000;margin:30px 50% 0 0}.sumaTotal[_ngcontent-%COMP%]{font-size:25px;font-weight:600}.AW-aviso[_ngcontent-%COMP%]{font-size:10px;color:red}.AW-aviso[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding-left:5px}.input-width[_ngcontent-%COMP%]{width:70px}@media screen and (max-width: 767px){table[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:3vw}.input-width[_ngcontent-%COMP%]{width:100%}}"]})};function Qo(n,e){n&1&&(o(0,"h1"),s(1,"Crear nueva Factura"),a())}function Ko(n,e){if(n&1&&(o(0,"h1"),s(1),a()),n&2){let i=u();l(),S("Editar factura #",i.mercancias[0].m_id_facturas,"")}}function ea(n,e){if(n&1&&(o(0,"option",18),s(1),a()),n&2){let i=e.$implicit;d("value",i.id_categoria),l(),C(i.c_nombre)}}function ta(n,e){if(n&1&&(o(0,"td"),s(1),a()),n&2){let i=u().$implicit;l(),C(i.p_precio_venta)}}function ia(n,e){if(n&1&&(o(0,"td"),s(1),a()),n&2){let i=u().$implicit;l(),C(i.p_precio_compra)}}function na(n,e){if(n&1&&(o(0,"button",25),s(1,"+"),a()),n&2){let i=u().$implicit;Gt("id",i.product_id)}}function ra(n,e){if(n&1&&(q(0),o(1,"tr")(2,"td"),s(3),a(),o(4,"td"),s(5),a(),o(6,"td"),s(7),a(),m(8,ta,2,1,"td",2)(9,ia,2,1,"td",2),o(10,"td",23),m(11,na,2,1,"button",24),a()(),Y()),n&2){let i=e.$implicit,t=u(2);l(3),C(i.p_nombre),l(2),C(i.p_nombre_categoria),l(2),C(i.p_cantidad_almacen),l(),d("ngIf",t.role=="cliente"),l(),d("ngIf",t.role=="vendedor"||t.role=="manager"||t.role=="admin"),l(2),d("ngIf",t.role!=="cliente"||i.p_cantidad_almacen>0)}}function oa(n,e){if(n&1&&(o(0,"div",19)(1,"table",20)(2,"thead")(3,"tr")(4,"th"),s(5),a(),o(6,"th"),s(7),a(),o(8,"th"),s(9),a(),o(10,"th"),s(11),a(),o(12,"th"),s(13,"A\xF1adir"),a()()(),o(14,"tbody",21),m(15,ra,12,6,"ng-container",22),a()()()),n&2){let i=u();l(5),C(i.headers.nombre),l(2),C(i.headers.categoria),l(2),C(i.headers.cantidad),l(2),C(i.headers.precio),l(4),d("ngForOf",i.productosPaginated)}}function aa(n,e){if(n&1){let i=y();o(0,"div")(1,"app-crear-factura-new",26),p("mercanciasRenovar",function(r){g(i);let c=u();return _(c.actualizarMercancias(r))})("volverMostrar",function(r){g(i);let c=u();return _(c.volverMostrarFacturas(r))}),a()()}if(n&2){let i=u();l(),d("mercancias",i.mercancias)("regimenUpdate",i.regimenUpdate)("updateFacturaId",i.updateFacturaId)}}var hi=class n{constructor(e,i,t,r,c){this.fb=e;this.productosService=i;this.categoriasService=t;this.mercanciaService=r;this.elRef=c}volverMostrar=new V;formCreateProducto;categorias=[];productos=[];mercancias=[];regimenUpdate=!1;updateFacturaId=0;headers={nombre:"Nombre",categoria:"Categoria",cantidad:"Cantidad en almacen",precio:"Precio venta"};role=localStorage.getItem("role");usuario=localStorage.getItem("usuario");buttonsInitialized=!1;ngOnInit(){this.obtenerListaProductos(),this.regimenUpdate&&this.obtenerMercanciasParaUpdate(this.updateFacturaId)}volverMostrarFacturas(e){this.volverMostrar.emit(e)}obtenerListaProductos(){this.productosService.getProductosActivos().subscribe(e=>{this.productos=e,console.log(this.productos),this.buttonsInitialized=!1,this.applyFilter()},e=>{console.log("Error data de producto",e)}),this.categoriasService.getCategorias().subscribe(e=>{this.categorias=e},e=>{console.log("Error data de categorias",e)})}ngAfterViewChecked(){!this.buttonsInitialized&&this.productos.length>0&&(this.initButtons(),this.buttonsInitialized=!0)}initButtons(){this.elRef.nativeElement.querySelectorAll(".btn").forEach(i=>{i.addEventListener("click",t=>{let r=Number(t.target.id);console.log(r);let c=this.productos.find(b=>b.product_id==r),f=this.mercancias.find(b=>b.m_id_productos==r);if(c&&!f){let b=0;this.role=="cliente"?b=c.p_precio_venta:b=c.p_precio_compra;let x={m_id_productos:r,m_nombre_producto:c.p_nombre,m_precio_venta:c.p_precio_venta,m_precio_compra:c.p_precio_compra,m_cantidad_pedida:1,m_cantidad_recogida:0,m_suma_pedida:b,m_suma_recogida:0,m_aceptado:!1,m_cantidad_maximum:c.p_cantidad_almacen};this.mercancias=[...this.mercancias,x],console.log(this.mercancias)}})})}actualizarMercancias(e){this.mercancias=e}obtenerMercanciasParaUpdate(e){this.mercanciaService.getMercancias(e).subscribe(i=>{this.mercancias=i,this.buttonsInitialized=!1},i=>{console.log("Error data de mercancias",i)})}itemsPerPage=6;currentPage=1;totalPages=1;productosFiltrated=[];productosPaginated=[];filterSearch="";categoriaSearch=0;applyFilter(){if(this.filterSearch||this.categoriaSearch>-1){console.log(this.filterSearch,this.categoriaSearch);let e=this.productos.filter(i=>i.p_nombre.toLocaleLowerCase().includes(this.filterSearch.toLocaleLowerCase()));+this.categoriaSearch>0&&(e=e.filter(i=>i.p_categoria==this.categoriaSearch)),this.productosFiltrated=e,console.log(e)}else this.productosFiltrated=[...this.productos];this.totalPages=Math.ceil(this.productosFiltrated.length/this.itemsPerPage),this.currentPage=1,this.productosPaginated=this.getPaginatedData()}getPaginatedData(){let e=(this.currentPage-1)*this.itemsPerPage,i=e+this.itemsPerPage;return this.productosFiltrated.slice(e,i)}prevPage(){this.currentPage>1&&(this.currentPage--,this.buttonsInitialized=!1,this.productosPaginated=this.getPaginatedData())}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.buttonsInitialized=!1,this.productosPaginated=this.getPaginatedData())}static \u0275fac=function(i){return new(i||n)(h(He),h(xe),h(Be),h(Me),h(Se))};static \u0275cmp=E({type:n,selectors:[["app-crear-factura"]],inputs:{regimenUpdate:"regimenUpdate",updateFacturaId:"updateFacturaId"},outputs:{volverMostrar:"volverMostrar"},standalone:!0,features:[M],decls:29,vars:11,consts:[[1,"wrapper"],[1,"d-flex","mt-3","justify-content-between"],[4,"ngIf"],[1,"ms-3","mt-2"],[1,"btn","btn-info","btn-AW",3,"click"],[1,"form","mt-3","mb-3"],[1,"form-group","row"],["for","filterDesc",1,"col-form-label","col-sm-2","text-sm-right"],[1,"col-sm-3"],["type","text","name","filterDesc","id","filterDesc","placeholder","filtramos por...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"col-sm-3","mt-2"],["name","categoriaSearch","id","categoriaSearch",3,"ngModelChange","ngModel"],["value","0"],[3,"value",4,"ngFor","ngForOf"],["class","table-responsive",4,"ngIf"],[1,"pagination-controls","mb-2"],[3,"click","disabled"],[1,"ms-3","me-3"],[3,"value"],[1,"table-responsive"],[1,"table","table-striped","table-primary","table-bordered"],[1,"table-group-divider"],[4,"ngFor","ngForOf"],["id","AW-td"],["class","btn btn-primary btn-AW anadir",3,"id",4,"ngIf"],[1,"btn","btn-primary","btn-AW","anadir",3,"id"],[3,"mercanciasRenovar","volverMostrar","mercancias","regimenUpdate","updateFacturaId"]],template:function(i,t){i&1&&(o(0,"div",0)(1,"div",1),m(2,Qo,2,0,"h1",2)(3,Ko,2,1,"h1",2),o(4,"div",3)(5,"button",4),p("click",function(){return t.volverMostrarFacturas(!1)}),s(6,"Volver"),a()()(),o(7,"form",5)(8,"div",6)(9,"label",7),s(10," Filtro "),a(),o(11,"div",8)(12,"input",9),W("ngModelChange",function(c){return j(t.filterSearch,c)||(t.filterSearch=c),c}),p("input",function(){return t.applyFilter()}),a()(),o(13,"label",7),s(14," Categoria "),a(),o(15,"div",10)(16,"select",11),W("ngModelChange",function(c){return j(t.categoriaSearch,c)||(t.categoriaSearch=c),c}),p("ngModelChange",function(){return t.applyFilter()}),o(17,"option",12),s(18,"Seleccione una categoria"),a(),m(19,ea,2,2,"option",13),a()()()(),m(20,oa,16,5,"div",14),o(21,"div",15)(22,"button",16),p("click",function(){return t.prevPage()}),s(23,"Anterior"),a(),o(24,"span",17),s(25),a(),o(26,"button",16),p("click",function(){return t.nextPage()}),s(27,"Siguiente"),a()(),m(28,aa,2,3,"div",2),a()),i&2&&(l(2),d("ngIf",!t.regimenUpdate),l(),d("ngIf",t.regimenUpdate),l(9),L("ngModel",t.filterSearch),l(4),L("ngModel",t.categoriaSearch),l(3),d("ngForOf",t.categorias),l(),d("ngIf",t.productos&&t.productos.length),l(2),d("disabled",t.currentPage===1),l(3),it("Pagina ",t.currentPage," de ",t.totalPages,""),l(),d("disabled",t.currentPage===t.totalPages),l(2),d("ngIf",t.mercancias.length))},dependencies:[U,X,ge,_e,k,de,O,J,G,fe,Ge,P,H,w,fi],styles:["#AW-td[_ngcontent-%COMP%]{padding:2px}@media screen and (max-width: 767px){table[_ngcontent-%COMP%]{font-size:3vw}}"]})};var $e=class n{constructor(e,i){this.http=e;this.authService=i}lugarUrl="http://localhost:8080/api/lugares";getLugares(){let e=this.getHeaderAuth();return this.authService.checkTokenExpiration()?(console.log("read"),this.http.get(this.lugarUrl,{headers:e})):(console.log("not read"),D)}getLugar(e){let i=this.getHeaderAuth(),t=`${this.lugarUrl}/${e}`;return this.authService.checkTokenExpiration()?(console.log("read"),this.http.get(t,{headers:i})):(console.log("not read"),D)}cambiarLugares(e,i){let t=this.getHeaderAuth(),r={firstCelda:e,secondCelda:i},c=`${this.lugarUrl}/cambiar`;return this.authService.checkTokenExpiration()?(console.log("read"),this.http.put(c,r,{headers:t})):(console.log("not read"),D)}getHeaderAuth(){let e=this.authService.getToken();return new ce({Authorization:`Bearer ${e}`})}static \u0275fac=function(i){return new(i||n)(A(te),A(T))};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})};function sa(n,e){if(n&1){let i=y();o(0,"td",10),p("click",function(r){let c=g(i).index,f=u().index,b=u().index,x=u();return _(x.accionesConCelda(x.getId(b,f,c),r))}),o(1,"div",11),s(2),a()()}if(n&2){let i=e.index,t=u().index,r=u().index,c=u();Ht("id",c.getId(r,t,i)),l(),d("ngStyle",c.getBackgroundColor(+c.getId(r,t,i))),l(),S(" ",c.getNumeroCelda(t,i)," ")}}function la(n,e){if(n&1&&(o(0,"tr"),m(1,sa,3,3,"td",9),a()),n&2){let i=u(2);l(),d("ngForOf",i.cols)}}function ca(n,e){if(n&1&&(o(0,"div",4)(1,"div",5)(2,"div",6),s(3),a()(),o(4,"table",7)(5,"tbody"),m(6,la,2,1,"tr",8),a()()()),n&2){let i=e.index,t=u();l(3),S(" ",t.zonas[i]," "),l(3),d("ngForOf",t.rows)}}function da(n,e){if(n&1&&(o(0,"div",22)(1,"div",23)(2,"p",24),s(3),a(),o(4,"p"),s(5),a()(),o(6,"div",25),v(7,"img",26),a()()),n&2){let i=u(3);l(3),S("",i.lugarParaMostrar.lugar_productoInfo.p_nombre," "),l(2),S("cantidad: ",i.lugarParaMostrar.lugar_cantidad,""),l(2),d("src",i.lugarParaMostrar.lugar_productoInfo.p_foto,we)}}function ua(n,e){if(n&1){let i=y();o(0,"input",30),W("ngModelChange",function(r){g(i);let c=u(4);return j(c.mercancia.m_cantidad_recogida,r)||(c.mercancia.m_cantidad_recogida=r),_(r)}),a()}if(n&2){let i=u(4);d("hidden",i.isHidden),L("ngModel",i.mercancia.m_cantidad_recogida)}}function ma(n,e){if(n&1&&(o(0,"div",27)(1,"label",28),s(2,"Cantidad"),a(),m(3,ua,1,2,"input",29),a()),n&2){let i=u(3);l(),d("hidden",i.isHidden),l(2),d("ngIf",i.mercancia)}}function pa(n,e){if(n&1){let i=y();o(0,"button",31),p("click",function(){g(i);let r=u(3);return _(r.aceptarMercancia(r.mercancia.id?r.mercancia.id:0,r.mercancia.m_cantidad_recogida))}),s(1,"Aceptar "),a()}if(n&2){let i=u(3);d("hidden",i.isHidden)}}function fa(n,e){if(n&1){let i=y();o(0,"button",32),p("click",function(){g(i);let r=u(3);return _(r.cancelarAceptadoMercancia(r.mercancia.id?r.mercancia.id:0,r.mercancia.m_cantidad_recogida))}),s(1,"Cancelar "),a()}if(n&2){let i=u(3);d("hidden",i.isHidden)}}function ha(n,e){n&1&&(o(0,"div")(1,"div",33)(2,"p"),s(3,"LUGAR"),a(),o(4,"p"),s(5,"DISPONIBLE"),a()()())}function ga(n,e){if(n&1){let i=y();o(0,"div")(1,"div",14),s(2),a(),v(3,"div",15),m(4,da,8,3,"div",16),o(5,"div",17),m(6,ma,4,2,"div",18)(7,pa,2,1,"button",19)(8,fa,2,1,"button",20),o(9,"button",21),p("click",function(){g(i);let r=u(2);return _(r.cerrarPopup())}),s(10,"Cerrar"),a()(),m(11,ha,6,0,"div",13),a()}if(n&2){let i=u(2);l(2),Bt(" ",i.lugarParaMostrar.lugar_estanteria,"-",i.lugarParaMostrar.lugar_column,"-",i.lugarParaMostrar.lugar_planta," "),l(2),d("ngIf",i.lugarParaMostrar.lugar_productoInfo.p_nombre),l(2),d("ngIf",i.mercancia),l(),d("ngIf",i.mercancia&&!i.mercancia.m_aceptado),l(),d("ngIf",i.mercancia&&i.mercancia.m_aceptado),l(3),d("ngIf",!i.lugarParaMostrar.lugar_productoInfo.p_nombre)}}function _a(n,e){if(n&1&&(o(0,"div",12),m(1,ga,12,8,"div",13),a()),n&2){let i=u();l(),d("ngIf",i.lugarParaMostrar)}}function va(n,e){if(n&1){let i=y();o(0,"div",34)(1,"p"),s(2),a(),o(3,"p"),s(4),a(),o(5,"div",17)(6,"button",35),p("click",function(){g(i);let r=u();return _(r.intercambioCeldas())}),s(7,"Mover"),a(),o(8,"button",36),p("click",function(){g(i);let r=u();return _(r.cerrarPopup())}),s(9,"Cancelar "),a()()()}if(n&2){let i=u();l(2),S("Mover de celda ",i.firstCelda," "),l(2),S("a celda ",i.secondCelda,"?")}}var pt=class n{constructor(e){this.lugaresService=e}lugares=[];mercancias=[];regimenAlmacen=!1;regimenTrasladar=!1;productoSearch="";isHidden=!1;disabled=new V;obtenerLugaresAlmacen=new V;lugarParaMostrar=null;tables=Array.from({length:4});rows=Array.from({length:3});cols=Array.from({length:10});zonas=["A","B","C","D"];getId(e,i,t){return`${e*30+(2-i)*10+t+1}`}ngOnInit(){let e=["A","B","C","D"];this.mercancias.forEach(i=>{let[t,r,c]=i.m_lugar?i.m_lugar.split("-"):["Z","0","0"],f=e.indexOf(t)*30+(+c-1)*10+ +r;i.m_lugar_numero=f})}isPopupVisible=!1;isPopupAcceptVisible=!1;number="";mercancia=void 0;accionesConCelda(e,i){this.regimenTrasladar?this.cambiarCeldas(e):(i.stopPropagation(),this.mostrarInfo(e))}firstSelected=null;secondSelected=null;firstCelda="";secondCelda="";cambiarCeldas(e){this.firstSelected?this.secondSelected||(this.secondSelected=e,this.secondCelda=this.lugares[+e].lugar_estanteria+"-"+this.lugares[+e].lugar_planta+"-"+(this.lugares[+e].lugar_column-1),console.log("second :"+this.secondSelected),this.isPopupAcceptVisible=!0):(this.firstSelected=e,this.firstCelda=this.lugares[+e].lugar_estanteria+"-"+this.lugares[+e].lugar_planta+"-"+(this.lugares[+e].lugar_column-1),console.log("first :"+this.firstSelected))}intercambioCeldas(){if(this.isPopupAcceptVisible=!1,this.firstSelected&&this.secondSelected){let e=+this.firstSelected,i=+this.secondSelected;this.lugaresService.cambiarLugares(e,i).subscribe(t=>{this.obtenerLugaresAlmacen.emit()},t=>{console.log("Error data de lugares",t)}),this.firstSelected=null,this.secondSelected=null,this.firstCelda="",this.secondCelda=""}}mostrarInfo(e){this.isPopupVisible=!this.isPopupVisible,this.getLugar(e)}cerrarPopup(){this.isPopupVisible=!1,this.isPopupAcceptVisible=!1,this.firstSelected=null,this.secondSelected=null,this.firstCelda="",this.secondCelda=""}getBackgroundColor(e){if(e.toString()==this.firstSelected||e.toString()==this.secondSelected)return{background:"red"};if(this.regimenAlmacen){let i=this.mercancias.find(t=>t.m_lugar_numero==e);return i?i.m_aceptado?{background:"green"}:{background:"red"}:{background:"white"}}else{if(this.productoSearch)return this.lugares.find(i=>i.id==e)?{background:"green"}:{background:"white"};if(this.lugares[e-1].lugar_cantidad&&this.lugares[e-1].lugar_cantidad>0)return{background:"blue"}}}getNumeroCelda(e,i){let t=3-e,r=i+1;return t+"-"+r}getLugar(e){let i=+e;this.lugaresService.getLugar(i).subscribe(t=>{this.lugarParaMostrar=t,this.mercancia=this.mercancias.find(r=>r.m_id_productos==this.lugarParaMostrar?.lugar_producto),console.log(this.mercancia)},t=>{console.log("Error data de lugar",t)})}aceptarMercancia(e,i){let t=this.mercancias.find(r=>r.id==e);t&&t.m_cantidad_pedida==t.m_cantidad_recogida&&(t.m_aceptado=!0),this.disabled.emit()}cancelarAceptadoMercancia(e,i){let t=this.mercancias.find(r=>r.id==e);t&&t.m_cantidad_pedida==i&&(t.m_aceptado=!1),this.disabled.emit()}static \u0275fac=function(i){return new(i||n)(h($e))};static \u0275cmp=E({type:n,selectors:[["app-almacen-show"]],inputs:{lugares:"lugares",mercancias:"mercancias",regimenAlmacen:"regimenAlmacen",regimenTrasladar:"regimenTrasladar",productoSearch:"productoSearch",isHidden:"isHidden"},outputs:{disabled:"disabled",obtenerLugaresAlmacen:"obtenerLugaresAlmacen"},standalone:!0,features:[M],decls:4,vars:3,consts:[[1,"container-almacen","ms-2","me-2"],["class","row",4,"ngFor","ngForOf"],["class","popup",4,"ngIf"],["class","popup2",4,"ngIf"],[1,"row"],[1,"zona","col-12","col-sm-1","d-flex"],[1,"m-auto"],[1,"mb-3","shelving","col-12","col-sm-11"],[4,"ngFor","ngForOf"],["class","cell",3,"click",4,"ngFor","ngForOf"],[1,"cell",3,"click"],[1,"celda",3,"ngStyle"],[1,"popup"],[4,"ngIf"],[1,"header"],[1,"mt-1","mb-1","line"],["class","d-flex",4,"ngIf"],[1,"d-flex","buttons","justify-content-around"],["class","d-flex m-auto",4,"ngIf"],["class","btn btn-AW btn-warning m-auto",3,"hidden","click",4,"ngIf"],["class","btn btn-AW btn-success m-auto",3,"hidden","click",4,"ngIf"],[1,"btn","btn-AW","btn-dark","m-auto",3,"click"],[1,"d-flex"],[1,"infoProducto","col-6"],[1,"mt-2","fw-bold"],[1,"col-6"],[1,"img-AW",3,"src"],[1,"d-flex","m-auto"],[1,"pt-1","fw-bold",3,"hidden"],["style","width:70px;","type","number",3,"hidden","ngModel","ngModelChange",4,"ngIf"],["type","number",2,"width","70px",3,"ngModelChange","hidden","ngModel"],[1,"btn","btn-AW","btn-warning","m-auto",3,"click","hidden"],[1,"btn","btn-AW","btn-success","m-auto",3,"click","hidden"],[1,"disponible"],[1,"popup2"],[1,"btn","btn-AW","btn-success","m-auto",3,"click"],[1,"btn","btn-AW","btn-danger","m-auto",3,"click"]],template:function(i,t){i&1&&(o(0,"div",0),m(1,ca,7,2,"div",1),a(),m(2,_a,2,1,"div",2)(3,va,10,2,"div",3)),i&2&&(l(),d("ngForOf",t.tables),l(),d("ngIf",t.isPopupVisible),l(),d("ngIf",t.isPopupAcceptVisible))},dependencies:[P,H,w,rn,U,k,Xe,O,G],styles:['@charset "UTF-8";table[_ngcontent-%COMP%]{margin:0 auto;border-collapse:collapse;border:1px solid black}td[_ngcontent-%COMP%]{border:1px solid black}.celda[_ngcontent-%COMP%]{height:30px;background-color:#add8e6;cursor:pointer;text-align:center;line-height:30px}.line[_ngcontent-%COMP%]{background-color:#000;height:2px;width:80%;margin:auto}.zona[_ngcontent-%COMP%]{margin-top:4%;font-size:30px;font-weight:600}.buttons[_ngcontent-%COMP%]{position:absolute;bottom:5px;width:93%}.header[_ngcontent-%COMP%]{font-size:18px;font-weight:600;text-align:center}.img-AW[_ngcontent-%COMP%]{width:90%;max-width:150px}.disponible[_ngcontent-%COMP%]{font-size:18px;font-weight:600;text-align:center;padding:20%}.shelving[_ngcontent-%COMP%]{border-collapse:collapse;box-shadow:0 0 10px #00000080}.shelving[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]{border:2px solid #ccc;text-align:center;vertical-align:middle;font-weight:700;color:#333;position:relative;box-shadow:inset 0 0 5px #0000004d}.shelving[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{border-bottom:3px solid #8b4513}.shelving[_ngcontent-%COMP%]   .cell[_ngcontent-%COMP%]:first-child{border-left:3px solid #8b4513}.shelving[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   .cell[_ngcontent-%COMP%]{border-bottom:3px solid #8b4513}@media screen and (max-width: 767px){table[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:3vw}}']})};function Ca(n,e){if(n&1){let i=y();o(0,"div",13)(1,"button",14),p("click",function(){g(i);let r=u();return _(r.cambiarRegimenRedactar())}),s(2,"Factura"),a()()}}function ba(n,e){if(n&1){let i=y();o(0,"div",13)(1,"button",14),p("click",function(){g(i);let r=u();return _(r.cambiarRegimenRedactar())}),s(2,"Almacen"),a()()}}function ya(n,e){if(n&1&&(q(0),s(1),Y()),n&2){let i=u(2).$implicit;l(),S(" ",i.m_lugar," ")}}function Sa(n,e){if(n&1&&(q(0),s(1),Y()),n&2){let i=e.$implicit;l(),Bt(" ",i.lugar_estanteria,"-",i.lugar_planta,"-",i.lugar_column," ")}}function xa(n,e){if(n&1&&(q(0),m(1,Sa,2,3,"ng-container",17),Y()),n&2){let i=u(2).$implicit;l(),d("ngForOf",i.m_lugares)}}function Ea(n,e){if(n&1&&(o(0,"td"),m(1,ya,2,1,"ng-container",20)(2,xa,2,1,"ng-container",20),a()),n&2){let i=u().$implicit;l(),d("ngIf",i.m_lugar&&!i.m_lugares),l(),d("ngIf",i.m_lugares)}}function Ma(n,e){if(n&1&&(o(0,"td"),s(1),a()),n&2){let i=u().$implicit;l(),C(i.m_lugar)}}function Ia(n,e){if(n&1){let i=y();o(0,"button",23),p("click",function(){g(i);let r=u().$implicit,c=St(8),f=u(2);return _(f.aceptarMercancia(r.id?r.id:0,c.value))}),s(1,"Aceptar "),a()}}function wa(n,e){if(n&1){let i=y();o(0,"button",24),p("click",function(){g(i);let r=u().$implicit,c=St(8),f=u(2);return _(f.cancelarAceptadoMercancia(r.id?r.id:0,c.value))}),s(1,"Cancelar "),a()}}function Pa(n,e){if(n&1){let i=y();o(0,"tr")(1,"td"),s(2),a(),o(3,"td"),s(4),a(),o(5,"td")(6,"div",18)(7,"input",19,0),W("ngModelChange",function(r){let c=g(i).$implicit;return j(c.m_cantidad_recogida,r)||(c.m_cantidad_recogida=r),_(r)}),a()()(),m(9,Ea,3,2,"td",20)(10,Ma,2,1,"td",20),o(11,"td"),m(12,Ia,2,0,"button",21)(13,wa,2,0,"button",22),a()()}if(n&2){let i=e.$implicit,t=u(2);l(2),S(" ",i.m_nombre_producto," "),l(2),S(" ",i.m_cantidad_pedida,""),l(3),L("ngModel",i.m_cantidad_recogida),l(2),d("ngIf",t.role=="receptor"),l(),d("ngIf",t.role=="recogedor"),l(2),d("ngIf",!i.m_aceptado),l(),d("ngIf",i.m_aceptado)}}function Fa(n,e){if(n&1&&(o(0,"table",15)(1,"thead")(2,"tr")(3,"th"),s(4,"Producto"),a(),o(5,"th"),s(6,"Cantidad"),a(),o(7,"th"),s(8,"Cantidad nuevo"),a(),o(9,"th"),s(10,"Celda"),a(),o(11,"th"),s(12,"Aceptado"),a()()(),o(13,"tbody",16),m(14,Pa,14,7,"tr",17),a()()),n&2){let i=u();l(14),d("ngForOf",i.mercancias)}}function Aa(n,e){if(n&1){let i=y();o(0,"div",25)(1,"app-almacen-show",26),p("disabled",function(){g(i);let r=u();return _(r.disabled())}),a()()}if(n&2){let i=u();l(),d("mercancias",i.mercancias)("regimenAlmacen",i.regimenAlmacen)("isHidden",i.isHidden)}}var gi=class n{constructor(e,i){this.mercanciaService=e;this.lugarService=i}controlarFacturaId=-1;facturaMostrar=null;volverMostrar=new V;sumaFactura=0;puedoAceptar=!1;role=localStorage.getItem("role");usuario=localStorage.getItem("usuario");regimenAlmacen=!1;cambiarRegimenRedactar(){this.regimenAlmacen=!this.regimenAlmacen}volverMostrarFactura(e){console.log("volver"),this.volverMostrar.emit(e)}mercancias=[];ngOnInit(){console.log(this.facturaMostrar),this.controlarFacturaId>0?this.mercanciaService.getMercanciasConLugares(this.controlarFacturaId).subscribe(e=>{this.mercancias=e,console.log(e),this.role=="recogedor"&&this.sortMercancias()},e=>{console.log("Error data de producto",e)}):console.log("Numero de factura es incorrecto")}isDisabled=!0;disabled(){let e=!0;this.mercancias.forEach(i=>{i.m_aceptado||(e=!1)}),console.log(e),this.isDisabled=!e,console.log("check"+this.isDisabled)}isHidden=!1;aceptarMercancia(e,i){let t=this.mercancias.find(r=>r.id==e);t&&t.m_cantidad_pedida==t.m_cantidad_recogida&&(t.m_aceptado=!0),this.disabled()}cancelarAceptadoMercancia(e,i){let t=this.mercancias.find(r=>r.id==e);t&&t.m_cantidad_pedida==i&&(t.m_aceptado=!1),this.disabled()}guardarDatos(e){if(console.log("send"),this.mercancias&&this.controlarFacturaId&&this.usuario){let i=+this.usuario;this.role=="recogedor"&&(this.mercancias.forEach(t=>{t.m_precio_venta&&(t.m_suma_recogida=t.m_cantidad_recogida*t.m_precio_venta,this.sumaFactura+=t.m_suma_recogida)}),this.mercanciaService.aceptarFactura(this.controlarFacturaId,this.mercancias,this.sumaFactura,i,e).subscribe(t=>this.volverMostrar.emit(!0))),this.role=="receptor"&&(this.mercancias.forEach(t=>{t.m_precio_compra&&(t.m_suma_recogida=t.m_cantidad_recogida*t.m_precio_compra,this.sumaFactura+=t.m_suma_recogida)}),this.mercanciaService.aceptarFactura(this.controlarFacturaId,this.mercancias,this.sumaFactura,i,e).subscribe(t=>{this.mercancias=t,console.log(this.mercancias),this.isHidden=!0}))}}updateQuantity(e,i){if(i>=0){let t=this.mercancias.findIndex(r=>r.m_id_productos===e);if(this.mercancias[t].m_cantidad_maximum&&i>this.mercancias[t].m_cantidad_maximum&&(i=this.mercancias[t].m_cantidad_maximum),this.mercancias[t].m_cantidad_pedida=i,this.mercancias[t].m_precio_venta){let r=i*this.mercancias[t].m_precio_venta;this.mercancias[t].m_suma_pedida=r,this.sumarFactura()}}}sumarFactura(){this.sumaFactura=this.mercancias.reduce((i,t)=>i+parseFloat(String(t.m_suma_pedida)),0),console.log("sumar",this.sumaFactura)}sortMercancias(){this.mercancias.sort((e,i)=>{let[t,r,c]=e.m_lugar?e.m_lugar.split("-"):["Z","0","0"],[f,b,x]=i.m_lugar?i.m_lugar.split("-"):["Z","0","0"];return t<f?-1:t>f?1:parseInt(r)<parseInt(b)?-1:parseInt(r)>parseInt(b)?1:parseInt(c)<parseInt(x)?-1:parseInt(c)>parseInt(x)?1:0})}static \u0275fac=function(i){return new(i||n)(h(Me),h($e))};static \u0275cmp=E({type:n,selectors:[["app-crear-factura-control"]],inputs:{controlarFacturaId:"controlarFacturaId",facturaMostrar:"facturaMostrar"},outputs:{volverMostrar:"volverMostrar"},standalone:!0,features:[M],decls:20,vars:9,consts:[["inputRef",""],[1,"row","mt-2","mb-2","justify-content-between"],[1,"col-8","col-md-7","col-lg-5"],["class","d-flex mt-2 col-4 col-md-3 col-lg-2 ps-0 pe-3 justify-content-end",4,"ngIf"],[1,"d-flex","col-12","col-lg-5","ps-0","pe-3","justify-content-end"],[1,"mt-2"],[1,"btn","btn-warning","btn-AW",3,"click"],[1,"ms-2","mt-2"],[1,"btn","btn-success","btn-AW",3,"click","disabled","hidden"],[1,"btn","btn-dark","btn-AW",3,"click","disabled","hidden"],[1,"btn","btn-info","btn-AW",3,"click"],["class","table table-striped table-primary table-bordered",4,"ngIf"],["class","info-container",4,"ngIf"],[1,"d-flex","mt-2","col-4","col-md-3","col-lg-2","ps-0","pe-3","justify-content-end"],[1,"btn","btn-primary","btn-AW",3,"click"],[1,"table","table-striped","table-primary","table-bordered"],[1,"table-group-divider"],[4,"ngFor","ngForOf"],[1,"d-flex"],["type","number",3,"ngModelChange","ngModel"],[4,"ngIf"],["class","btn btn-AW btn-warning",3,"click",4,"ngIf"],["class","btn btn-AW btn-success",3,"click",4,"ngIf"],[1,"btn","btn-AW","btn-warning",3,"click"],[1,"btn","btn-AW","btn-success",3,"click"],[1,"info-container"],[3,"disabled","mercancias","regimenAlmacen","isHidden"]],template:function(i,t){i&1&&(o(0,"div",1)(1,"h1",2),s(2),a(),m(3,Ca,3,0,"div",3)(4,ba,3,0,"div",3),o(5,"div",4)(6,"div",5)(7,"button",6),p("click",function(){return t.guardarDatos(!1)}),s(8,"Guardar"),a()(),o(9,"div",7)(10,"button",8),p("click",function(){return t.guardarDatos(!0)}),s(11,"Aceptar"),a()(),o(12,"div",7)(13,"button",9),p("click",function(){return t.volverMostrarFactura(!0)}),s(14,"Salir"),a()(),o(15,"div",7)(16,"button",10),p("click",function(){return t.volverMostrarFactura(!1)}),s(17,"Volver"),a()()()(),m(18,Fa,15,1,"table",11)(19,Aa,2,3,"div",12)),i&2&&(l(2),S(" Factura #",t.controlarFacturaId,""),l(),d("ngIf",t.regimenAlmacen),l(),d("ngIf",!t.regimenAlmacen),l(6),d("disabled",t.isDisabled)("hidden",t.isHidden),l(3),d("disabled",t.isDisabled)("hidden",!t.isHidden),l(5),d("ngIf",!t.regimenAlmacen),l(),d("ngIf",t.regimenAlmacen))},dependencies:[P,H,w,U,k,Xe,O,G,pt],styles:["button[_ngcontent-%COMP%]:disabled{background-color:gris;cursor:not-allowed}table[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:70px}@media screen and (max-width: 767px){table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:.5rem}table[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:50px}}"]})};function Va(n,e){if(n&1&&(o(0,"th"),s(1),a()),n&2){let i=u(3);l(),C(i.headers.direccion)}}function Da(n,e){if(n&1&&(o(0,"th"),s(1),a()),n&2){let i=u(3);l(),C(i.headers.accion)}}function ka(n,e){n&1&&(o(0,"td"),s(1,"Compra"),a())}function Ta(n,e){n&1&&(o(0,"td"),s(1,"Venta"),a())}function Oa(n,e){n&1&&(o(0,"td"),s(1,"No aceptado"),a())}function Ua(n,e){n&1&&(o(0,"td",28),s(1,"Aceptado"),a())}function Na(n,e){n&1&&(o(0,"td"),s(1,"No preparado"),a())}function Ra(n,e){n&1&&(o(0,"td"),s(1,"Preparado"),a())}function La(n,e){if(n&1){let i=y();o(0,"button",31),p("click",function(){g(i);let r=u(2).$implicit,c=u(3);return _(c.controlarFactura(r.factura_id))}),s(1,"Comprobar"),a()}}function ja(n,e){n&1&&(o(0,"button",32),s(1,"Aceptado"),a())}function Wa(n,e){if(n&1&&(o(0,"td"),m(1,La,2,0,"button",29)(2,ja,2,0,"button",30),a()),n&2){let i=u().$implicit;l(),d("ngIf",!i.f_aceptado),l(),d("ngIf",i.f_aceptado)}}function Ha(n,e){if(n&1){let i=y();o(0,"button",31),p("click",function(){g(i);let r=u(2).$implicit,c=u(3);return _(c.controlarFactura(r.factura_id))}),s(1,"Recoger"),a()}}function Ga(n,e){n&1&&(o(0,"button",32),s(1,"Completado"),a())}function Ba(n,e){if(n&1&&(o(0,"td"),m(1,Ha,2,0,"button",29)(2,Ga,2,0,"button",30),a()),n&2){let i=u().$implicit;l(),d("ngIf",!i.f_aceptado),l(),d("ngIf",i.f_aceptado)}}function $a(n,e){if(n&1){let i=y();o(0,"tr")(1,"td",26),p("click",function(){let r=g(i).$implicit,c=u(3);return _(c.mostrarFactura(r.factura_id))}),s(2),a(),o(3,"td"),s(4),a(),o(5,"td"),s(6),a(),m(7,ka,2,0,"td",5)(8,Ta,2,0,"td",5)(9,Oa,2,0,"td",5)(10,Ua,2,0,"td",27)(11,Na,2,0,"td",5)(12,Ra,2,0,"td",5),o(13,"td"),s(14),Ue(15,"date"),a(),m(16,Wa,3,2,"td",5)(17,Ba,3,2,"td",5),a()}if(n&2){let i=e.$implicit,t=u(3);l(2),C(i.factura_id),l(2),C(i.usuario_cliente.u_nombre),l(2),C(i.f_suma),l(),d("ngIf",!i.f_tipo&&t.role!=="receptor"&&t.role!=="recogedor"),l(),d("ngIf",i.f_tipo&&t.role!=="receptor"&&t.role!=="recogedor"),l(),d("ngIf",!i.f_tipo&&!i.f_aceptado),l(),d("ngIf",!i.f_tipo&&i.f_aceptado),l(),d("ngIf",i.f_tipo&&!i.f_aceptado),l(),d("ngIf",i.f_tipo&&i.f_aceptado),l(2),C($t(15,12,i.created_at,"mediumDate")),l(2),d("ngIf",t.role=="receptor"),l(),d("ngIf",t.role=="recogedor")}}function za(n,e){if(n&1){let i=y();o(0,"div",19)(1,"table",20)(2,"thead")(3,"tr")(4,"th"),s(5),a(),o(6,"th"),s(7),a(),o(8,"th"),s(9),a(),m(10,Va,2,1,"th",5),o(11,"th"),s(12),a(),o(13,"th"),s(14),a(),m(15,Da,2,1,"th",5),a()(),o(16,"tbody",21),m(17,$a,18,15,"tr",22),a()(),o(18,"div",23)(19,"button",24),p("click",function(){g(i);let r=u(2);return _(r.prevPage())}),s(20,"Anterior"),a(),o(21,"span",25),s(22),a(),o(23,"button",24),p("click",function(){g(i);let r=u(2);return _(r.nextPage())}),s(24,"Siguiente"),a()()()}if(n&2){let i=u(2);l(5),C(i.headers.numero),l(2),C(i.headers.nombre),l(2),C(i.headers.suma),l(),d("ngIf",i.role!=="receptor"&&i.role!=="recogedor"),l(2),C(i.headers.estado),l(2),C(i.headers.created),l(),d("ngIf",i.role=="receptor"||i.role=="recogedor"),l(2),d("ngForOf",i.facturasPaginated),l(2),d("disabled",i.currentPage===1),l(3),it("Pagina ",i.currentPage," de ",i.totalPages,""),l(),d("disabled",i.currentPage===i.totalPages)}}function qa(n,e){if(n&1){let i=y();o(0,"div")(1,"button",33),p("click",function(){g(i);let r=u(2);return _(r.crearNuevaFactura())}),s(2,"Crear nuevo Pedido"),a()()}}function Ya(n,e){if(n&1){let i=y();o(0,"div")(1,"form",6)(2,"div",7)(3,"label",8),s(4," Client "),a(),o(5,"div",9)(6,"input",10),W("ngModelChange",function(r){g(i);let c=u();return j(c.clientSearch,r)||(c.clientSearch=r),_(r)}),p("input",function(){g(i);let r=u();return _(r.applyFilter())}),a()(),o(7,"div",11)(8,"label",12),s(9," Acci\xF3n "),a(),o(10,"div",13)(11,"select",14),W("ngModelChange",function(r){g(i);let c=u();return j(c.direccionSearch,r)||(c.direccionSearch=r),_(r)}),p("ngModelChange",function(){g(i);let r=u();return _(r.applyFilter())}),o(12,"option",15),s(13,"Seleccione acci\xF3n"),a(),o(14,"option",15),s(15,"Compra"),a(),o(16,"option",15),s(17,"Venta"),a()()(),o(18,"label",16),s(19," Status "),a(),o(20,"div",13)(21,"select",17),W("ngModelChange",function(r){g(i);let c=u();return j(c.statusSearch,r)||(c.statusSearch=r),_(r)}),p("ngModelChange",function(){g(i);let r=u();return _(r.applyFilter())}),o(22,"option",15),s(23,"Seleccione Status"),a(),o(24,"option",15),s(25,"En processo"),a(),o(26,"option",15),s(27,"Terminado"),a()()()()()(),m(28,za,25,12,"div",18)(29,qa,3,0,"div",5),a()}if(n&2){let i=u();l(6),L("ngModel",i.clientSearch),l(5),L("ngModel",i.direccionSearch),l(),d("value",-1),l(2),d("value",0),l(2),d("value",1),l(5),L("ngModel",i.statusSearch),l(),d("value",-1),l(2),d("value",0),l(2),d("value",1),l(2),d("ngIf",i.facturas&&i.facturas.length),l(),d("ngIf",i.role==="admin"||i.role==="manager"||i.role==="vendedor"||i.role==="cliente")}}function Za(n,e){if(n&1){let i=y();o(0,"div")(1,"app-show-factura",34),p("volverMostrar",function(r){g(i);let c=u();return _(c.volverListaFacturas(r))})("encenderRegimenEditar",function(r){g(i);let c=u();return _(c.encenderRegimenEditar(r))}),a()()}if(n&2){let i=u();l(),d("mostrarFacturaId",i.mostrarFacturaId)("facturaMostrar",i.facturaMostrar)}}function Ja(n,e){if(n&1){let i=y();o(0,"div")(1,"app-crear-factura",35),p("volverMostrar",function(r){g(i);let c=u();return _(c.volverListaFacturas(r))}),a()()}if(n&2){let i=u();l(),d("regimenUpdate",i.regimenUpdate)("updateFacturaId",i.mostrarFacturaId)}}function Xa(n,e){if(n&1){let i=y();o(0,"div")(1,"app-crear-factura-control",36),p("volverMostrar",function(r){g(i);let c=u();return _(c.volverListaFacturas(r))}),a()()}if(n&2){let i=u();l(),d("controlarFacturaId",i.mostrarFacturaId)("facturaMostrar",i.facturaMostrar)}}var _i=class n{constructor(e,i){this.facturasService=e;this.sanitizer=i}headers={numero:"Numero",nombre:"Client",suma:"Suma",direccion:"Direccion",estado:"Estado",created:"Creado",accion:"Acci\xF3n"};direccion=["entrante","saliente"];facturas=[];ngOnInit(){this.obtenerListaFacturas()}mostrarFacturaId=0;facturaMostrar;regimenMostrar=!1;regimenCrear=!1;regimenUpdate=!1;regimenControlar=!1;role=localStorage.getItem("role");usuario=localStorage.getItem("usuario");mostrarFactura(e){this.mostrarFacturaId=e,this.regimenMostrar=!0,this.regimenUpdate=!1,this.regimenCrear=!1,this.regimenControlar=!1;let i=this.facturas.find(t=>t.factura_id==e);i&&(this.facturaMostrar=i)}volverListaFacturas(e){this.regimenMostrar=!1,this.regimenCrear=!1,this.regimenUpdate=!1,this.regimenControlar=!1,e&&this.obtenerListaFacturas()}crearNuevaFactura(){this.regimenCrear=!0,this.regimenMostrar=!1,this.regimenUpdate=!1,this.regimenControlar=!1}encenderRegimenEditar(e){e&&(this.regimenUpdate=!0,this.regimenMostrar=!1,this.regimenCrear=!1,this.regimenControlar=!1)}controlarFactura(e){this.regimenUpdate=!1,this.regimenMostrar=!1,this.regimenCrear=!1,this.regimenControlar=!0,this.mostrarFacturaId=e}obtenerListaFacturas(){this.facturasService.getFacturas().subscribe(e=>{this.facturas=e,this.applyFilter()},e=>{console.log("Error data de producto",e)}),console.log(this.facturas)}itemsPerPage=8;currentPage=1;totalPages=1;facturasFiltrated=[];facturasFilteredPorRole=[];facturasPaginated=[];clientSearch="";direccionSearch=-1;statusSearch=-1;applyFilter(){if(console.log("filtr",this.clientSearch,this.direccionSearch,this.statusSearch),this.clientSearch||this.direccionSearch>-1||this.statusSearch>-1){console.log(this.clientSearch,this.direccionSearch,this.statusSearch);let e,i;this.direccionSearch>-1&&(e=this.direccionSearch==1),this.statusSearch>-1&&(i=this.statusSearch==1),console.log(this.facturas);let t=this.facturas.filter(r=>r.usuario_cliente&&r.usuario_cliente.u_nombre.toLocaleLowerCase().includes(this.clientSearch.toLocaleLowerCase()));console.log(t),t=t.reduce((r,c)=>{let f=e===void 0||c.f_tipo==e,b=i===void 0||c.f_aceptado==i;return f&&b&&r.push(c),r},[]),this.facturasFiltrated=t}else this.facturasFiltrated=[...this.facturas];this.filteredPorRole(),this.totalPages=Math.ceil(this.facturasFilteredPorRole.length/this.itemsPerPage),this.currentPage=1,this.facturasPaginated=this.getPaginatedData()}filteredPorRole(){if(this.usuario){let e=+this.usuario;this.role=="vendedor"||this.role=="cliente"?this.facturasFilteredPorRole=this.facturasFiltrated.filter(i=>i.f_id_cliente&&i.f_id_cliente==e):this.role=="receptor"?this.facturasFilteredPorRole=this.facturasFiltrated.filter(i=>i.f_tipo==!1):this.role=="recogedor"?this.facturasFilteredPorRole=this.facturasFiltrated.filter(i=>i.f_tipo==!0):this.facturasFilteredPorRole=[...this.facturasFiltrated]}else this.facturasFilteredPorRole=[...this.facturasFiltrated];console.log(this.facturasFilteredPorRole)}getPaginatedData(){let e=(this.currentPage-1)*this.itemsPerPage,i=e+this.itemsPerPage;return this.facturasFilteredPorRole.slice(e,i)}prevPage(){this.currentPage>1&&(this.currentPage--,this.facturasPaginated=this.getPaginatedData())}nextPage(){this.currentPage<this.totalPages&&(this.currentPage++,this.facturasPaginated=this.getPaginatedData())}static \u0275fac=function(i){return new(i||n)(h(mt),h(rt))};static \u0275cmp=E({type:n,selectors:[["app-facturas"]],standalone:!0,features:[M],decls:11,vars:4,consts:[[1,"mobile-menu"],[1,"d-flex"],[1,"sidebar"],[1,"info-container"],[1,"card-block"],[4,"ngIf"],[1,"form","mt-2","mb-2"],[1,"form-group","row"],["for","filterDesc",1,"col-form-label","col-3","col-md-2","col-lg-1","text-sm-right"],[1,"col-9","col-md-9","col-lg-3"],["type","text","name","filterDesc","id","filterDesc","placeholder","buscamos ...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"row","col-12","col-lg-8"],["for","direccionSearch",1,"col-3","col-sm-2","text-sm-right","pt-2","pe-0"],[1,"col-9","col-sm-4","mt-2"],["name","direccionSearch","id","direccionSearch",1,"w-100",3,"ngModelChange","ngModel"],[3,"value"],["for","statusSearch",1,"col-3","col-sm-2","text-sm-right","pt-2","pe-0"],["name","statusSearch","id","statusSearch",1,"w-100",3,"ngModelChange","ngModel"],["class","table-responsive",4,"ngIf"],[1,"table-responsive"],[1,"table","table-striped","table-primary","table-bordered"],[1,"table-group-divider"],[4,"ngFor","ngForOf"],[1,"pagination-controls","mb-2"],[3,"click","disabled"],[1,"ms-3","me-3"],[3,"click"],["style","color:green",4,"ngIf"],[2,"color","green"],["class","btn btn-AW btn-warning",3,"click",4,"ngIf"],["class","btn btn-AW btn-success",4,"ngIf"],[1,"btn","btn-AW","btn-warning",3,"click"],[1,"btn","btn-AW","btn-success"],[1,"btn","btn-success","btn-AW",3,"click"],[3,"volverMostrar","encenderRegimenEditar","mostrarFacturaId","facturaMostrar"],[3,"volverMostrar","regimenUpdate","updateFacturaId"],[3,"volverMostrar","controlarFacturaId","facturaMostrar"]],template:function(i,t){i&1&&(q(0),v(1,"app-menu-mobile",0),Y(),o(2,"div",1)(3,"div",2),v(4,"app-menu"),a(),o(5,"div",3)(6,"div",4),m(7,Ya,30,11,"div",5)(8,Za,2,2,"div",5)(9,Ja,2,2,"div",5)(10,Xa,2,2,"div",5),a()()()),i&2&&(l(7),d("ngIf",!t.regimenMostrar&&!t.regimenCrear&&!t.regimenUpdate&&!t.regimenControlar),l(),d("ngIf",t.regimenMostrar),l(),d("ngIf",t.regimenCrear||t.regimenUpdate),l(),d("ngIf",t.regimenControlar))},dependencies:[P,H,w,qt,U,X,ge,_e,k,de,O,J,G,fe,me,mi,ue,hi,gi],styles:["@media screen and (max-width: 767px){table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:2vw}}"]})};var vi=class n{transform(e,i,t){let r=i?i.toLocaleLowerCase():null;return r&&!t?e.filter(c=>c.u_nombre.toLocaleLowerCase().includes(r)):r&&t?e.filter(c=>c.u_role==t&&c.u_nombre.toLocaleLowerCase().includes(r)):!r&&t?e.filter(c=>c.u_role==t):e}static \u0275fac=function(i){return new(i||n)};static \u0275pipe=Wt({name:"iusuariosFilter",type:n,pure:!0,standalone:!0})};var ze=class n{constructor(e,i){this.http=e;this.authService=i}usuariosUrl="http://localhost:8080/api/usuarios";getUsuarios(){return this.authService.checkTokenExpiration()?this.http.get(this.usuariosUrl).pipe($(e=>e)):D}createUsuario(e){return this.http.post(this.usuariosUrl,e)}deleteUsuario(e){let i=`${this.usuariosUrl}/${e}`;return this.http.delete(i)}actualizarUsuario(e,i){let t=this.getHeaderAuth(),r=`${this.usuariosUrl}/${e}`;return this.authService.checkTokenExpiration()?(console.log("update"),this.http.put(r,i,{headers:t})):(console.log("no update"),D)}getHeaderAuth(){let e=this.authService.getToken();return new ce({Authorization:`Bearer ${e}`})}static \u0275fac=function(i){return new(i||n)(A(te),A(T))};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})};function Qa(n,e){n&1&&(o(0,"span",18),s(1,"Active"),a())}function Ka(n,e){if(n&1){let i=y();o(0,"button",23),p("click",function(){g(i);let r=u(2);return _(r.deleteUsuario(r.usuarioMostrar.usuario_id))}),s(1,"Desactivar"),a()}}function es(n,e){if(n&1){let i=y();o(0,"div",19)(1,"p"),s(2),a(),o(3,"div",20),m(4,Ka,2,0,"button",21),o(5,"button",22),p("click",function(){g(i);let r=u();return _(r.popupInterruptor())}),s(6,"Cerrar "),a()()()}if(n&2){let i=u();l(2),S("Desea desactivar usuario: ",i.usuarioMostrar.u_nombre,""),l(2),d("ngIf",i.usuarioMostrar.usuario_id)}}var Ci=class n{constructor(e){this.usuarioService=e}usuarioMostrar;volverMostrar=new V;encenderRegimenEditar=new V;usuarioParaEditar=null;regimenEditar=!1;deleteUsuario(e){e?this.usuarioService.deleteUsuario(e).subscribe(()=>{console.log(`Usuario with  id ${e} deleted successfully.`),this.volverMostrar.emit(!0)},i=>{console.error(`Error deleting evento with id ${e}: ${i}`)}):console.error(`Evento with title ${e} has not found.`)}editarUsuario(){console.log("editar"),this.encenderRegimenEditar.emit(!0)}volverMostrarUsuario(){this.volverMostrar.emit(!1)}isPopupDisactiveVisible=!1;popupInterruptor(){this.isPopupDisactiveVisible=!this.isPopupDisactiveVisible}static \u0275fac=function(i){return new(i||n)(h(ze))};static \u0275cmp=E({type:n,selectors:[["app-show-usuario"]],inputs:{usuarioMostrar:"usuarioMostrar"},outputs:{volverMostrar:"volverMostrar",encenderRegimenEditar:"encenderRegimenEditar"},standalone:!0,features:[M],decls:51,vars:9,consts:[[1,"wrapper"],[1,"d-flex","mt-3","mb-5","justify-content-between"],[1,"ms-5","mt-2"],[1,"btn","btn-info","btn-AW",3,"click"],[1,"row","d-flex"],[1,""],[1,"table","table-striped","table-bordered"],[1,"table-primary"],[1,"mobileInvisibleTable"],["style","font-weight: 600; color: green;",4,"ngIf"],[1,"icon","blue",3,"click"],[1,"btn","btn-danger","btn-AW"],[1,"icon","red",3,"click"],[1,"btn","btn-warning","btn-AW"],[1,"d-flex"],[1,"icon","blue","ms-2","mobileVisible",3,"click"],[1,"icon","red","ms-2","mobileVisible",3,"click"],["class","popup2",4,"ngIf"],[2,"font-weight","600","color","green"],[1,"popup2"],[1,"d-flex","buttons","justify-content-around"],["class","btn btn-AW btn-danger m-auto",3,"click",4,"ngIf"],[1,"btn","btn-AW","btn-dark","m-auto",3,"click"],[1,"btn","btn-AW","btn-danger","m-auto",3,"click"]],template:function(i,t){i&1&&(o(0,"div",0)(1,"div",1)(2,"h1"),s(3),a(),o(4,"div",2)(5,"button",3),p("click",function(){return t.volverMostrarUsuario()}),s(6,"Volver"),a()()(),o(7,"div",4)(8,"div",5)(9,"table",6)(10,"thead",7)(11,"tr")(12,"th"),s(13,"Login"),a(),o(14,"th"),s(15,"Role"),a(),o(16,"th"),s(17,"Active"),a(),o(18,"th"),s(19,"Created at"),a(),o(20,"th",8),s(21,"Editar"),a(),o(22,"th",8),s(23,"Borrar"),a()()(),o(24,"tbody")(25,"tr")(26,"td"),s(27),a(),o(28,"td"),s(29),a(),o(30,"td"),m(31,Qa,2,0,"span",9),a(),o(32,"td"),s(33),Ue(34,"date"),a(),o(35,"td",8)(36,"div",10),p("click",function(){return t.usuarioMostrar.usuario_id?t.editarUsuario():null}),o(37,"button",11),s(38,"Editar"),a()()(),o(39,"td",8)(40,"div",12),p("click",function(){return t.popupInterruptor()}),o(41,"button",13),s(42,"Desactivar"),a()()()()()(),o(43,"div",14)(44,"div",15),p("click",function(){return t.usuarioMostrar.usuario_id?t.editarUsuario():null}),o(45,"button",11),s(46,"Editar"),a()(),o(47,"div",16),p("click",function(){return t.popupInterruptor()}),o(48,"button",13),s(49,"Desactivar"),a()()()()()(),m(50,es,7,2,"div",17)),i&2&&(l(3),C(t.usuarioMostrar.u_nombre),l(24),S(" ",t.usuarioMostrar.u_login,""),l(2),S(" ",t.usuarioMostrar.u_role,""),l(2),d("ngIf",t.usuarioMostrar.u_active),l(2),S(" ",$t(34,6,t.usuarioMostrar.created_at,"dd-MM-yyyy"),""),l(17),d("ngIf",t.isPopupDisactiveVisible))},dependencies:[P,w,qt]})};var Dt=(n,e)=>({"is-valid":n,"is-invalid":e});function ts(n,e){n&1&&(o(0,"h1",39),s(1,"Crear nuevo Usuario"),a())}function is(n,e){n&1&&(o(0,"h1",39),s(1,"Editar usuario"),a())}function ns(n,e){n&1&&(o(0,"div",6)(1,"button",40),s(2,"Crear"),a()())}function rs(n,e){n&1&&(o(0,"div",6)(1,"button",40),s(2,"Editar"),a()())}function os(n,e){n&1&&(o(0,"div",41),s(1," * Este campo es obligatorio! "),a())}function as(n,e){n&1&&(o(0,"div",41),s(1," * Este campo es obligatorio! "),a())}function ss(n,e){n&1&&(o(0,"div",42),s(1," Contrase\xF1a es obligatoria. "),a())}function ls(n,e){n&1&&(o(0,"div",42),s(1," La contrase\xF1a debe tener al menos 8 caracteres "),a())}function cs(n,e){n&1&&(o(0,"div",42),s(1," La contrase\xF1a debe contener letras, n\xFAmeros y caracteres especiales "),a())}function ds(n,e){n&1&&(o(0,"div",43),s(1," Las contrase\xF1as no coinciden "),a())}function us(n,e){n&1&&(o(0,"div",44),s(1," * Este campo es obligatorio! "),a())}function ms(n){let e=n.get("u_password")?.value,i=n.get("u_password2")?.value;return e===i?null:{match:!0}}function ps(n){let e=n.value,i=/\d/.test(e),t=/[a-zA-Z]/.test(e),r=/[!@#$%^&*(),.?":{}|<>]/.test(e);return!(e.length>=8)||!i||!t||!r?{passwordStrength:!0}:null}var bi=class n{constructor(e,i){this.fb=e;this.usuarioService=i}regimenUpdate=!1;usuarioParaEditar=null;volverMostrar=new V;formCreateUser;sendDatos(){if(this.formCreateUser.valid){let e={u_nombre:this.formCreateUser.value.u_nombre,u_login:this.formCreateUser.value.u_login,u_password:this.formCreateUser.value.passGroup.u_password,u_role:this.formCreateUser.value.u_role,u_active:this.formCreateUser.value.u_active};this.regimenUpdate?this.usuarioParaEditar&&this.usuarioParaEditar.usuario_id&&(this.usuarioService.actualizarUsuario(this.usuarioParaEditar.usuario_id,e).subscribe(i=>this.volverMostrar.emit(!0)),console.log("editado: "+e)):(this.usuarioService.createUsuario(e).subscribe(i=>this.volverMostrar.emit(!0)),console.log(e))}else console.log("form no es validate"),this.formCreateUser.markAllAsTouched()}ngOnInit(){this.formCreateUser=this.fb.group({u_nombre:["",I.required],u_login:["",I.required],passGroup:this.fb.group({u_password:["",[I.required,I.minLength(8),ps]],u_password2:["",I.required]},{validator:ms}),u_role:["",I.required],u_active:[!0],receiveInfo:[!0]}),this.regimenUpdate&&(console.log("regimen editar usuario:"+this.regimenUpdate),this.usuarioParaEditar&&this.formCreateUser.patchValue({u_nombre:this.usuarioParaEditar.u_nombre,u_login:this.usuarioParaEditar.u_login,u_password:this.usuarioParaEditar.u_password,u_password2:this.usuarioParaEditar.u_password,u_role:this.usuarioParaEditar.u_role,u_active:!!this.usuarioParaEditar.u_active}))}volverMostrarUsuario(){this.volverMostrar.emit(!1)}static \u0275fac=function(i){return new(i||n)(h(He),h(ze))};static \u0275cmp=E({type:n,selectors:[["app-crear-usuario"]],inputs:{regimenUpdate:"regimenUpdate",usuarioParaEditar:"usuarioParaEditar"},outputs:{volverMostrar:"volverMostrar"},standalone:!0,features:[M],decls:72,vars:34,consts:[[1,"wrapper"],[3,"ngSubmit","formGroup"],[1,"d-flex","mt-3","mb-5","justify-content-around","row"],["class","col-12 col-sm-6",4,"ngIf"],[1,"d-flex","mt-2","justify-content-between","col-12","col-sm-6"],["class","ms-2 me-2",4,"ngIf"],[1,"ms-2","me-2"],[1,"btn","btn-info","btn-AW",3,"click"],[1,"mb-3"],["for","nombre",1,"form-label-AW"],[1,"row"],[1,"col-12","col-md-6"],["type","text","formControlName","u_nombre","placeholder","Nombre...",1,"form-control","col-md-6",3,"ngClass"],["class","invalid-feedback-AW col-md-4 col-12 ps-3",4,"ngIf"],["for","login",1,"form-label-AW"],["type","text","formControlName","u_login","placeholder","Login...",1,"form-control",3,"ngClass"],["formGroupName","passGroup"],["for","contrsena",1,"form-label-AW"],["type","password","formControlName","u_password","placeholder","Password...",1,"form-control","col-md-6",3,"ngClass"],[1,"col-md-4","col-12"],["class","invalid-feedback-AW ps-3",4,"ngIf"],[1,"d-flex","col-md-6"],["type","password","formControlName","u_password2","placeholder","Password...",1,"form-control","col-md-6",3,"ngClass"],["class","invalid-feedback-AW col-md-4 ps-3",4,"ngIf"],["for","role",1,"form-label-AW"],["formControlName","u_role",1,"form-control","col-md-6",3,"ngClass"],["value",""],["value","admin"],["value","vendedor"],["value","cliente"],["value","receptor"],["value","recogedor"],["value","manager"],["class","invalid-feedback-AW col-12 col-md-4 ps-3",4,"ngIf"],[1,"form-check","form-check-inline"],["type","radio","formControlName","u_active","id","activeTrue",1,"form-check-input",3,"value"],["for","activeTrue",1,"form-check-label","form-label-AW"],["type","radio","formControlName","u_active","id","activeFalse",1,"form-check-input",3,"value"],["for","activeFalse",1,"form-check-label","form-label-AW"],[1,"col-12","col-sm-6"],["type","submit",1,"btn","btn-primary","btn-AW"],[1,"invalid-feedback-AW","col-md-4","col-12","ps-3"],[1,"invalid-feedback-AW","ps-3"],[1,"invalid-feedback-AW","col-md-4","ps-3"],[1,"invalid-feedback-AW","col-12","col-md-4","ps-3"]],template:function(i,t){if(i&1&&(o(0,"div",0)(1,"form",1),p("ngSubmit",function(){return t.sendDatos()}),o(2,"div",2),m(3,ts,2,0,"h1",3)(4,is,2,0,"h1",3),o(5,"div",4),m(6,ns,3,0,"div",5)(7,rs,3,0,"div",5),o(8,"div",6)(9,"button",7),p("click",function(){return t.volverMostrarUsuario()}),s(10,"Volver"),a()()()(),o(11,"div",8)(12,"label",9),s(13,"Nombre"),a(),o(14,"div",10)(15,"div",11),v(16,"input",12),a(),m(17,os,2,0,"div",13),a()(),o(18,"div",8)(19,"label",14),s(20,"Login"),a(),o(21,"div",10)(22,"div",11),v(23,"input",15),a(),m(24,as,2,0,"div",13),a()(),o(25,"div",16)(26,"div",8)(27,"label",17),s(28,"Contrase\xF1a"),a(),o(29,"div",10)(30,"div",11),v(31,"input",18),a(),o(32,"div",19),m(33,ss,2,0,"div",20)(34,ls,2,0,"div",20)(35,cs,2,0,"div",20),a()()(),o(36,"div",8)(37,"label",17),s(38," Repite su contrase\xF1a "),a(),o(39,"div",10)(40,"div",21),v(41,"input",22),a(),m(42,ds,2,0,"div",23),a()()(),o(43,"div",8)(44,"label",24),s(45,"Role"),a(),o(46,"div",10)(47,"div",11)(48,"select",25)(49,"option",26),s(50,"-- Elije un role --"),a(),o(51,"option",27),s(52,"Admin"),a(),o(53,"option",28),s(54,"Vendedor"),a(),o(55,"option",29),s(56,"Cliente"),a(),o(57,"option",30),s(58,"Receptor"),a(),o(59,"option",31),s(60,"Recojedor"),a(),o(61,"option",32),s(62,"Manager"),a()()(),m(63,us,2,0,"div",33),a()(),o(64,"div",34),v(65,"input",35),o(66,"label",36),s(67," Usuario active "),a()(),o(68,"div",34),v(69,"input",37),o(70,"label",38),s(71," Usuario inactive "),a()()()()),i&2){let r,c,f,b,x,ne,re,Q,B,be,K,Ie;l(),d("formGroup",t.formCreateUser),l(2),d("ngIf",!t.regimenUpdate),l(),d("ngIf",t.regimenUpdate),l(2),d("ngIf",!t.regimenUpdate),l(),d("ngIf",t.regimenUpdate),l(9),d("ngClass",ee(19,Dt,((r=t.formCreateUser.get("u_nombre"))==null?null:r.valid)&&((r=t.formCreateUser.get("u_nombre"))==null?null:r.touched),((r=t.formCreateUser.get("u_nombre"))==null?null:r.invalid)&&((r=t.formCreateUser.get("u_nombre"))==null?null:r.touched))),l(),d("ngIf",((c=t.formCreateUser.get("u_nombre"))==null?null:c.invalid)&&((c=t.formCreateUser.get("u_nombre"))==null?null:c.touched)),l(6),d("ngClass",ee(22,Dt,((f=t.formCreateUser.get("u_login"))==null?null:f.valid)&&((f=t.formCreateUser.get("u_login"))==null?null:f.touched),((f=t.formCreateUser.get("u_login"))==null?null:f.invalid)&&((f=t.formCreateUser.get("u_login"))==null?null:f.touched))),l(),d("ngIf",((b=t.formCreateUser.get("u_login"))==null?null:b.invalid)&&((b=t.formCreateUser.get("u_login"))==null?null:b.touched)),l(7),d("ngClass",ee(25,Dt,((x=t.formCreateUser.get("passGroup"))==null||(x=x.get("u_password"))==null?null:x.valid)&&((x=t.formCreateUser.get("passGroup"))==null||(x=x.get("u_password"))==null?null:x.touched),((x=t.formCreateUser.get("passGroup"))==null||(x=x.get("u_password"))==null?null:x.invalid)&&((x=t.formCreateUser.get("passGroup"))==null||(x=x.get("u_password"))==null?null:x.touched))),l(2),d("ngIf",((ne=t.formCreateUser.get("passGroup.u_password"))==null||ne.errors==null?null:ne.errors.required)&&((ne=t.formCreateUser.get("passGroup.u_password"))==null?null:ne.touched)),l(),d("ngIf",((re=t.formCreateUser.get("passGroup.u_password"))==null||re.errors==null?null:re.errors.minlength)&&((re=t.formCreateUser.get("passGroup.u_password"))==null?null:re.touched)),l(),d("ngIf",((Q=t.formCreateUser.get("passGroup.u_password"))==null||Q.errors==null?null:Q.errors.passwordStrength)&&((Q=t.formCreateUser.get("passGroup.u_password"))==null?null:Q.touched)&&!(!((Q=t.formCreateUser.get("passGroup.u_password"))==null||Q.errors==null)&&Q.errors.required)),l(6),d("ngClass",ee(28,Dt,((B=t.formCreateUser.get("passGroup.u_password2"))==null?null:B.valid)&&((B=t.formCreateUser.get("passGroup.u_password2"))==null?null:B.touched),((B=t.formCreateUser.get("passGroup.u_password2"))==null?null:B.invalid)&&((B=t.formCreateUser.get("passGroup.u_password2"))==null?null:B.touched)||((B=t.formCreateUser.get("passGroup"))==null||B.errors==null?null:B.errors.match)&&((B=t.formCreateUser.get("passGroup.u_password2"))==null?null:B.touched))),l(),d("ngIf",((be=t.formCreateUser.get("passGroup"))==null||be.errors==null?null:be.errors.match)&&((be=t.formCreateUser.get("passGroup.u_password2"))==null?null:be.touched)),l(6),d("ngClass",ee(31,Dt,((K=t.formCreateUser.get("u_role"))==null?null:K.valid)&&((K=t.formCreateUser.get("u_role"))==null?null:K.touched),((K=t.formCreateUser.get("u_role"))==null?null:K.invalid)&&((K=t.formCreateUser.get("u_role"))==null?null:K.touched))),l(15),d("ngIf",((Ie=t.formCreateUser.get("u_role"))==null?null:Ie.invalid)&&((Ie=t.formCreateUser.get("u_role"))==null?null:Ie.touched)),l(2),d("value",!0),l(4),d("value",!1)}},dependencies:[U,X,ge,_e,k,de,Hi,O,J,Ge,We,Qe,ai,P,zt,w],styles:["#form-control-AW[_ngcontent-%COMP%]{width:50%}.invalid-feedback-AW[_ngcontent-%COMP%]{display:block;margin-top:.25rem;font-size:.875em;color:var(--bs-form-invalid-color)}.form-label-AW[_ngcontent-%COMP%]{font-weight:700}"]})};function fs(n,e){if(n&1&&(o(0,"option",18),s(1),a()),n&2){let i=e.$implicit;d("value",i),l(),C(i)}}function hs(n,e){n&1&&(o(0,"span",25),s(1,"Active"),a())}function gs(n,e){if(n&1){let i=y();o(0,"tr")(1,"td",23),p("click",function(){let r,c=g(i).$implicit,f=u(3);return _(f.mostrarUsuario((r=c.usuario_id)!==null&&r!==void 0?r:1))}),s(2),a(),o(3,"td"),s(4),a(),o(5,"td"),s(6),a(),o(7,"td"),m(8,hs,2,0,"span",24),a()()}if(n&2){let i=e.$implicit;l(2),C(i.u_nombre),l(2),C(i.u_login),l(2),C(i.u_role),l(2),d("ngIf",i.u_active)}}function _s(n,e){if(n&1&&(o(0,"div",19)(1,"table",20)(2,"thead")(3,"tr")(4,"th"),s(5),a(),o(6,"th"),s(7),a(),o(8,"th"),s(9),a(),o(10,"th"),s(11),a()()(),o(12,"tbody",21),m(13,gs,9,4,"tr",22),Ue(14,"iusuariosFilter"),a()()()),n&2){let i=u(2);l(5),C(i.headers.nombre),l(2),C(i.headers.login),l(2),C(i.headers.role),l(2),C(i.headers.active),l(2),d("ngForOf",Qi(14,5,i.usuarios,i.usuarioSearch,i.roleSearch))}}function vs(n,e){if(n&1){let i=y();o(0,"div")(1,"form",6)(2,"div",7)(3,"label",8),s(4," Filtro: "),a(),o(5,"div",9)(6,"input",10),W("ngModelChange",function(r){g(i);let c=u();return j(c.usuarioSearch,r)||(c.usuarioSearch=r),_(r)}),a()(),o(7,"label",11),s(8," Role: "),a(),o(9,"div",12)(10,"select",13),W("ngModelChange",function(r){g(i);let c=u();return j(c.roleSearch,r)||(c.roleSearch=r),_(r)}),o(11,"option",14),s(12,"Seleccione una role"),a(),m(13,fs,2,2,"option",15),a()()()(),m(14,_s,15,9,"div",16),o(15,"div")(16,"button",17),p("click",function(){g(i);let r=u();return _(r.crearNuevoUsuario())}),s(17,"Crear nuevo Usuario"),a()()()}if(n&2){let i=u();l(6),L("ngModel",i.usuarioSearch),l(4),L("ngModel",i.roleSearch),l(3),d("ngForOf",i.roles),l(),d("ngIf",i.usuarios&&i.usuarios.length)}}function Cs(n,e){if(n&1){let i=y();o(0,"div")(1,"app-show-usuario",26),p("volverMostrar",function(r){g(i);let c=u();return _(c.volverListaUsuarias(r))})("encenderRegimenEditar",function(){g(i);let r=u();return _(r.encenderRegimenEditar(!0))}),a()()}if(n&2){let i=u();l(),d("usuarioMostrar",i.usuarioMostrar)}}function bs(n,e){if(n&1){let i=y();o(0,"div")(1,"app-crear-usuario",27),p("volverMostrar",function(r){g(i);let c=u();return _(c.volverListaUsuarias(r))}),a()()}if(n&2){let i=u();l(),d("regimenUpdate",i.regimenUpdate)("usuarioParaEditar",i.usuarioMostrar)}}var yi=class n{constructor(e,i){this.usuariosService=e;this.sanitizer=i}headers={nombre:"Nombre",login:"Login",role:"Role",active:"Active"};roles=["admin","vendedor","client","receptor","reponedor","manager"];usuarios=[];ngOnInit(){this.obtenerListaUsuarios()}usuarioSearch="";roleSearch="";mostrarUsuarioId=0;usuarioMostrar;regimenMostrar=!1;regimenCrear=!1;regimenUpdate=!1;mostrarUsuario(e){let i=this.usuarios.find(t=>t.usuario_id==e);i?this.usuarioMostrar=i:console.log("Error: no hay usuario con este id: ",e),this.regimenMostrar=!0,this.regimenUpdate=!1}crearNuevoUsuario(){this.regimenCrear=!0,this.regimenUpdate=!1}volverListaUsuarias(e){this.regimenMostrar=!1,this.regimenCrear=!1,this.regimenUpdate=!1,e&&this.obtenerListaUsuarios()}encenderRegimenEditar(e){console.log("flag"),e&&(this.regimenUpdate=!0,this.regimenMostrar=!1,this.regimenCrear=!1)}obtenerListaUsuarios(){this.usuariosService.getUsuarios().subscribe(e=>{this.usuarios=e},e=>{console.log("Error data de producto",e)}),console.log(this.usuarios)}static \u0275fac=function(i){return new(i||n)(h(ze),h(rt))};static \u0275cmp=E({type:n,selectors:[["app-usuarios"]],standalone:!0,features:[M],decls:10,vars:3,consts:[[1,"mobile-menu"],[1,"d-flex"],[1,"sidebar"],[1,"info-container"],[1,"card-block"],[4,"ngIf"],[1,"form","mt-3","mb-3"],[1,"form-group","row"],["for","filterDesc",1,"col-form-label","col-2","col-sm-1","col-lg-1","text-sm-right","fw-semibold"],[1,"col-9","col-sm-5","col-lg-4","pe-5"],["type","text","name","filterDesc","id","filterDesc","placeholder","filtramos por...",1,"form-control",3,"ngModelChange","ngModel"],["for","roleSarch",1,"col-form-label","col-2","col-sm-1","col-lg-1","text-sm-right","fw-semibold"],[1,"col-9","col-sm-5","col-lg-4","mt-2"],["name","roleSearch","id","roleSearch",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["class","table-responsive",4,"ngIf"],[1,"btn","btn-info",3,"click"],[3,"value"],[1,"table-responsive"],[1,"table","table-striped","table-primary","table-bordered"],[1,"table-group-divider"],[4,"ngFor","ngForOf"],[3,"click"],["style","font-weight: 600; color: green;",4,"ngIf"],[2,"font-weight","600","color","green"],[3,"volverMostrar","encenderRegimenEditar","usuarioMostrar"],[3,"volverMostrar","regimenUpdate","usuarioParaEditar"]],template:function(i,t){i&1&&(q(0),v(1,"app-menu-mobile",0),Y(),o(2,"div",1)(3,"div",2),v(4,"app-menu"),a(),o(5,"div",3)(6,"div",4),m(7,vs,18,4,"div",5)(8,Cs,2,1,"div",5)(9,bs,2,2,"div",5),a()()()),i&2&&(l(7),d("ngIf",!t.regimenMostrar&&!t.regimenCrear&&!t.regimenUpdate),l(),d("ngIf",t.regimenMostrar),l(),d("ngIf",t.regimenCrear||t.regimenUpdate))},dependencies:[P,H,w,U,X,ge,_e,k,de,O,J,G,fe,Ci,vi,bi,ue,me]})};var Si=class n{static \u0275fac=function(i){return new(i||n)};static \u0275cmp=E({type:n,selectors:[["app-inicio"]],standalone:!0,features:[M],decls:14,vars:0,consts:[[1,"mobile-menu"],[1,"d-flex"],[1,"sidebar"],[1,"info-container","AW-center"],[1,"d-flex","img","m-auto","pt-5"],["src","https://omnigena.info/img/logo/1a_logotype.jpg",1,"AW-img"],[1,"mt-5","m-auto"],[1,"mt-4","AW-center"],[1,"mt-1"]],template:function(i,t){i&1&&(q(0),v(1,"app-menu-mobile",0),Y(),o(2,"div",1)(3,"div",2),v(4,"app-menu"),a(),o(5,"div",3)(6,"div",4),v(7,"img",5),a(),o(8,"h1",6),s(9,"BIENVENIDO a ALMACEN"),a(),o(10,"h5",7),s(11,"V. 1.2.13"),a(),o(12,"h5",8),s(13,"ALEXAWEB 2024"),a()()())},dependencies:[ue,me],styles:[".img[_ngcontent-%COMP%], .wrapper[_ngcontent-%COMP%]{align-items:center;justify-content:center;text-align:center}.AW-center[_ngcontent-%COMP%]{text-align:center}.AW-img[_ngcontent-%COMP%]{width:30%}.mobile-menu[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 767px){.sidebar[_ngcontent-%COMP%]{display:none}.mobile-menu[_ngcontent-%COMP%]{display:block}.AW-img[_ngcontent-%COMP%]{width:40%}}"]})};function ys(n,e){n&1&&(o(0,"div",10),s(1,"Contrase\xF1a o login son incorrectos"),a())}var xi=class n{constructor(e,i,t){this.authService=e;this.fb=i;this.router=t}u_login="";u_password="";formLogin;error=!1;login(){this.u_login=this.formLogin.value.u_login,this.u_password=this.formLogin.value.u_password,console.log(this.u_login,this.u_password),this.authService.login(this.u_login,this.u_password).subscribe(e=>{e.token?(this.authService.setToken(e.token),this.authService.setTokenExpiry(Date.now()+e.expires_in*1e3),this.authService.setRole(e.role),this.authService.setUsuario(e.usuario),this.router.navigate(["/inicio"])):console.log("Error: autorizaci\xF3n fallida")},e=>{console.log("Error en el proceso de login:",e),this.error=!0})}ngOnInit(){this.formLogin=this.fb.group({u_login:[""],u_password:[""],receiveInfo:[!0]})}static \u0275fac=function(i){return new(i||n)(h(T),h(He),h(he))};static \u0275cmp=E({type:n,selectors:[["app-login"]],standalone:!0,features:[M],decls:13,vars:2,consts:[[1,"body-AW"],[1,"main"],[1,"signup"],[3,"ngSubmit","formGroup"],[1,"d-flex"],["src","https://omnigena.info/img/logo/1a_logotype.png",1,"AW-logo","mt-5","m-auto"],["for","chk"],["type","text","formControlName","u_login","placeholder","Login","required",""],["type","password","formControlName","u_password","placeholder","Password","required",""],["class","AW-error",4,"ngIf"],[1,"AW-error"]],template:function(i,t){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),p("ngSubmit",function(){return t.login()}),o(4,"div",4),v(5,"img",5),a(),o(6,"label",6),s(7,"Log In"),a(),v(8,"input",7)(9,"input",8),m(10,ys,2,0,"div",9),o(11,"button"),s(12,"Login"),a()()()()()),i&2&&(l(3),d("formGroup",t.formLogin),l(7),d("ngIf",t.error))},dependencies:[U,X,k,O,J,At,Ge,We,Qe,P,w],styles:[".body-AW[_ngcontent-%COMP%]{margin:0;padding:0;display:flex;justify-content:center;align-items:center;min-height:100vh;font-family:Jost,sans-serif;background:linear-gradient(to bottom,#0f0c29,#302b63,#24243e)}.main[_ngcontent-%COMP%]{width:350px;height:500px;background:linear-gradient(to bottom,#0f0c29,#302b63,#24243e);overflow:hidden;border-radius:10px;box-shadow:5px 20px 50px #000}#chk[_ngcontent-%COMP%]{display:none}.signup[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}label[_ngcontent-%COMP%]{color:#fff;font-size:2.3em;justify-content:center;display:flex;margin:30px;font-weight:700;cursor:pointer;transition:.5s ease-in-out}input[_ngcontent-%COMP%]{width:60%;height:10px;background:#e0dede;justify-content:center;display:flex;margin:15px auto;padding:12px;border:none;outline:none;border-radius:5px}button[_ngcontent-%COMP%]{width:60%;height:40px;margin:10px auto;justify-content:center;display:block;color:#fff;background:#573b8a;font-size:1em;font-weight:700;outline:none;border:none;border-radius:5px;transition:.2s ease-in;cursor:pointer}button[_ngcontent-%COMP%]:hover{background:#6d44b8}.login[_ngcontent-%COMP%]{height:460px;background:#eee;border-radius:60%/10%;transform:translateY(-180px);transition:.8s ease-in-out}.login[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#573b8a;transform:scale(.6)}#chk[_ngcontent-%COMP%]:checked ~ .login[_ngcontent-%COMP%]{transform:translateY(-500px)}#chk[_ngcontent-%COMP%]:checked ~ .login[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{transform:scale(1)}#chk[_ngcontent-%COMP%]:checked ~ .signup[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{transform:scale(.6)}.AW-logo[_ngcontent-%COMP%]{width:40%}.AW-error[_ngcontent-%COMP%]{color:#fd7777;text-align:center}"]})};var Fe=class n{constructor(e,i){this.router=e;this.authService=i}canActivate(){return this.authService.isAuthenticated()?!0:(this.router.navigate(["/login"]),!1)}static \u0275fac=function(i){return new(i||n)(A(he),A(T))};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ei=class n{constructor(e,i){this.authService=e;this.router=i}canActivate(e){let i=e.data.roles,t=this.authService.getRole();return i.includes(t)?!0:(this.router.navigate(["/access-denied"]),!1)}static \u0275fac=function(i){return new(i||n)(A(T),A(he))};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})};var Mi=class n{constructor(e,i){this.http=e;this.authService=i}estadUrl="http://localhost:8080/api/estadistica";getEstadistica(){let e=this.getHeaderAuth();return console.log(e),this.authService.checkTokenExpiration()?this.http.get(this.estadUrl,{headers:e}).pipe($(i=>Array.isArray(i)?i[0]:i)):D}getEstadisticaPorFecha(e){let i=this.getHeaderAuth(),r=`http://localhost:8080/api/estadistica/${this.formatDateToDDMMYYYY(e)}`;return console.log(r),this.authService.checkTokenExpiration()?this.http.get(r,{headers:i}).pipe($(c=>Array.isArray(c)?c[0]:c)):D}getHeaderAuth(){let e=this.authService.getToken();return new ce({Authorization:`Bearer ${e}`})}formatDateToDDMMYYYY(e){let i=e.split("-"),t=i[0],r=i[1],c=i[2];return parseInt(`${c}${r}${t}`,10)}static \u0275fac=function(i){return new(i||n)(A(te),A(T))};static \u0275prov=N({token:n,factory:n.\u0275fac,providedIn:"root"})};function xs(n,e){if(n&1&&(o(0,"div",14)(1,"table",15)(2,"tbody")(3,"tr")(4,"td"),s(5,"Saldo de stock, euro"),a(),o(6,"td"),s(7),a()(),o(8,"tr")(9,"td"),s(10,"Volumen de stock, m3"),a(),o(11,"td"),s(12),a()(),o(13,"tr")(14,"td"),s(15,"Suma de compras hoy, euros"),a(),o(16,"td"),s(17),a()(),o(18,"tr")(19,"td"),s(20,"Suma de ventas hoy, euros"),a(),o(21,"td"),s(22),a()(),o(23,"tr")(24,"td"),s(25,"Suma de compras desde el comienzo de ese mes, euros"),a(),o(26,"td"),s(27),a()(),o(28,"tr")(29,"td"),s(30,"Suma de ventas desde el comienzo de ese mes, euros"),a(),o(31,"td"),s(32),a()(),o(33,"tr")(34,"td"),s(35,"Beneficios hoy, euros"),a(),o(36,"td"),s(37),a()(),o(38,"tr")(39,"td"),s(40,"Beneficios en este mes, euros"),a(),o(41,"td"),s(42),a()()()()()),n&2){let i=u();l(7),C(i.estadistica.e_suma_restos),l(5),C(i.estadistica.e_volumen_restos),l(5),C(i.estadistica.e_suma_compras_hoy),l(5),C(i.estadistica.e_suma_ventas_hoy),l(5),C(i.estadistica.e_suma_compras_mes),l(5),C(i.estadistica.e_suma_ventas_mes),l(5),C(i.estadistica.e_beneficios_hoy),l(5),C(i.estadistica.e_beneficios_mes)}}function Es(n,e){if(n&1&&(o(0,"div")(1,"span"),s(2),a()()),n&2){let i=e.$implicit;l(2),S(" ",i.p_nombre," ")}}function Ms(n,e){if(n&1&&(o(0,"div"),m(1,Es,3,1,"div",16),a()),n&2){let i=u();l(),d("ngForOf",i.estadistica.faltaMercancias)}}var Ii=class n{constructor(e){this.estadisticaService=e;let i=new Date;this.currentDate=i.toISOString().split("T")[0],console.log(this.currentDate)}currentDate="";estadistica;fechaHoy=!0;ngOnInit(){console.log("hoy?",this.fechaHoy),this.fechaHoy&&(console.log("cargamos"),this.obtenerEstadistica())}obtenerEstadistica(){this.estadisticaService.getEstadistica().subscribe(e=>{this.estadistica=e,console.log(this.estadistica)},e=>{console.log("Error data de producto",e)})}obtenerEstadisticaPorFecha(e,i){i.preventDefault(),this.fechaHoy=!1,this.estadisticaService.getEstadisticaPorFecha(e).subscribe(t=>{this.estadistica=t,console.log(this.estadistica)},t=>{console.log("Error data de producto",t)})}static \u0275fac=function(i){return new(i||n)(h(Mi))};static \u0275cmp=E({type:n,selectors:[["app-estadistica"]],standalone:!0,features:[M],decls:23,vars:3,consts:[["date",""],[1,"mobile-menu"],[1,"d-flex"],[1,"sidebar"],[1,"info-container"],[1,"row"],["id","leftPart",1,"order-2","order-sm-1","col-12","col-sm-8"],["class","table-responsive",4,"ngIf"],[4,"ngIf"],["id","RightPart",1,"order-1","order-sm-2","col-12","col-sm-4","row","justify-content-around"],[1,"form","ps-3","col-12"],[1,"pt-1"],["type","date","name","date","required","",1,"mb-2",3,"ngModelChange","ngModel"],[1,"btn","btn-info","mb-2",3,"click"],[1,"table-responsive"],[1,"table","table-striped","table-primary","table-bordered"],[4,"ngFor","ngForOf"]],template:function(i,t){if(i&1){let r=y();q(0),v(1,"app-menu-mobile",1),Y(),o(2,"div",2)(3,"div",3),v(4,"app-menu"),a(),o(5,"div",4)(6,"h1"),s(7,"Estad\xEDsticas del almac\xE9n"),a(),o(8,"div",5)(9,"div",6),m(10,xs,43,8,"div",7),o(11,"h2"),s(12,"No hay en stock:"),a(),m(13,Ms,2,1,"div",8),a(),o(14,"div",9)(15,"form",10)(16,"h5",11),s(17,"Seleccionar estad\xEDsticas por fecha"),a(),o(18,"input",12,0),W("ngModelChange",function(f){return g(r),j(t.currentDate,f)||(t.currentDate=f),_(f)}),a(),o(20,"div")(21,"button",13),p("click",function(f){g(r);let b=St(19);return _(t.obtenerEstadisticaPorFecha(b.value,f))}),s(22,"Obtener"),a()()()()()()()}i&2&&(l(10),d("ngIf",t.estadistica),l(3),d("ngIf",t.estadistica==null?null:t.estadistica.faltaMercancias),l(5),L("ngModel",t.currentDate))},dependencies:[ue,P,H,w,me,U,X,k,O,J,At,G,fe]})};function Is(n,e){if(n&1){let i=y();o(0,"button",14),p("click",function(){g(i);let r=u();return _(r.regimenTrasladarInterruptor())}),s(1," Trasladar"),a()}}function ws(n,e){if(n&1){let i=y();o(0,"button",15),p("click",function(){g(i);let r=u();return _(r.regimenTrasladarInterruptor())}),s(1," Terminar trasladar"),a()}}var wi=class n{constructor(e){this.lugaresService=e}lugares=[];lugaresFiltrado=[];productoSearch="";regimenTrasladar=!1;ngOnInit(){this.obtenerLugaresAlmacen()}obtenerLugaresAlmacen(){this.lugaresService.getLugares().subscribe(e=>{this.lugares=e,this.applyFilter(),console.log(this.lugares)},e=>{console.log("Error data de lugares",e)})}applyFilter(){console.log("filtr",this.productoSearch),this.productoSearch?(this.lugaresFiltrado=this.lugares.filter(e=>e.lugar_productoInfo.p_nombre&&e.lugar_productoInfo.p_nombre.toLocaleLowerCase().includes(this.productoSearch.toLocaleLowerCase())),console.log(this.lugaresFiltrado)):this.lugaresFiltrado=[...this.lugares]}regimenTrasladarInterruptor(){this.regimenTrasladar=!this.regimenTrasladar,console.log("Trasladar"+this.regimenTrasladar)}static \u0275fac=function(i){return new(i||n)(h($e))};static \u0275cmp=E({type:n,selectors:[["app-almacen"]],standalone:!0,features:[M],decls:17,vars:6,consts:[[1,"mobile-menu"],[1,"d-flex"],[1,"sidebar"],[1,"info-container"],[1,"mt-3","padding-mobile","row"],[1,"form","col-12","col-md-7"],[1,"form-group","d-flex","mb-3"],["for","filterDesc",1,"col-form-label","col-3","text-sm-right"],[1,"col-9"],["type","text","name","filterDesc","id","filterDesc","placeholder","buscamos...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"col-12","col-md-3","mb-3","d-flex","justify-content-around"],["class","btn btn-primary btn-AW col-6 col-md-12 m-auto",3,"click",4,"ngIf"],["class","btn btn-danger btn-AW col-6 col-md-12 m-auto",3,"click",4,"ngIf"],[3,"obtenerLugaresAlmacen","lugares","productoSearch","regimenTrasladar"],[1,"btn","btn-primary","btn-AW","col-6","col-md-12","m-auto",3,"click"],[1,"btn","btn-danger","btn-AW","col-6","col-md-12","m-auto",3,"click"]],template:function(i,t){i&1&&(q(0),v(1,"app-menu-mobile",0),Y(),o(2,"div",1)(3,"div",2),v(4,"app-menu"),a(),o(5,"div",3)(6,"div",4)(7,"form",5)(8,"div",6)(9,"label",7),s(10," Buscar "),a(),o(11,"div",8)(12,"input",9),W("ngModelChange",function(c){return j(t.productoSearch,c)||(t.productoSearch=c),c}),p("input",function(){return t.applyFilter()}),a()()()(),o(13,"div",10),m(14,Is,2,0,"button",11)(15,ws,2,0,"button",12),a()(),o(16,"app-almacen-show",13),p("obtenerLugaresAlmacen",function(){return t.obtenerLugaresAlmacen()}),a()()()),i&2&&(l(12),L("ngModel",t.productoSearch),l(2),d("ngIf",!t.regimenTrasladar),l(),d("ngIf",t.regimenTrasladar),l(),d("lugares",t.lugaresFiltrado)("productoSearch",t.productoSearch)("regimenTrasladar",t.regimenTrasladar))},dependencies:[ue,P,w,pt,U,X,k,O,J,G,fe,me],styles:[".padding-mobile[_ngcontent-%COMP%]{padding-left:5%}@media screen and (max-width: 767px){.t-font[_ngcontent-%COMP%]{font-size:3rem}.padding-mobile[_ngcontent-%COMP%]{padding-left:5%}}"]})};var Zn=[{path:"login",component:xi},{path:"",redirectTo:"/inicio",pathMatch:"full"},{path:"inicio",component:Si,canActivate:[Fe]},{path:"productos",component:di,canActivate:[Fe]},{path:"facturas",component:_i,canActivate:[Fe]},{path:"estadistica",component:Ii,canActivate:[Fe]},{path:"almacen",component:wi,canActivate:[Fe]},{path:"usuarios",component:yi,canActivate:[Fe,Ei],data:{roles:["admin"]}},{path:"**",redirectTo:"",pathMatch:"full"}];var Jn={providers:[en({eventCoalescing:!0}),un(Zn),ln(),on(an())]};var Ps={providers:[cn()]},Xn=nn(Jn,Ps);var Fs=()=>sn(Yt,Xn),ku=Fs;export{ku as a};
