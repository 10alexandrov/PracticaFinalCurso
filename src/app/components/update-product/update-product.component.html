
<div class="wrapper">
  <form [formGroup] = "formUpdateProducto" (ngSubmit)="sendUpdateDatos()">
    <div class="d-flex mt-3 mb-5">
      <h1>Editar producto </h1>
      <div class="ms-5 mt-2" >
        <button type="submit" class="btn btn-primary btn-AW">Editar</button>
      </div>
    </div>
    <div class="d-flex mb-2">
      <div class="m-1 col-6 ">
        <label for="nombre" class="form-label-AW">Nombre producto</label>
        <div>
          <input type="text" formControlName="p_nombre" placeholder="Nombre..." class="form-control col-md-6" value="productoParaEditar.p_nombre"
              [ngClass]="{ 'is-valid': formUpdateProducto.get('p_nombre')?.valid && formUpdateProducto.get('p_nombre')?.touched,
                          'is-invalid': formUpdateProducto.get('p_nombre')?.invalid && formUpdateProducto.get('p_nombre')?.touched }">
            <div *ngIf="formUpdateProducto.get('p_nombre')?.invalid && formUpdateProducto.get('p_nombre')?.touched" class="invalid-feedback col-md-4 ps-3">
              * Este campo es obligatorio!
            </div>
        </div>
      </div>


      <!-- Categoria select -->
      <div class="m-1 col-6">
        <label for="p_categoria" class="form-label-AW">Categoria</label>
        <div>
          <select formControlName="p_categoria" class="form-control col-md-6"
          [ngClass]="{ 'is-valid': formUpdateProducto.get('p_categoria')?.valid && formUpdateProducto.get('p_categoria')?.touched,
          'is-invalid': formUpdateProducto.get('p_categoria')?.invalid && formUpdateProducto.get('p_categoria')?.touched }">
            <option value="">-- Elije un role --</option>
            <option *ngFor="let categoria of categorias; let i = index" [value]="i"> {{ categoria.c_nombre }} </option>
          </select>
            <div *ngIf="formUpdateProducto.get('p_categoria')?.invalid && formUpdateProducto.get('p_categoria')?.touched" class="invalid-feedback col-md-4 ps-3">
            * Este campo es obligatorio!
            </div>
        </div>
      </div>
    </div>

    <!-- Description  -->
    <div class="mb-3">
      <label for="description" class="form-label-AW">Description</label>
      <div class="d-flex col-md-12">
        <input type="text-area" formControlName="p_description" placeholder="Description..." class="form-control col-md-6">
      </div>
    </div>


    <!-- Group para demensiones -->
    <div class="d-flex">

      <div class="col-md-3 me-1">
        <label for="p_longitud" class="form-label">Longitud, mm</label>
        <input type="text" formControlName="p_longitud" placeholder="Longitud..." class="form-control col-md-6"
            [ngClass]="{ 'is-valid': formUpdateProducto.get('p_longitud')?.valid && formUpdateProducto.get('p_longitud')?.touched,
            'is-invalid': formUpdateProducto.get('p_longitud')?.invalid && formUpdateProducto.get('p_longitud')?.touched }">
            <div *ngIf="formUpdateProducto.get('p_longitud')?.invalid && formUpdateProducto.get('p_longitud')?.touched" class="invalid-feedback col-md-4">
              * Este campo es obligatorio!
            </div>
            <div *ngIf="formUpdateProducto.get('p_longitud')?.errors?.['pattern'] && formUpdateProducto.get('p_longitud')?.touched" class="invalid-feedback">
              * En este campo solo cifras!
            </div>
      </div>

      <div class="col-md-3 me-1">
        <label for="p_altura" class="form-label">Altura, mm</label>
        <input type="text" formControlName="p_altura" placeholder="Altura..." class="form-control col-md-6"
        [ngClass]="{ 'is-valid': formUpdateProducto.get('p_longitud')?.valid && formUpdateProducto.get('p_longitud')?.touched,
        'is-invalid': formUpdateProducto.get('p_altura')?.invalid && formUpdateProducto.get('p_altura')?.touched }">
        <div *ngIf="formUpdateProducto.get('p_altura')?.invalid && formUpdateProducto.get('p_altura')?.touched" class="invalid-feedback col-md-4">
          * Este campo es obligatorio!
        </div>
        <div *ngIf="formUpdateProducto.get('p_altura')?.errors?.['pattern'] && formUpdateProducto.get('p_altura')?.touched" class="invalid-feedback">
          * En este campo solo cifras!
        </div>
      </div>

      <div class="col-md-3 me-1">
        <label for="p_ancho" class="form-label">Anchura, mm</label>
        <input type="text" formControlName="p_ancho" placeholder="Anchura..." class="form-control col-md-6"
        [ngClass]="{ 'is-valid': formUpdateProducto.get('p_ancho')?.valid && formUpdateProducto.get('p_longitud')?.touched,
        'is-invalid': formUpdateProducto.get('p_ancho')?.invalid && formUpdateProducto.get('p_ancho')?.touched }">
        <div *ngIf="formUpdateProducto.get('p_ancho')?.invalid && formUpdateProducto.get('p_ancho')?.touched" class="invalid-feedback col-md-4">
          * Este campo es obligatorio!
        </div>
        <div *ngIf="formUpdateProducto.get('p_ancho')?.errors?.['pattern'] && formUpdateProducto.get('p_ancho')?.touched" class="invalid-feedback">
          * En este campo solo cifras!
        </div>
      </div>

      <div class="col-md-3">
        <label for="p_peso" class="form-label">Peso, gr</label>
        <input type="text" formControlName="p_peso" placeholder="Peso..." class="form-control col-md-6"
        [ngClass]="{ 'is-valid': formUpdateProducto.get('p_ancho')?.valid && formUpdateProducto.get('p_peso')?.touched,
        'is-invalid': formUpdateProducto.get('p_peso')?.invalid && formUpdateProducto.get('p_peso')?.touched }">
        <div *ngIf="formUpdateProducto.get('p_peso')?.invalid && formUpdateProducto.get('p_peso')?.touched" class="invalid-feedback col-md-4">
          * Este campo es obligatorio!
        </div>
        <div *ngIf="formUpdateProducto.get('p_peso')?.errors?.['pattern'] && formUpdateProducto.get('p_peso')?.touched" class="invalid-feedback">
          * En este campo solo cifras!
        </div>
      </div>


    </div>

    <!-- Bloque de precio -->

    <div class="d-flex mt-3">
      <div class="col-3 me-1">
        <label for="p_precio_compra" class="form-label">Precio de Compra, euro</label>
        <input type="text" formControlName="p_precio_compra" placeholder="Precio de Compra..." class="form-control col-md-6"
        [ngClass]="{ 'is-valid': formUpdateProducto.get('p_precio_compra')?.valid && formUpdateProducto.get('p_precio_compra')?.touched,
        'is-invalid': formUpdateProducto.get('p_precio_compra')?.invalid && formUpdateProducto.get('p_precio_compra')?.touched }">
        <div *ngIf="formUpdateProducto.get('p_precio_compra')?.invalid && formUpdateProducto.get('p_precio_compra')?.touched" class="invalid-feedback col-md-4">
          * Este campo es obligatorio!
        </div>
        <div *ngIf="formUpdateProducto.get('p_precio_compra')?.errors?.['pattern'] && formUpdateProducto.get('p_precio_compra')?.touched" class="invalid-feedback">
          * En este campo solo cifras!
        </div>
      </div>



      <div class="col-3 me-1">
        <label for="p_peso" class="form-label">Precio de Venta, euro</label>
        <input type="text" formControlName="p_precio_venta" placeholder="Precio de Venta..." class="form-control col-md-6"
        [ngClass]="{ 'is-valid': formUpdateProducto.get('p_precio_venta')?.valid && formUpdateProducto.get('p_precio_venta')?.touched,
        'is-invalid': formUpdateProducto.get('p_precio_venta')?.invalid && formUpdateProducto.get('p_precio_venta')?.touched }">
        <div *ngIf="formUpdateProducto.get('p_precio_venta')?.invalid && formUpdateProducto.get('p_precio_venta')?.touched" class="invalid-feedback col-md-4">
          * Este campo es obligatorio!
        </div>
        <div *ngIf="formUpdateProducto.get('p_precio_venta')?.errors?.['pattern'] && formUpdateProducto.get('p_precio_venta')?.touched" class="invalid-feedback">
          * En este campo solo cifras!
        </div>
      </div>


      <div class="col-3 me-1">
        <label for="p_peso" class="form-label">Código de barras</label>
        <input type="text" formControlName="p_codigo" placeholder="Codigo..." class="form-control col-md-6"
        [ngClass]="{ 'is-valid': formUpdateProducto.get('p_codigo')?.valid && formUpdateProducto.get('p_codigo')?.touched,
        'is-invalid': formUpdateProducto.get('p_codigo')?.invalid && formUpdateProducto.get('p_codigo')?.touched }">
        <div *ngIf="formUpdateProducto.get('p_codigo')?.invalid && formUpdateProducto.get('p_codigo')?.touched" class="invalid-feedback col-md-4">
          * Este campo es obligatorio!
        </div>
        <div *ngIf="formUpdateProducto.get('p_codigo')?.errors?.['pattern'] && formUpdateProducto.get('p_codigo')?.touched" class="invalid-feedback">
          * En este campo solo cifras!
        </div>
        <div *ngIf="formUpdateProducto.get('p_codigo')?.errors?.['maxlength'] && formUpdateProducto.get('p_codigo')?.touched" class="invalid-feedback">
          * Tiene que haber 13 dígitos.
        </div>
        <div *ngIf="formUpdateProducto.get('p_codigo')?.errors?.['minlength'] && formUpdateProducto.get('p_codigo')?.touched" class="invalid-feedback">
          * Tiene que haber 13 dígitos.
        </div>
      </div>
    </div>

    <!-- Bloque de image -->

    <div class="form-group">
      <div class="d-flex">
        <div>
          <label for="name">Image</label>
          <input type="file" class="form-control" name="image" (change)="onFileSelected($event)">
        </div>
        <img *ngIf="p_foto" [src]="p_foto" alt="Preview" class="img-thumbnail mt-2">
      </div>
    </div>
  </form>
</div>




